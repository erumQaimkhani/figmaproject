"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="977d263e-466d-5766-9a8a-53e6e609502c")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[8964],{779412:(e,t,a)=>{a.d(t,{$P:()=>p,Dz:()=>n,E8:()=>E,G8:()=>T,Jh:()=>o,Mm:()=>d,Ms:()=>y,Q$:()=>N,QB:()=>f,VA:()=>v,Vf:()=>_,W2:()=>c,_R:()=>u,b:()=>i,gt:()=>x,hx:()=>l,jG:()=>h,o:()=>s,oE:()=>g,y3:()=>S,yH:()=>m,yl:()=>r});let r="org_upgrade_single_team_modal--modal--GKnof",s="org_upgrade_single_team_modal--planModalHeader--NLEl0",n="org_upgrade_single_team_modal--planModalHeaderText--N4j-B",l="org_upgrade_single_team_modal--planModalTitle---5-PM text--fontPos24--YppUD text--_fontBase--QdLsd",i="org_upgrade_single_team_modal--closeButton--JAEBU",o="org_upgrade_single_team_modal--planModalHeaderDivider--joa2o",m="org_upgrade_single_team_modal--planGrid--Z0ray",d="org_upgrade_single_team_modal--planGrid__vertDivided--yqTLR",c="org_upgrade_single_team_modal--seeAllFeatures--1cwDV",_="org_upgrade_single_team_modal--teamPlan--Xe5rA",u="org_upgrade_single_team_modal--itemList--UYnKe",p="org_upgrade_single_team_modal--planItem--Arex9",g="org_upgrade_single_team_modal--checkIcon--kCeMJ",E="org_upgrade_single_team_modal--planSelectButton--lvbr7",h="org_upgrade_single_team_modal--scrollContainer--Gqm8k",v="org_upgrade_single_team_modal--subtitle--5pxSm",f="org_upgrade_single_team_modal--planNameBase--AJCle text--fontPos16--oMC-G text--_fontBase--QdLsd",y="org_upgrade_single_team_modal--planPriceView--4ISjE",S="org_upgrade_single_team_modal--priceRow--DF93K text--fontPos11--2LvXf text--_fontBase--QdLsd",T="org_upgrade_single_team_modal--priceFigureWithFigjam--D0gWt text--fontPos16--oMC-G text--_fontBase--QdLsd",N="org_upgrade_single_team_modal--figmaPriceWithDevMode--Y3tyk",x="org_upgrade_single_team_modal--devModeText--w5m6B"},822907:(e,t,a)=>{a.d(t,{$g:()=>d,DI:()=>m,Eh:()=>l,GK:()=>s,J1:()=>o,KV:()=>n,b:()=>r,cr:()=>g,jG:()=>c,kz:()=>_,nW:()=>p,o8:()=>u,u1:()=>i,wv:()=>E});let r="universal_upgrade_sequence--closeButton--S-6M2",s="universal_upgrade_sequence--modalTitle--1nrY9 text--fontPos18--rYXJb text--_fontBase--QdLsd",n="universal_upgrade_sequence--modalSubtitle--cMqzE text--fontPos14--OL9Hp text--_fontBase--QdLsd",l="universal_upgrade_sequence--createTeamInput--MuDzz basic_form--labeledInputGroup--aeD6L text--fontPos14--OL9Hp text--_fontBase--QdLsd",i="universal_upgrade_sequence--spinner--K-cVF",o="universal_upgrade_sequence--tileUpgradeButton--xeNnN",m="universal_upgrade_sequence--nextButtonSmall--LG9cZ universal_upgrade_sequence--nextButton--jDx3Q",d="universal_upgrade_sequence--createTeamSection--V3vtF",c="universal_upgrade_sequence--scrollContainer--8KeVt",_="universal_upgrade_sequence--scrollContainerTopBorder--Aeveh",u="universal_upgrade_sequence--scrollContainerBottomBorder--dWxc4",p="universal_upgrade_sequence--teamTileContainer--uef0R org_self_serve--teamLargeTileContainer--5eyHQ",g="universal_upgrade_sequence--teamTile--giMxy org_self_serve--teamTileLarge--n-y0u text--fontPos14--OL9Hp text--_fontBase--QdLsd",E="universal_upgrade_sequence--lastTeamTile--jYkbS universal_upgrade_sequence--teamTile--giMxy org_self_serve--teamTileLarge--n-y0u text--fontPos14--OL9Hp text--_fontBase--QdLsd"},516319:(e,t,a)=>{a.d(t,{$M:()=>G,$y:()=>D,BP:()=>k,Bb:()=>eo,Ed:()=>Q,Et:()=>l,F0:()=>r,Hl:()=>es,I1:()=>q,Jo:()=>X,KZ:()=>b,LQ:()=>w,M7:()=>n,N5:()=>W,Nd:()=>o,Nv:()=>B,O:()=>Y,O2:()=>er,OL:()=>d,Or:()=>j,Ov:()=>u,Ps:()=>M,Qv:()=>H,S$:()=>O,SU:()=>F,Sv:()=>p,TB:()=>_,TK:()=>h,Uu:()=>v,V:()=>ei,W:()=>m,Xq:()=>J,Yn:()=>y,ZE:()=>z,ZM:()=>E,_h:()=>s,aK:()=>g,aQ:()=>P,bv:()=>S,cH:()=>I,cc:()=>et,er:()=>c,ex:()=>U,fI:()=>x,gn:()=>K,i9:()=>f,iv:()=>Z,jg:()=>el,lQ:()=>ee,li:()=>i,ll:()=>V,nm:()=>ea,nz:()=>L,o1:()=>R,rh:()=>N,sk:()=>T,tZ:()=>C,uC:()=>en,uD:()=>$,xr:()=>A});let r="org_self_serve_figjam--selfServePage--xMlvz",s="org_self_serve_figjam--stepContainer--zohgH",n="org_self_serve_figjam--stepContent--sL7gc",l="org_self_serve_figjam--stepContentTeamCreation--aaY9V",i="org_self_serve_figjam--menuContainer--hPrPq",o="org_self_serve_figjam--cancelMenuItem--ZABKH",m="org_self_serve_figjam--pageTitle--Y69Xv",d="org_self_serve_figjam--pageSubTitle--jRWG-",c="org_self_serve_figjam--purchaseSummary--1jvAh",_="org_self_serve_figjam--sidebarScrollContainer--UycW4",u="org_self_serve_figjam--summaryHeader--X9DJV",p="org_self_serve_figjam--subText--Pqpby",g="org_self_serve_figjam--summaryDivider--Ijd9-",E="org_self_serve_figjam--summaryDividerFull--kuRTz org_self_serve_figjam--summaryDivider--Ijd9-",h="org_self_serve_figjam--headerText--2IfHu",v="org_self_serve_figjam--flex--0m89h",f="org_self_serve_figjam--svgText--d7FBP org_self_serve_figjam--flex--0m89h",y="org_self_serve_figjam--lineItem--TU69Z org_self_serve_figjam--flex--0m89h",S="org_self_serve_figjam--boldText--M7Bo1 org_self_serve_figjam--headerText--2IfHu",T="org_self_serve_figjam--nextStep--PqDbR",N="org_self_serve_figjam--nextStepContainer--66sFN",x="org_self_serve_figjam--paymentForm--ymx94",w="org_self_serve_figjam--teamLargeTileContainer--QmdT1",b="org_self_serve_figjam--teamSmallTileContainer--NjKIe org_self_serve_figjam--teamLargeTileContainer--QmdT1",C="org_self_serve_figjam--teamTileLarge--YhJVn text--fontPos14--OL9Hp text--_fontBase--QdLsd",A="org_self_serve_figjam--teamTileSmall--umUI5 org_self_serve_figjam--teamTileLarge--YhJVn text--fontPos14--OL9Hp text--_fontBase--QdLsd",I="org_self_serve_figjam--showMoreContainer--s6FDi visual_bell--messageContainer--fkhJH _overlayBase--_overlayBase--Rkj8l text--fontNeg14--ARPWl text--_fontBase--QdLsd text--_negText--j9g-L",P="org_self_serve_figjam--showMoreMessage--bU3eH visual_bell--message--lQw67 visual_bell--messageBase--Dg3ya ellipsis--ellipsis--Tjyfa",D="org_self_serve_figjam--helpIcon--VL26R",k="org_self_serve_figjam--teamText--9mEG6",M="org_self_serve_figjam--teamName--xKICF text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",O="org_self_serve_figjam--teamEditors--BIoT8 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",R="org_self_serve_figjam--teamCheck--tAaSc",B="org_self_serve_figjam--detailsForm--ML86I stripe--stripeCardAndAddress--b42eG org_self_serve_figjam--paymentForm--ymx94",L="org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM",F="org_self_serve_figjam--verticalDivider--55STw",V="org_self_serve_figjam--reviewSummary--a9zmQ",U="org_self_serve_figjam--reviewItem--nP8xV",j="org_self_serve_figjam--billingDetails--n7k3F",z="org_self_serve_figjam--billingSubText--tlSbP",G="org_self_serve_figjam--billingItem--ny6ji",$="org_self_serve_figjam--textLink--eCcAk org_self_serve_figjam--billingSubText--tlSbP",K="org_self_serve_figjam--confirmPaymentBox--2UmhL",Y="org_self_serve_figjam--msaCheck--S57fu",X="org_self_serve_figjam--confirmationBox--Z-OCC org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM",W="org_self_serve_figjam--flexBox--3nRDc",H="org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",q="org_self_serve_figjam--confirmationCharge--6L8US org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",Q="org_self_serve_figjam--confirmationRow--qQLOY",J="org_self_serve_figjam--confirmationHomeButton--NMBxx text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",Z="org_self_serve_figjam--confirmationAmountDue--p0xPk",ee="org_self_serve_figjam--reviewSubTitle--GOFpF",et="org_self_serve_figjam--confirmationHeading--SQiqP",ea="org_self_serve_figjam--confirmationLoadingText--CTID2 org_self_serve_figjam--msaLabelText--r7LKd",er="org_self_serve_figjam--greenCheck--NXjmx",es="org_self_serve_figjam--plusSvg--ZHB1e",en="org_self_serve_figjam--purchaseMinimumBanner--mM4gI",el="org_self_serve_figjam--confirmationPage--KGVNA",ei="org_self_serve_figjam--currencyText--CW0E- org_self_serve_figjam--boldText--M7Bo1 org_self_serve_figjam--headerText--2IfHu",eo="org_self_serve_figjam--createTeamContainer--D3kS-"},486184:(e,t,a)=>{a.d(t,{Ac:()=>B,Bo:()=>D,E0:()=>N,EU:()=>y,F:()=>ee,F0:()=>H,Fb:()=>m,Gn:()=>M,HX:()=>I,HY:()=>h,Hl:()=>w,Ie:()=>o,Jr:()=>i,Ks:()=>p,LC:()=>R,N6:()=>s,Nd:()=>n,PT:()=>P,P_:()=>C,Pr:()=>q,Ps:()=>U,QB:()=>f,S:()=>et,Su:()=>g,TV:()=>O,W:()=>T,Wu:()=>L,Yw:()=>F,ZD:()=>j,Zy:()=>Q,ab:()=>v,aq:()=>z,b0:()=>d,dX:()=>X,db:()=>A,eA:()=>W,fK:()=>Z,h7:()=>V,hy:()=>$,iY:()=>es,im:()=>r,kv:()=>x,ni:()=>S,of:()=>G,p7:()=>u,pV:()=>E,q9:()=>Y,qS:()=>er,re:()=>_,sD:()=>c,sH:()=>ea,uD:()=>b,uz:()=>l,vK:()=>k,vg:()=>K,x:()=>J});let r="team_upgrade_v2--teamUpgrade---rASs",s="team_upgrade_v2--breadCrumbsMenuContainer--dvekb",n="team_upgrade_v2--cancelMenuItem--2RsWk",l="team_upgrade_v2--checkoutStepContainer--a0yBO",i="team_upgrade_v2--checkoutPageContent--HATl6",o="team_upgrade_v2--checkoutSidebarContainer--utUoC",m="team_upgrade_v2--stepTitle--4NAuW",d="team_upgrade_v2--stepSubtitle--YyFvT",c="team_upgrade_v2--adjustEditorsBody--jqZkR",_="team_upgrade_v2--adjustEditorsSection--S7GmH",u="team_upgrade_v2--teamWithAvatarHandle--cPZzE",p="team_upgrade_v2--adjustEditorsRow--kbqDx",g="team_upgrade_v2--adjustEditorsRowStart--Vse1R team_upgrade_v2--adjustEditorsRow--kbqDx",E="team_upgrade_v2--greyDivider--wKQUb",h="team_upgrade_v2--columnTitle--btKvn",v="team_upgrade_v2--editorColumn--vx6Sp",f="team_upgrade_v2--editorInfo--CSCyJ",y="team_upgrade_v2--normalGreyText--hzcfc",S="team_upgrade_v2--truncateEditorColumnText--GS8AU",T="team_upgrade_v2--editorEmail--mF8D- team_upgrade_v2--normalGreyText--hzcfc team_upgrade_v2--truncateEditorColumnText--GS8AU",N="team_upgrade_v2--checkboxColumn--Ocx0d",x="team_upgrade_v2--checkbox--UA9TI",w="team_upgrade_v2--plusSvg--Y1zMt",b="team_upgrade_v2--textLink--t33F3",C="team_upgrade_v2--paymentStripeContainer--UkrEB",A="team_upgrade_v2--reviewStepBody--bWjBO",I="team_upgrade_v2--reviewStepBodyWithBusinessDetails--1YrJl",P="team_upgrade_v2--reviewStepBusinessDetails--fcmPK",D="team_upgrade_v2--reviewStepSummary--ruxM5",k="team_upgrade_v2--banner--mJW7s",M="team_upgrade_v2--reviewStepCheckbox--3Q69b",O="team_upgrade_v2--reviewStepUpgradeTitle--QJfMJ",R="team_upgrade_v2--sidebarTitle--MY3Uh",B="team_upgrade_v2--sidebarOption--dHDz0",L="team_upgrade_v2--sidebarOptionLabel--IUNHx",F="team_upgrade_v2--sidebarOptionLabelWithAnnualSavings--861RA",V="team_upgrade_v2--sidebarCurrencyContainer--VMPEp",U="team_upgrade_v2--teamName--n59vL",j="team_upgrade_v2--billingCycleHeader--8laVr",z="team_upgrade_v2--radioRow--tznVj",G="team_upgrade_v2--strikethrough--jI4mc",$="team_upgrade_v2--greyStrikethrough--Jbgox team_upgrade_v2--strikethrough--jI4mc",K="team_upgrade_v2--editorCostRow--KJrC6",Y="team_upgrade_v2--calculationRow--PKA-7",X="team_upgrade_v2--planComparison--XjxhG",W="team_upgrade_v2--createTeamButton--F2nsr",H="team_upgrade_v2--createTeamNameInput--BvH1V",q="team_upgrade_v2--createTeamIcon--27Mtz",Q="team_upgrade_v2--createTeamTextInput--qXTZr",J="team_upgrade_v2--createTeamUpgradeExisting--Vjzv8",Z="team_upgrade_v2--cartButton--dj1gp",ee="team_upgrade_v2--centered--HXt6c",et="team_upgrade_v2--loadingSpinner--qI2xc publish_modal--spinner--7DaqW",ea="team_upgrade_v2--numeric--eSa4E",er="team_upgrade_v2--badge--hwxQy",es="team_upgrade_v2--infoSection--HIqIK"},469720:(e,t,a)=>{a.r(t),a.d(t,{EduReviewPage:()=>x});var r=a(411855),s=a(188507),n=a(586459),l=a(946689),i=a(158875),o=a(797129),m=a(881690),d=a(135876),c=a(446520),_=a(163023),u=a(901536),p=a(939863),g=a(403491),E=a(310908),h=a(738269),v=a(995852),f=a(229403),y=a(672517),S=a(820113),T=a(630834);let N=e=>{let t=(0,s.d4)(t=>{let a=f.Xw.loadingKeyForPayload({teamId:e});return t.loadingState[a]}),a=(0,s.d4)(t=>t.teamUserByTeamId[e]||{}),l=(0,s.wA)();r.useEffect(()=>{l(f.Xw({teamId:e}))},[l,e]);let i=t!==n.r.SUCCESS;return r.useEffect(()=>{if(!i){let e=Object.keys(a).length;l(v.Az({numWhiteboardEditors:e})),l(v.js({numDesignEditors:e}))}},[l,i,a]),i};function x({selectedView:e}){let{teamId:t}=e,a=N(t),n=(0,s.wA)(),f=()=>{n(v.Nj({teamId:t,onCloseOrComplete:e.onCloseOrComplete}))};return r.createElement(y.fu,{name:"Edu Review",properties:{teamId:t}},r.createElement("div",null,r.createElement(o.O,{menu:r.createElement(i.X,{onClick:()=>{n(h.$T({view:"team",teamId:t})),e.onCloseOrComplete?.()}},r.createElement(_.B,{svg:T.default,className:"edu_review--modalCloseX--t3-Et",dataTestId:"close-button"}))},r.createElement("span",{className:e.showBreadcrumbs?void 0:"edu_review--hidden--IgK6O"},r.createElement(E.J,{index:3})),r.createElement("div",{className:u.cx.flex.flexColumn.itemsCenter.alignCenter.$},r.createElement(c.JR,null,(0,p.tx)("edu.almost_done_everything_look_good")),r.createElement(l.Kz,{multiple:4}),r.createElement(d.x,{isLoading:a},()=>r.createElement(m.o,null,r.createElement(g.d,{selectedView:e,onClickConfirm:f,currency:(0,S.LN)(),canSeeBillingAddressExp:!1})))))))}},332088:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeMultiTeamModal:()=>P});var r=a(411855),s=a(188507),n=a(966712),l=a(752553),i=a(485727),o=a(799569),m=a(946689),d=a(355819),c=a(163023),_=a(939863),u=a(738269),p=a(662275),g=a(101505),E=a(672517),h=a(710667),v=a(304769),f=a(13513),y=a(978779),S=a(820113),T=a(984968),N=a(928491),x=a(488578);let w="org_upgrade_multi_team_modal--planModalDivider--o3qOc";var b=a(779412),C=a(450147),A=a(999918);function I(e){return r.createElement("div",{className:"org_upgrade_multi_team_modal--planItem--DcvNe"},r.createElement(c.B,{svg:C.A,className:"org_upgrade_multi_team_modal--checkIcon--zLWzz"}),r.createElement("p",null,e.text))}let P=(0,s.Ng)(e=>{let{teams:t}=e;return{teams:t,unsortedTeamIds:(0,T._L)(e.user,e.roles,e.teams)}})((0,E.kp)(function(e){let t=(0,s.wA)(),a=()=>{t(p.Ce())},E=r.useMemo(()=>[(0,_.t)("org_upgrade.multi_team.plan_items.shared_design_libraries"),(0,_.t)("org_upgrade.multi_team.plan_items.shared_fonts_and_styles"),(0,_.t)("org_upgrade.multi_team.plan_items.centralized_billing_and_admin_controls"),(0,_.t)("org_upgrade.multi_team.plan_items.single_sign_on_sso_integrations")],[]),T=e=>r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListEntry--MBLhi",key:e.id},r.createElement(N.Ro,{size:10,hideFallbackInitial:!0,entity:e,shape:"SQUARE"}),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListEntryName--E7Oz5 ellipsis--ellipsis--Tjyfa"},e.name)),C=r.useMemo(()=>{switch(Object.keys(e.teams).length){case 2:return 184;case 3:return 192;default:return 221}},[e.teams]),P=b.G8,D=(0,h.N1)(h.Fq.ORG_UPGRADE),[k]=(0,l.mI)(D),M=(0,S.wU)(),O=f.Oq.dict(e=>(0,y._)(k.data,M.currency,e));return r.createElement(x.Nb,{className:"org_upgrade_multi_team_modal--modal--Eph1i",hide:a,size:"fitContent",useModalViewScroll:!1},r.createElement(d.P,{className:"org_upgrade_multi_team_modal--scrollContainer--Qmo14"},r.createElement("div",{className:"org_upgrade_multi_team_modal--planModalHeader--3StZ-",style:{height:64,marginBottom:32}},r.createElement("div",{className:"org_upgrade_multi_team_modal--planModalTitle---8WXo text--fontPos24--YppUD text--_fontBase--QdLsd",style:{fontWeight:600}},(0,_.tx)("org_upgrade.multi_team.bring_your_teams_together_with_the_figma_organization_plan")),r.createElement(o.Jn,{className:"org_upgrade_multi_team_modal--closeButton--DsBya",onClick:a,innerText:"close"})),r.createElement("div",{className:w}),r.createElement("div",{className:"org_upgrade_multi_team_modal--planDetails--5tvMx"},r.createElement("div",{className:"org_upgrade_multi_team_modal--planDetailsLeft--Gd-Za"},r.createElement("div",{className:"org_upgrade_multi_team_modal--billingCadence--7VSSA"},(0,_.tx)("org_upgrade.multi_team.annual_billing_only")),r.createElement("div",{className:b.y3},r.createElement("p",{className:b.Q$},(0,_.tx)("org_upgrade.multi_team.figma"),(0,n.kc)().billing_dev_mode_customer_ui&&r.createElement("div",{className:b.gt},r.createElement(i.G,null))),r.createElement("div",null,(0,_.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:b.G8},M.formatMoney(O[v.ud.DESIGN]))}))),(0,n.kc)().billing_dev_mode_customer_ui&&r.createElement("div",{className:b.y3},(0,_.tx)("org_upgrade.multi_team.dev_mode"),r.createElement("div",null,(0,_.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:b.G8},M.formatMoney(O[v.ud.DEV_MODE]))}))),r.createElement("div",{className:b.y3},(0,_.tx)("org_upgrade.multi_team.fig_jam"),r.createElement("div",null,(0,_.tx)("org_upgrade.multi_team.billing_cost_per_month.seat_rename",{monthlyCostInDollars:r.createElement("span",{className:P},M.formatMoney(O[v.ud.FIGJAM]))}))),r.createElement("div",{className:"org_upgrade_multi_team_modal--planText--yWkM6"},r.createElement("div",{className:"org_upgrade_multi_team_modal--itemList--Atvs1"},E.map((e,t)=>r.createElement("div",{key:t},r.createElement(I,{text:e}))),r.createElement("div",{className:"org_upgrade_multi_team_modal--seeAll---IIqV"},r.createElement(m.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0},(0,_.tx)("org_upgrade.multi_team.see_all_features")))))),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationSection--fo4Lr",style:{height:C}},r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationLeftSection--mq8iD"},r.createElement("div",{className:"org_upgrade_multi_team_modal--dynamicTeamListSection--rTcPV"},r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListHeader--WkSnI"},r.createElement("img",{className:"org_upgrade_multi_team_modal--placeholderOrgLogo--YHQ27",src:"https://static.figma.com/uploads/fc0fcfadcfe50c96f4dcf859aabe1952c822ae2a",draggable:!1,alt:""}),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListOrgName--2QSd-"},(0,_.tx)("org_upgrade.multi_team.acme_inc")),r.createElement(c.B,{svg:A.A,className:"org_upgrade_multi_team_modal--multiTeamOrgUpgradeAdjustSvg--t10aI"})),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamListDivider--4LHjy"}),(()=>{let t=e.unsortedTeamIds,a=[];for(var s=0;s<Math.min(4,t.length);s++){let r=e.teams[t[s]];a.push(T(r))}return r.createElement("div",{className:"org_upgrade_multi_team_modal--teamList--cUzNg"},a)})(),r.createElement("div",{className:"org_upgrade_multi_team_modal--teamIllustrationRightSection---iPaZ"},r.createElement("img",{className:"org_upgrade_multi_team_modal--filesIllustration--KZ4YR",src:"https://static.figma.com/uploads/e2148969d5a469e76c053a23b6647d487e6d64ee",draggable:!1,alt:""}),r.createElement("img",{src:"https://static.figma.com/uploads/50ae1752a504eea59f2a3efac6b0f2d1ed74435a",draggable:!1,alt:""})))))),r.createElement("div",{className:w}),r.createElement(m.vd,{onClick:()=>{a(),t(u.$T({view:"orgSelfServe",upsellSource:e.upsellSource}))},className:"org_upgrade_multi_team_modal--continueButton--3-IKc",trackingProperties:{trackingDescriptor:g.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource}},(0,_.tx)("org_upgrade.multi_team.continue")),r.createElement("div",{className:"org_upgrade_multi_team_modal--spaceFiller--M22d1"})))},"Multi-Team Org Upgrade Modal"))},392201:(e,t,a)=>{a.r(t),a.d(t,{OrgUpgradeSingleTeamModal:()=>M,PlanWithFigjamPriceView:()=>k});var r=a(411855),s=a(188507),n=a(629019),l=a.n(n),i=a(966712),o=a(752553),m=a(485727),d=a(799569),c=a(946689),_=a(355819),u=a(163023),p=a(939863),g=a(738269),E=a(662275),h=a(101505),v=a(672517),f=a(710667),y=a(304769),S=a(13513),T=a(720647),N=a(978779),x=a(820113),w=a(243987),b=a(488578),C=a(779412),A=a(592312),I=a(414270);function P(e){return r.createElement(r.Fragment,null,r.createElement(u.B,{svg:e.isArrow?A.A:I.A,className:C.oE}),r.createElement("p",null,e.text))}function D(e){return r.createElement("div",{className:C.Vf},r.createElement("div",{className:C._R},e.features.map((e,t)=>r.createElement("div",{key:t,className:C.$P},r.createElement(P,{text:e.text,isArrow:e.isArrow}))),e.plan===w.Jm.ORG&&r.createElement("div",{className:C.W2},r.createElement(c.Us,{href:"https://www.figma.com/pricing/#cid-57mfNh6t0Xo7z8Q95Ww9ZV",target:"_blank",trusted:!0},(0,p.tx)("org_upgrade.single_team.see_all_features"))),e.plan===w.Jm.ORG&&r.createElement(c.vd,{onClick:e.onUpgrade,className:C.E8,trackingProperties:{trackingDescriptor:h.c.UPGRADE_TO_ORGANIZATION,upsellSource:e.upsellSource}},(0,p.tx)("org_upgrade.single_team.upgrade_to_an_organization"))))}function k(e){return r.createElement("div",{className:C.Ms,style:{padding:e.padding},"data-testid":e.dataTestId},r.createElement("h2",{className:C.QB},e.name),r.createElement("p",{className:C.VA},e.subtitle),r.createElement("div",{className:C.y3},r.createElement("p",{className:C.Q$},(0,p.tx)("plan_details.figma"),(0,i.kc)().billing_dev_mode_customer_ui&&r.createElement("div",{className:C.gt},r.createElement(m.G,null))),r.createElement("div",null,r.createElement("p",{className:C.G8},e.prices[T.G_.DESIGN]))),(0,i.kc)().billing_dev_mode_customer_ui&&e.prices[T.G_.DEV_MODE]&&r.createElement("div",{className:C.y3},r.createElement("p",null,(0,p.tx)("plan_details.dev_mode_only")),r.createElement("div",null,r.createElement("p",{className:C.G8},e.prices[T.G_.DEV_MODE]))),r.createElement("div",{className:C.y3},r.createElement("p",null,(0,p.tx)("plan_details.fig_jam")),r.createElement("div",null,r.createElement("p",{className:C.G8},e.prices[T.G_.FIGJAM]))))}let M=(0,v.kp)(function(e){let t=(0,s.wA)(),a=()=>{t(E.Ce())},n=(0,f.N1)(f.Fq.ORG_UPGRADE),[i]=(0,o.mI)(n),m=(0,x.wU)(),c=S.Oq.exclude([y.ud.DEV_MODE]),u=c.dict(e=>(0,N.G7)(i.data,m.currency,e)),h=S.Oq.dict(e=>(0,N._)(i.data,m.currency,e));return r.createElement(b.Nb,{className:C.yl,hide:a,size:586,useModalViewScroll:!1},r.createElement(_.P,{className:C.jG},r.createElement("div",{className:C.o},r.createElement("div",{className:C.Dz},r.createElement("div",{className:C.hx},(0,p.tx)("org_upgrade.single_team.get_more_out_of_figma_as_you_grow"))),r.createElement(d.Jn,{className:C.b,onClick:a,innerText:"close"})),r.createElement("div",{className:l()(C.yH,C.Mm)},r.createElement(k,{dataTestId:"pro-prices",name:(0,p.t)("org_upgrade.single_team.professional_plan"),subtitle:(0,p.t)("org_upgrade.single_team.price_when_billed_annually"),prices:c.dict(e=>`${m.formatMoney(u[e])}`),padding:"16px 31px 16px 36px"}),r.createElement(k,{dataTestId:"org-prices",name:(0,p.t)("org_upgrade.single_team.organization_plan"),subtitle:(0,p.t)("org_upgrade.single_team.annual_billing_only"),prices:S.Oq.dict(e=>`${m.formatMoney(h[e])}`),padding:"16px 32px 16px 33px"})),r.createElement("div",{className:C.Jh}),r.createElement("div",{className:C.yH},r.createElement(D,{plan:w.Jm.PRO,features:[{text:(0,p.t)("org_upgrade.single_team.unlimited_design_files_and_projects_in_one_team")},{text:(0,p.t)("org_upgrade.single_team.design_library_within_one_team")},{text:(0,p.t)("org_upgrade.single_team.audio_conversations_in_files")}]}),r.createElement(D,{plan:w.Jm.ORG,features:[{text:(0,p.t)("org_upgrade.single_team.everything_in_professional_plus"),isArrow:!0},{text:(0,p.t)("org_upgrade.single_team.unlimited_teams_and_unlimited_projects")},{text:(0,p.t)("org_upgrade.single_team.cross_team_design_libraries_and_fonts")},{text:(0,p.t)("org_upgrade.single_team.control_file_sharing_inside_and_outside_of_your_organization")},{text:(0,p.t)("org_upgrade.single_team.single_sign_on_sso_integration")},{text:(0,p.t)("org_upgrade.single_team.private_plugins_and_plugin_management")},{text:(0,p.t)("org_upgrade.single_team.full_content_ownership")}],onUpgrade:()=>{a(),t(g.$T({view:"orgSelfServe",upsellSource:e.upsellSource}))},upsellSource:e.upsellSource}))))},"Single-Team Org Upgrade Modal")},152495:(e,t,a)=>{a.r(t),a.d(t,{UniversalUpgradeSequence:()=>z});var r=a(411855),s=a(188507),n=a(517333),l=a(320063),i=a(799569),o=a(946689),m=a(939863),d=a(55992),c=a(738269),_=a(507877),u=a(662275),p=a(995852),g=a(672517),E=a(594901),h=a(611978),v=a(820113),f=a(243987),y=a(622139),S=a(637590),T=a(488578),N=a(297666),x=a(218881),w=a(27087),b=a(921619),C=a(452441),A=a(493323),I=a(980820),P=a(936500),D=a(902957),k=a(349410),M=a(988022),O=a(860178),R=a(693223),B=a(344950),L=a(822907);let F=(0,I.nF)((e,{teamName:t,selectedView:a,currency:r,onSuccess:s,onError:n,onBillingCompleteRedirectInfo:l})=>{let i;w.Ay.post("/api/teams/create",{team_name:t}).then(({data:t})=>(i="team"in t.meta?t.meta.team:t.meta,e.dispatch(D.bE({team:i})),(0,M._J)("Team Created",i.id,e.getState()),B.G.getTeam({teamId:i.id}))).then(({data:t})=>{for(let a of t.meta)e.dispatch(P.bE({role:a}));s(),e.dispatch(p.WX({teamId:i.id,selectedView:a,newTeam:!0,currency:r,...l?{onBillingCompleteRedirectInfo:l}:{}}))}).catch(()=>{n()})});function V(e){let t=(0,s.wA)(),a=(0,O.TA)(),n=(0,s.d4)(R.P),l=(0,s.d4)(e=>e.roles.byTeamId),[i,d]=r.useState(!1),[c,_]=r.useState(!1),[p,g]=r.useState(""),E=(0,v.LN)(),h=(0,x.I7)("starter_team_loophole_experiment_m0"),f=(0,x.I7)("starter_team_loophole_experiment_m1"),y=()=>{t(u.Ce())},S=(0,N.s)(()=>{d(!0),p?t(F({teamName:p,selectedView:e.selectedView,currency:E,onSuccess:y,onError:()=>{d(!1),_(!0)},onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})):(d(!1),_(!0))});return a&&!(0,k.e5)({userId:a,teams:Object.values(n),rolesByTeamId:l,getM0Config:h.getConfig,getM1Config:f.getConfig})?r.createElement("div",{"data-testid":"createTeamToUpgradeView"},r.createElement("p",{className:L.KV},(0,m.tx)("universal_upgrade_sequence.subtitle")),c&&r.createElement(r.Fragment,null,r.createElement(b.I,{message:(0,m.t)("universal_upgrade_sequence.error"),marginTop:16}),r.createElement(o.Kz,{multiple:1})),r.createElement(o.Kz,{multiple:2}),r.createElement("div",{className:L.$g},r.createElement("div",{className:L.Eh},r.createElement(C.L,{dataTestId:"createTeamInput",placeholder:(0,m.t)("universal_upgrade_sequence.team_name.placeholder"),value:p||"",onChange:e=>{g(e.target.value)},required:!0,maxLength:255})),r.createElement(o.vd,{dataTestId:"nextButton",className:L.DI,disabled:!p||i,onClick:S},i?r.createElement(A.kt,{className:L.u1}):(0,m.tx)("universal_upgrade_sequence.next")))):null}var U=a(252011),j=a(80889);function z(e){let[t,a]=r.useState("selectTeam"),N=(0,s.wA)(),x=(0,h._6)(),w=(0,E.FC)(),b=(0,s.d4)(e=>e.payment.promo),C=(0,s.d4)(e=>e.payment.billingPeriod),A=()=>{N(u.Lo())},I=()=>{N(u.Ce()),e.onDone?.()},P=t=>{"teamUpgrade"===x.view?N(c.$T({...x,teamFlowType:S.SC.UPGRADE_EXISTING_TEAM,teamId:t.id,paymentStep:(0,d.kR)(x.paymentStep,S.SC.UPGRADE_EXISTING_TEAM,x.billingPeriod||null,b,x.planType||S.Sc.UNDETERMINED,b?y.tn.CONFIRM_PAY:y.tn.CHOOSE_PLAN),billingPeriod:e.billingPeriod||C})):N(p.WX({teamId:t.id,selectedView:x,newTeam:!1,currency:(0,v.LN)(),billingPeriod:e.billingPeriod,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo,openInNewTab:e.openInNewTab})),I()},D=()=>{0===(0,f.PS)(w).length?(N(_.Dw({openInNewTab:!n.eD})),a("createTeam")):a("selectTeam")};return((0,l.h)(()=>{e.plan===U.I.PRO&&D()}),"selectTeam"===t)?(()=>{let t=(0,f.PS)(w);return r.createElement(g.fu,{name:"Upgrade Select Team Modal"},r.createElement(T.Nb,{hide:A,size:436},r.createElement("h1",{"data-testid":"modalTitle",className:L.GK},(0,m.tx)("universal_upgrade_sequence.title")),r.createElement(i.Jn,{dataTestId:"closeButton",className:L.b,onClick:A,innerText:(0,m.t)("universal_upgrade_sequence.close_modal")}),r.createElement(o.Kz,{multiple:2}),r.createElement(j.I,{eligibleTeams:t,selectTeam:P}),r.createElement(o.Kz,{multiple:2}),r.createElement(V,{selectedView:x,onBillingCompleteRedirectInfo:e.onBillingCompleteRedirectInfo})))})():r.createElement(r.Fragment,null)}},80889:(e,t,a)=>{a.d(t,{I:()=>_});var r=a(411855),s=a(946689),n=a(355819),l=a(939863),i=a(101505),o=a(672517),m=a(243987),d=a(928491),c=a(822907);function _({customUpgradeText:e,eligibleTeams:t,selectTeam:a,numDesignFilesPerTeam:_,showEditorCount:u=!0}){let[p,g]=(0,r.useState)(!1),[E,h]=(0,r.useState)(!1);r.useEffect(()=>{g(t.length>=5)},[t]);let v=`${c.jG}`;p&&(v+=` ${c.o8}`),E&&(v+=` ${c.kz}`);let f=t[t.length-1],y=_&&_.length===t.length;return r.createElement(n.P,{onScroll:(e,a)=>{let r=t.length>=5,s=r&&0!==e,n=r&&e+a.trackHeight!==a.scrollHeight;n!==p&&g(n),s!==E&&h(s)},className:v,scrollingDisabled:!1},r.createElement("div",{className:c.nW},t.map((t,n)=>r.createElement(o.jm,{key:t.id,className:t===f?c.wv:c.cr,onClick:()=>a(t),trackingProperties:{teamId:t.id,trackingDescriptor:i.c.UPGRADE},innerText:"Upgrade"},r.createElement("div",{className:"org_self_serve--teamInfo--xNtY0"},r.createElement(d.Ro,{className:"org_self_serve--teamIcon--H4ZjA",entity:t,size:40,shape:"SQUARE"}),r.createElement("div",{className:"org_self_serve--teamText--Xvk6X"},r.createElement("p",{className:"org_self_serve--teamName---V8nF text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},t.name),r.createElement("p",{className:"org_self_serve--teamEditors--SfrdT text--fontPos11--2LvXf text--_fontBase--QdLsd"},!y&&u&&(0,l.tx)("universal_upgrade.select_team.editor_count.seat_rename",{editors:t.editors}),y&&_&&(0,l.tx)("universal_upgrade.select_team.files_per_team_figma_files_used",{numFilesUsed:_[n],numFreeFilesAllowed:m.WW})))),r.createElement(s.nR,{className:c.J1,dataTestId:"select_team.upgrade"},e??(0,l.tx)("universal_upgrade.select_team.upgrade"))))))}},271125:(e,t,a)=>{a.r(t),a.d(t,{UpgradeContactSalesModal:()=>D});var r=a(411855),s=a(188507),n=a(297666),l=a(133537),i=a(27087),o=a(799569),m=a(921619),d=a(946689),c=a(163023),_=a(939863),u=a(662275),p=a(349410),g=a(672517),E=a(300874),h=a(237870),v=a(158950),f=a(488578),y=a(401874);let S="upgrade_contact_sales_modal--closeButton--tSoDt";var T=a(783423),N=a(339290);let x=()=>[{name:(0,_.t)("universal_upgrade.1_10"),value:"1-10"},{name:(0,_.t)("universal_upgrade.11_50"),value:"11-50"},{name:(0,_.t)("universal_upgrade.51_250"),value:"51-250"},{name:(0,_.t)("universal_upgrade.251_1_k"),value:"251-1K"},{name:(0,_.t)("universal_upgrade.1_k_5_k"),value:"1K-5K"},{name:(0,_.t)("universal_upgrade.5_k_10_k"),value:"5K-10K"},{name:(0,_.t)("universal_upgrade.10_k_50_k"),value:"10K-50K"},{name:(0,_.t)("universal_upgrade.50_k_100_k"),value:"50K-100K"},{name:(0,_.t)("universal_upgrade.100_k"),value:"100K+"}],w=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,_.t)("universal_upgrade.company_size")),x().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),b=()=>[{name:(0,_.t)("contact_sales.topic.request_a_sales_demo_or_talk_to_sales"),value:"request_a_sales_demo_or_talk_to_sales"},{name:(0,_.t)("contact_sales.topic.billing_and_invoicing"),value:"billing_and_invoicing"},{name:(0,_.t)("contact_sales.topic.technical_and_product_support"),value:"technical_and_product_support"},{name:(0,_.t)("contact_sales.topic.educators_and_students"),value:"educators_and_students"}],C=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,_.t)("contact_sales.which_topic_best_fits_your_needs")),b().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),A=()=>[{name:(0,_.t)("contact_sales.product.design"),value:"design"},{name:(0,_.t)("contact_sales.product.figjam"),value:"figjam"},{name:(0,_.t)("contact_sales.product.dev_mode"),value:"dev_mode"},{name:(0,_.t)("contact_sales.product.all_products"),value:"all_products"}],I=()=>r.createElement(r.Fragment,null,r.createElement("option",{value:"",disabled:!0},(0,_.t)("contact_sales.which_product_are_you_most_interested_in")),A().map(e=>r.createElement("option",{value:e.value,"data-testid":`select-option-${e.value}`,key:e.value},e.name))),P=(0,h.Ju)(function({hideModal:e}){return r.createElement(g.fu,{name:"Upgrade Contact Sales Success Modal"},r.createElement(f.Nb,{hide:e,size:480},r.createElement("div",{className:"upgrade_contact_sales_modal--successModalWrapper--x82rW"},r.createElement("div",{className:"upgrade_contact_sales_modal--successModalTitle--YEf9E upgrade_contact_sales_modal--modalTitle--Qvyl- text--fontPos13--xW8hS text--_fontBase--QdLsd"},r.createElement(c.B,{className:"upgrade_contact_sales_modal--successIcon--sRlqE",svg:N.A}),(0,_.tx)("universal_upgrade.contact_sales.thank_you")),r.createElement(o.Jn,{className:S,onClick:e,innerText:"close"})),r.createElement("div",{className:"upgrade_contact_sales_modal--successModalText--71FmX text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,_.tx)("universal_upgrade.contact_sales.sales_will_reach_out"))))},"ContactSalesSuccessModal");function D(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.user),[h,N]=(0,r.useState)({email:a?.email??"",name:a?.handle??"",overridePlaceholderText:e.overridePlaceholderText,freeText:"",result:void 0,companyName:void 0,companySize:"",jobTitle:"",topic:"",product:"",phone:"",formErrors:{}}),x=(0,p.Mx)(),b=()=>{t(u.Lo())},A=()=>{t((0,u.to)({type:P,data:{hideModal:()=>t(u.Ce())}}))},D=()=>({email:h.email,name:h.name,company_name:h.companyName,topic:h.topic,product:h.product,phone:h.phone,message:h.freeText,source:e.source,form_name:"topic_v1"}),k=()=>({email:h.email,name:h.name,company_name:h.companyName,company_size:h.companySize,job_title:h.jobTitle,message:h.freeText,source:e.source,form_name:"topic_control"}),M=(0,n.s)(()=>{let t={},a=(0,_.t)("universal_upgrade.this_field_is_required");if(h.email?(0,l.xf)(h.email)||(t.email=(0,_.t)("universal_upgrade.please_provide_a_valid_email_address")):t.email=a,h.name||(t.name=a),h.companyName||(t.companyName=a),x?(h.topic||(t.topic=a),h.product||(t.product=a)):e.source===E.Bi.VARIABLES_MODES?h.jobTitle||(t.jobTitle=a):h.companySize||(t.companySize=a),N(e=>({...e,formErrors:t,result:void 0})),0===Object.keys(t).length){let e=x?D():k();i.Ay.post("/api/form_post/org-lead-gen",e).then(()=>{N(e=>({...e,result:"success"})),A()}).catch(()=>N(e=>({...e,result:"error"})))}}),O=e=>h.formErrors[e]?"upgrade_contact_sales_modal--error--cYtEz basic_form--labeledInputGroup--aeD6L":void 0,R=e=>{let t=h.formErrors[e];return t?r.createElement("div",{"data-testid":"form-error",className:"upgrade_contact_sales_modal--errorMessage--rMLJd text--fontPos11--2LvXf text--_fontBase--QdLsd"},t):null},B=(e,t,a=!1)=>r.createElement(r.Fragment,null,r.createElement(d.Lf,{htmlName:t,label:e,value:h[t]||"",onChange:e=>{let a={[t]:e.target.value};N(e=>({...e,...a}))},disabled:a,className:O(t)}),R(t)),L=(e,t,a)=>{let s=O(t)||y.Os;return r.createElement(r.Fragment,null,r.createElement("div",{className:s},r.createElement("div",{className:"upgrade_contact_sales_modal--select--9gFoe address_form--selectRowFull--8DtEB"},r.createElement(d.VE,{name:t,placeholder:e,defaultValue:"","data-testid":`${t}-select`,onChange:e=>{let a={[t]:e.target.value};N(e=>({...e,...a}))},required:!0},a),r.createElement(c.B,{className:y.nO,svg:T.A}))),R(t))};return r.createElement(g.fu,{name:"Upgrade Contact Sales Modal"},r.createElement(f.Nb,{className:"upgrade_contact_sales_modal--contactSalesModal--2MR1X",hide:b,size:480},r.createElement("div",{className:"upgrade_contact_sales_modal--titleWrapper--vDPOx"},r.createElement("h1",{className:"upgrade_contact_sales_modal--modalTitle--Qvyl- text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,_.tx)("universal_upgrade.contact_sales_title")),r.createElement(o.Jn,{className:S,onClick:b,innerText:"close"})),r.createElement("div",{className:"upgrade_contact_sales_modal--modalBody--XpCf4"},"error"===h.result&&r.createElement(r.Fragment,null,r.createElement(m.I,{message:(0,_.t)("universal_upgrade.there_was_an_error_processing_your_information_please_try_again")}),r.createElement(d.Kz,{multiple:.5})),x?r.createElement("fieldset",null,B((0,_.t)("universal_upgrade.email_address"),"email"),B((0,_.t)("universal_upgrade.full_name"),"name"),B((0,_.t)("universal_upgrade.company_name"),"companyName"),L((0,_.t)("contact_sales.which_topic_best_fits_your_needs"),"topic",C()),L((0,_.t)("contact_sales.which_product_are_you_most_interested_in"),"product",I()),B((0,_.t)("contact_sales.phone_number_optional"),"phone")):r.createElement("fieldset",null,B((0,_.t)("universal_upgrade.email_address"),"email"),B((0,_.t)("universal_upgrade.full_name"),"name"),B((0,_.t)("universal_upgrade.company_name"),"companyName"),e.source===E.Bi.VARIABLES_MODES?B((0,_.t)("universal_upgrade.job_title"),"jobTitle"):L((0,_.t)("universal_upgrade.company_size"),"companySize",w())),r.createElement(d.Kz,{multiple:1}),r.createElement("p",null,(0,_.tx)("universal_upgrade.how_can_we_help_optional")),r.createElement(d.Kz,{multiple:1}),r.createElement(v.v,{className:"upgrade_contact_sales_modal--freeTextInput--O6-W0 text--fontPos13--xW8hS text--_fontBase--QdLsd",value:h.freeText,onChange:e=>N(t=>({...t,freeText:e.target.value})),placeholder:h.overridePlaceholderText??(0,_.t)("universal_upgrade.e_g_i_m_looking_to_set_up_a_demo_of_figma"),maxLength:500})),r.createElement("div",{className:"upgrade_contact_sales_modal--modalFooter--HBxAu"},r.createElement(d.tM,{onClick:b},(0,_.tx)("general.cancel")),r.createElement(d.vd,{onClick:M},(0,_.tx)("universal_upgrade.submit")))))}},865360:(e,t,a)=>{a.r(t),a.d(t,{OrgSelfServeBillingRemodelPage:()=>ef,OrgSelfServeBillingRemodelPageInner:()=>eg,mapStateToProps:()=>eE});var r=a(411855),s=a(188507),n=a(634832),l=a(675678),i=a(629019),o=a.n(i),m=a(776250),d=a(133537),c=a(737947),_=a(966712),u=a(776621),p=a(27087),g=a(192437),E=a(946689),h=a(455057),v=a(493323),f=a(355819),y=a(163023),S=a(881388),T=a(939863),N=a(898211),x=a(707570),w=a(729129),b=a(709217),C=a(303345),A=a(320108),I=a(738269),P=a(662275),D=a(995852),k=a(931828),M=a(349410),O=a(672517),R=a(710667),B=a(988022),L=a(66957),F=a(50661),V=a(582410),U=a(720647),j=a(978779),z=a(195971),G=a(488983),$=a(99506),K=a(820113),Y=a(227544),X=a(724838),W=a(596607),H=a(416618),q=a(452353),Q=a(802026),J=a(622139),Z=a(668860),ee=a(637590),et=a(143678),ea=a(679892),er=a(831429),es=a(198809),en=a(901536),el=a(67294);function ei({teams:e,selectedTeamIds:t,onToggle:a}){return r.createElement("div",null,r.createElement("h1",null,b.L$),r.createElement("p",null,b.zP),r.createElement("div",{className:en.cx.grid.gridTemplateColumns2.gap16.$},e.map(e=>r.createElement("div",{role:"checkbox",key:e.id,onClick:()=>a(e.id),tabIndex:0,"data-testid":`select_team--${e.id}`,"aria-checked":t.has(e.id),"aria-labelledby":`select-team-${e.id}`,"aria-disabled":!1,className:en.cx.flex.itemsCenter.bRadius8.gap12.py12.px16.if(t.has(e.id),en.cx.b1.colorBorderOnselected.colorBgSelectedTertiary,en.cx.colorBg).$},r.createElement(el.nl,{team:e}),r.createElement("div",null,r.createElement("label",{id:`select-team-${e.id}`,className:en.cx.font14.colorText.ellipsis.$},e.name),r.createElement("p",{className:en.cx.font11.colorTextSecondary.ellipsis.$},(0,b.W5)(e.numMembers)))))))}var eo=a(648841),em=a(237280),ed=a(27905),ec=a(720818),e_=a(516319),eu=a(733982),ep=a(54375);class eg extends r.Component{constructor(e){super(e),this.effectiveStep=()=>this.props.step===Q.X1.Initial||this.props.step===Q.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===ee.SC.CREATE_AND_UPGRADE?Q.X1.CreateTeam:Object.keys(this.state.eligibleTeamsByTeamId).length>0||this.props.newTeamProps?Q.X1.TeamSelect:Q.X1.Details:this.props.step,this.setStep=e=>{this.props.dispatch(I.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case Q.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(Q.X1.TeamSelect);break;case Q.X1.AddCollaborators:this.setStep(Q.X1.Details);break;case Q.X1.PseudoCreateTeam:this.setStep(Q.X1.TeamSelect);break;case Q.X1.TeamSelect:let t=(0,C.hT)({eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,selectedTeamIds:this.state.selectedTeamIds,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:this.state.selectedUserSeatTypes});this.setState({selectedUserSeatTypes:t}),this.setStep(Q.X1.SeatSelect);break;case Q.X1.SeatSelect:this.setStep(Q.X1.Details);break;case Q.X1.Details:this.setStep(Q.X1.Payment);break;case Q.X1.Payment:this.onSubmitPaymentAndAddress();break;case Q.X1.Review:this.onSubmitPurchaseOrder();break;case Q.X1.Confirmation:break;default:(0,n.assertNever)(e)}},this.ctaProperties=()=>({numDisplayedTeams:Object.keys(this.state.eligibleTeamsByTeamId).length+(this.state.newTeamName?1:0),numMigratedTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),domain:(0,d.zN)(this.props.user.email),currency:this.state.currency,upsellSource:this.props.upsellSource}),this.renderNextButton=()=>{let e;let t=!1,a=this.effectiveStep();switch(a){case Q.X1.CreateTeam:case Q.X1.PseudoCreateTeam:e=(0,T.t)("org_self_serve.create_team_step.next_select_team"),t=!this.state.newTeamName;return;case Q.X1.AddCollaborators:e=(0,T.t)("org_self_serve.create_team_step.next_select_team");return;case Q.X1.TeamSelect:e=(0,T.t)("org_self_serve.details_step.next_organization_details");break;case Q.X1.SeatSelect:e=b.Mu;break;case Q.X1.Details:e=(0,T.t)("org_self_serve.payment_step.next_payment");let s=this.state.orgDetails.legalOrgName?.length,l=this.state.orgDetails.actorName?.length;t=this.props.canSeeBillingAddressExp?t||!s||s<1:t||!s||!l||s<1||l<1;break;case Q.X1.Payment:t=t||this.state.apiPending,e=(0,T.t)("org_self_serve.review_step.next_review");break;case Q.X1.Review:case Q.X1.Confirmation:return null;default:(0,n.assertNever)(a)}return r.createElement("div",{className:e_.rh},r.createElement(E.vd,{className:e_.sk,disabled:t,onClick:()=>this.onSubmit(),trackingProperties:this.ctaProperties(),dataTestId:"next-step-button"},e))},this.onTeamToggle=e=>{this.state.selectedTeamIds.has(e)?this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds})):this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e)}))},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,P.to)({type:N.lk,data:{source:N.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{(0,_.kc)().ps_benchmark?(this.props.newTeamProps&&(0,z.Al)(this.props.user.id),c.Ay.redirect("/files/recent")):(this.props.dispatch(I.$T({view:"recentFiles"})),this.props.newTeamProps&&(0,z.Al)(this.props.user.id))},this.addEditors=()=>{},this.updateAdditionalEmptySeats=e=>{this.setState({additionalSeatCounts:e})},this.selectEditors=()=>{},this.renderBillingItems=()=>r.createElement("div",null),this.renderPurchaseSummary=()=>{let e=(0,K._Z)(),t=999<Y.u3,a=!t&&(0,_.kc)().org_checkout_min_seat_info_copy,s=this.getSubtotal(),n=(0,X.Hw)(this.props.user)?(0,_.kc)().org_checkout_min_seat_info_copy?r.createElement(r.Fragment,null,(0,T.tx)("org_self_serve.purchase_summary.added_empty_seats",{minCount:Y.u3}),"\xa0",(0,T.tx)("org_self_serve.purchase_summary.empty_seats_included",{numOfSeats:999,numOfEmptySeats:999,seatsText:(0,T.tx)("checkout.seats_text",{numOfSeats:999})})):(0,T.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_seats_added_empty_seats.seat_rename",{minCount:Y.u3}):(0,T.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:Y.u3}),l=r.createElement(r.Fragment,null,(0,T.tx)("org_self_serve.purchase_summary.added_empty_design_seats",{minCount:Y._h}),"\xa0",(0,T.tx)("org_self_serve.purchase_summary.empty_design_seats_included",{numOfEmptySeats:Y._h})),i=new K.vr(this.state.currency);return r.createElement("div",{className:e_.er},r.createElement("div",null,t&&r.createElement("div",{className:`${e_.uC} ${e_.i9}`},r.createElement(y.B,{className:e_.$y,svg:ep.A}),n),a&&r.createElement("div",{className:`${e_.uC} ${e_.i9}`},r.createElement(y.B,{className:e_.$y,svg:ep.A}),l),r.createElement(f.P,{className:e_.TB,scrollingDisabled:!1},r.createElement("div",null,r.createElement("div",{className:e_.Ov},(0,T.tx)("org_self_serve.purchase_summary.organization_plan")),r.createElement("div",{className:e_.Sv},(0,T.tx)("org_self_serve.purchase_summary.domain",{domain:(0,d.zN)(this.props.user.email)})),r.createElement(E.Kz,{direction:"y",value:16})),r.createElement(E.Kz,{direction:"y",value:8}),r.createElement(ed.O,{selectedEditors:{},additionalDesignSeats:999,additionalWhiteboardSeats:999,additionalDevModeSeats:999,onClick:this.selectEditors}),r.createElement(E.Kz,{direction:"y",value:20})),r.createElement("div",null,r.createElement("div",{className:e_.aK}),e&&r.createElement(r.Fragment,null,r.createElement(E.Kz,{direction:"y",value:16}),r.createElement("div",{className:e_.Yn},r.createElement("div",{className:e_.V},(0,T.tx)("org_self_serve.purchase_summary.currency_text")),r.createElement(w.D,{currency:this.state.currency,dropdownShown:this.props.dropdownShown,supportedCurrencies:(0,K.B9)(),changeCurrency:e=>{this.props.dispatch(D.MN({currency:e})),this.setState({currency:e})},shortFormDisplay:!0,paddingOverride:0})),r.createElement(E.Kz,{direction:"y",value:20}),r.createElement("div",{className:e_.aK})),this.state.paymentError&&this.effectiveStep()===Q.X1.Payment&&r.createElement(r.Fragment,null,r.createElement(h._,{color:h.S.INFORMATION,text:this.state.paymentError})),r.createElement(E.Kz,{direction:"y",value:16}),this.renderBillingItems(),r.createElement("div",{className:e_.aK}),r.createElement(E.Kz,{direction:"y",value:24}),r.createElement(L.m,{formattedSubtotal:i.formatMoney(s,{showCents:!1})}),r.createElement(E.Kz,{direction:"y",value:24}),this.renderNextButton(),r.createElement(E.Kz,{direction:"y",value:24}))),r.createElement("div",null,r.createElement("div",{className:e_.ZM}),r.createElement(E.Kz,{direction:"y",value:16}),r.createElement("div",{className:e_.i9},r.createElement(y.B,{svg:eu.A,className:e_.$y}),r.createElement("span",null,(0,T.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:r.createElement("span",{className:e_.uD,onClick:this.contactSales},(0,T.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),r.createElement(E.Kz,{direction:"y",value:16})))},this.state={loading:!0,eligibleUpgrades:[],eligibleTeamsByTeamId:{},selectedTeamIds:new Set,eligibleUsersByUserId:{},selectedUserSeatTypes:{},additionalSeatCounts:{collaborator:0,developer:0,expert:0},selectedEditors:{},initialEditors:{},payment:{card:null,last4:null,address:(0,J.EB)((0,K.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,emptySeatsByLicenseType:V.H5.dict(e=>0),currency:this.props.currency,shippingAddress:(0,J.EB)((0,K.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgrades()}fetchTeamEligibleUpgrades(){return ea.Eh.getEligibleUpgrades().catch(e=>{let t=e.data.message;return this.props.dispatch(I.$T({view:"recentFiles"})),this.props.dispatch(S.s.error(t||(0,T.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{let{eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:r,selectedUserSeatTypes:s}=(0,C.s2)(e.meta.eligible_teams,e.meta.eligible_team_users);this.setState({loading:!1,eligibleTeamsByTeamId:t,selectedTeamIds:a,eligibleUsersByUserId:r,selectedUserSeatTypes:s})})}componentDidUpdate(e,t){(0,d.zN)(e.user.email)!==(0,d.zN)(this.props.user.email)&&c.Ay.redirect("/purchase-organization")}getSubtotal(){return 0}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){this.setState({paymentError:(0,T.t)("org_self_serve.payment_step.sorry_please_wait")});return}if(this.setState({apiPending:!0}),a&&!await (0,er.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,T.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,er.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let s=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,q.Ey)(t,s).then(t=>{if(!t.error&&t.token)return(0,q.To)(t.token.id,this.getSubtotal(),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,J.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>(this.setState({apiPending:!1,paymentError:e.data?.message||e.message}),Promise.reject())).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(Q.X1.Review))});{let e=t.error?.message||(0,T.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.setState({apiPending:!1,paymentError:e})}})}onSubmitPurchaseOrder(){this.props.dispatch(k.b({completed_org_cart_flow:!0}));let e={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:(0,C.O$)(this.state.selectedUserSeatTypes,this.state.additionalSeatCounts),selected_user_seat_types:(0,C.VB)(this.state.selectedUserSeatTypes),stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null};this.state.newTeamName&&(e.new_team_options={team_name:this.state.newTeamName,add_to_org:!0}),this.setState({apiPending:!0}),p.Ay.post("/api/orgs",e).catch(e=>(this.props.dispatch(S.s.error((0,T.Jv)(e,e.data?.message||(0,T.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,u.$D)(l.FigmaTeam.BILLING,Error(`[Billing] Org checkout API failed: ${e.data?.message}`),{extra:{eligibleTeamsByTeamId:this.state.eligibleTeamsByTeamId,eligibleUsersByUserId:this.state.eligibleUsersByUserId,selectedUserSeatTypes:JSON.stringify(this.state.selectedUserSeatTypes),selectedTeamIds:JSON.stringify([...this.state.selectedTeamIds]),userId:this.props.user.id}}),this.setState({apiPending:!1}),Promise.reject())).then(t=>{this.setState({apiPending:!1},()=>this.setStep(Q.X1.Confirmation)),this.state.inviteEmails.length&&t.data.meta.new_team&&this.props.dispatch((0,H.rq)({emails:this.state.inviteEmails,resourceType:$.vt.TEAM,resourceIdOrKey:t.data.meta.new_team.id,level:Z.e6.EDITOR})),this.state.newTeamName&&t.data.meta.new_team&&(0,z.Al)(this.props.user.id),(0,m.sx)("Self Serve Org Purchased (GTM)"),(0,B.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:e.org_name,upsellSource:this.props.upsellSource})})}render(){let e;let t=this.effectiveStep();if("loading"===this.props.billingPricesResult.status||this.state.loading&&!this.props.newTeamProps)return r.createElement(v.kt,{testId:"loadingSpinner"});if("errors"===this.props.billingPricesResult.status)return(0,j.Ix)(this.props.billingPricesResult),r.createElement(F.t,null);let a={[U.vu]:999,[U.tL]:999,[U.PE]:999},s=new Date().getMonth(),n=new Date().setMonth(s+3),l=new Date().setMonth(s+12),i=this.getSubtotal(),m=i*this.state.taxRate/100,c=i+m,_=Object.keys(this.state.eligibleTeamsByTeamId).length>0,u=new Map;this.state.eligibleUpgrades.forEach(e=>u.set(e.team,e.designEditors.length+e.figjamEditors.length));let p=Object.values(this.state.eligibleTeamsByTeamId).map(e=>({id:e.id,name:e.name,img_url:e.img_url,numMembers:e.eligibleUsers.size})),g=e=>{this.props.dispatch(I.$T({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||ee.SC.CREATE_AND_UPGRADE}))};return e=t===Q.X1.Review?r.createElement(r.Fragment,null,r.createElement(ec.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:_,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:g}),r.createElement(eo.Vw,{onSubmit:this.onSubmit,orgPayment:this.state.payment,renewalDate:l,subTotalCents:i,taxDueCents:m,taxRate:this.state.taxRate,totalCents:c,totalSeats:a,showAdditionalEditorsModal:this.addEditors,trueUpDate:n,totalTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),legalOrgName:this.state.orgDetails.legalOrgName,orgName:this.state.orgDetails.orgName,user:this.props.user,loading:this.state.apiPending,renderBillingItems:this.renderBillingItems,ctaProperties:this.ctaProperties(),currency:this.state.currency,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,navigateToEditPaymentDetails:()=>this.setStep(Q.X1.Payment),navigateToEditOrganizationDetails:()=>this.setStep(Q.X1.Details)})):t===Q.X1.Confirmation?r.createElement(eo._u,{totalCents:c,trueUpDate:n,orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):r.createElement(r.Fragment,null,this.props.isOrgAdmin&&r.createElement(em.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,d.qe)(this.props.user.email)&&r.createElement(em.VE,{onFileBrowserClick:this.onFileBrowserClick}),r.createElement(ec.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:_,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:g}),r.createElement("div",{className:e_._h},t===Q.X1.CreateTeam&&r.createElement("div",{className:e_.Bb},r.createElement(x.y,{type:x.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===Q.X1.TeamSelect&&(this.state.loading?r.createElement(v.kt,null):r.createElement(ei,{teams:p,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle})),t===Q.X1.SeatSelect&&(this.state.loading?r.createElement(v.kt,null):r.createElement(A.Xc,{users:this.state.eligibleUsersByUserId,selectedTeamIds:Array.from(this.state.selectedTeamIds),selectedUserSeatTypes:this.state.selectedUserSeatTypes,currency:this.state.currency,onChangeSeat:(e,t)=>{this.setState({selectedUserSeatTypes:{...this.state.selectedUserSeatTypes,[e]:t}})},onChangeAdditionalSeats:this.updateAdditionalEmptySeats})),t===Q.X1.Details&&(this.state.loading?r.createElement(v.kt,null):r.createElement(eo.vj,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp})),t===Q.X1.Payment&&r.createElement(f.P,{className:o()(e_.M7,e_.Et),hideScrollbar:!0},r.createElement("div",{className:e_.W},(0,T.tx)("org_self_serve.payment_step.enter_your_payment_details")),r.createElement("form",{className:e_.fI},r.createElement(es.n,{id:"team-upgrade-page-form",cardId:"team-upgrade-page-card",billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,onCardReady:this.onCardReady,onBillingAddressChange:this.onAddressChange,onShippingAddressChange:this.onShippingAddressChange,nameOnPaymentMethod:this.state.nameOnPaymentMethod,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,onClearToken:this.onClearToken,onVatIdChange:this.onVatIdChange,vatId:this.state.vatId,onRegionalVatIdChange:this.onRegionalVatIdChange,regionalVatId:this.state.regionalVatId,isCommunityCheckout:!1,isCheckoutFlow:!0,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp}))),t!==Q.X1.CreateTeam&&this.renderPurchaseSummary())),r.createElement(O.fu,{name:et.e0.ORG_CART,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource}},r.createElement("div",{className:e_.F0},e))}}function eE(e){return{user:e.user,isOrgAdmin:(0,W.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===$._D.ADMIN),currency:e.payment.currency||(0,K.LN)()}}eg.displayName="OrgSelfServePage";let eh=(0,s.Ng)(eE)(eg);function ev(e){let t=(0,M.Mh)(),a=(0,R.N1)(R.Fq.ORG_SELF_SERVE);return r.createElement(eh,{...e,canSeeBillingAddressExp:t,billingPricesResult:a})}function ef(e){return(0,_.kc)().cart_error_boundaries?r.createElement(ey,{...e}):r.createElement(ev,{...e})}function ey(e){return r.createElement(g.tH,{sentryTags:{area:l.FigmaTeam.MONETIZATION_UPGRADES},boundaryKey:"OrgSelfServeBillingRemodelPage",fallback:g.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:G.y4},r.createElement(ev,{...e}))}},689760:(e,t,a)=>{a.r(t),a.d(t,{OrgSelfServeFigJamPage:()=>eE,OrgSelfServeFigJamPageInner:()=>e_,mapStateToProps:()=>eu});var r=a(411855),s=a(188507),n=a(634832),l=a(675678),i=a(629019),o=a.n(i),m=a(776250),d=a(133537),c=a(737947),_=a(966712),u=a(776621),p=a(27087),g=a(192437),E=a(946689),h=a(455057),v=a(493323),f=a(355819),y=a(163023),S=a(881388),T=a(939863),N=a(898211),x=a(707570),w=a(729129),b=a(738269),C=a(662275),A=a(995852),I=a(931828),P=a(349410),D=a(672517),k=a(710667),M=a(988022),O=a(13513),R=a(66957),B=a(50661),L=a(582410),F=a(720647),V=a(978779),U=a(195971),j=a(488983),z=a(99506),G=a(820113),$=a(227544),K=a(724838),Y=a(596607),X=a(416618),W=a(452353),H=a(802026),q=a(622139),Q=a(668860),J=a(637590),Z=a(143678),ee=a(679892),et=a(831429),ea=a(198809);function er(e,t){let a={};for(let r of e.filter(e=>t.has(e.team.id))){let e=[{users:r.designEditors,propKey:"designEditor"},{users:r.figjamEditors,propKey:"figjamEditor"},{users:[],propKey:"devMode"}],t={};e.forEach(({users:e,propKey:s})=>{for(let n of e){if((0,d.nD)(n.email))return;a[n.id]||(a[n.id]={user:n,teamIds:[],designEditor:!1,figjamEditor:!1,devMode:!1,teams:[]}),n.id in t||(t[n.id]=new Set),a[n.id][s]=!0,t[n.id].has(r.team.id)||(a[n.id].teamIds.push(r.team.id),a[n.id].teams.push(r.team),t[n.id].add(r.team.id))}})}return a}function es(e,t){let a=L.H5.dict(a=>(t[a]??0)+(e[a]??0)),r=Object.values(a).reduce((e,t)=>e+t,0);return a[F.vu]+=Math.max($.u3-r,0),a}var en=a(648841),el=a(237280),ei=a(27905),eo=a(720818),em=a(516319),ed=a(733982),ec=a(54375);class e_ extends r.Component{constructor(e){super(e),this.effectiveStep=()=>this.props.step===H.X1.Initial||this.props.step===H.X1.ChoosePlan?this.props.newTeamProps?.teamFlowType===J.SC.CREATE_AND_UPGRADE?H.X1.CreateTeam:this.state.eligibleUpgrades.length>0||this.props.newTeamProps?H.X1.TeamSelect:H.X1.Details:this.props.step,this.setStep=e=>{this.props.dispatch(b.$T({view:"orgSelfServe",step:e,orgMigrated:!1,newTeamProps:this.props.newTeamProps,upsellSource:this.props.upsellSource})),this.setState(e=>({payment:{...e.payment,card:null}}))},this.onSubmit=()=>{let e=this.effectiveStep();switch(e){case H.X1.CreateTeam:this.state.newTeamName?.trim()&&this.setStep(H.X1.TeamSelect);break;case H.X1.AddCollaborators:this.setStep(H.X1.Details);break;case H.X1.PseudoCreateTeam:this.setStep(H.X1.TeamSelect);break;case H.X1.TeamSelect:this.setStep(H.X1.Details);break;case H.X1.Details:this.setStep(H.X1.Payment);break;case H.X1.Payment:this.onSubmitPaymentAndAddress();break;case H.X1.Review:this.onSubmitPurchaseOrder();break;case H.X1.SeatSelect:case H.X1.Confirmation:break;default:(0,n.assertNever)(e)}},this.ctaProperties=()=>{let e=this.getUpgradesByLicenseType(),t=es(e,this.state.emptySeatsByLicenseType);return{numEditors:e[F.vu],numFigJamEditors:e[F.tL],numDisplayedTeams:this.state.eligibleUpgrades.length+(this.state.newTeamName?1:0),numMigratedTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),numTotalDesignSeats:t[F.G_.DESIGN],totalFigJamSeats:t[F.G_.FIGJAM],totalDevModeSeats:t[F.G_.DEV_MODE],proposedSubtotal:L.H5.reduce((e,a)=>e+=(t[a]??0)*($.UB[a]??0),0)/100,domain:(0,d.zN)(this.props.user.email),currency:this.state.currency,upsellSource:this.props.upsellSource}},this.renderNextButton=()=>{let e;let t=!1,a=this.effectiveStep();switch(a){case H.X1.CreateTeam:case H.X1.PseudoCreateTeam:e=(0,T.t)("org_self_serve.create_team_step.next_select_team"),t=!this.state.newTeamName;return;case H.X1.AddCollaborators:e=(0,T.t)("org_self_serve.create_team_step.next_select_team");return;case H.X1.TeamSelect:e=(0,T.t)("org_self_serve.details_step.next_organization_details");break;case H.X1.Details:e=(0,T.t)("org_self_serve.payment_step.next_payment");let s=this.state.orgDetails.legalOrgName?.length,l=this.state.orgDetails.actorName?.length;t=this.props.canSeeBillingAddressExp?t||!s||s<1:t||!s||!l||s<1||l<1;break;case H.X1.Payment:t=t||this.state.apiPending,e=(0,T.t)("org_self_serve.review_step.next_review");break;case H.X1.Review:case H.X1.Confirmation:case H.X1.SeatSelect:return null;default:(0,n.assertNever)(a)}return r.createElement("div",{className:em.rh},r.createElement(E.vd,{className:em.sk,disabled:t,onClick:()=>this.onSubmit(),trackingProperties:this.ctaProperties(),dataTestId:"next-step-button"},e))},this.onTeamToggle=e=>{this.state.selectedTeamIds.has(e)?this.setState(t=>(t.selectedTeamIds.delete(e),{selectedTeamIds:t.selectedTeamIds,selectedEditors:er(this.state.eligibleUpgrades,t.selectedTeamIds)}),()=>this.computeAdditionalDesignSeats()):this.setState(t=>({selectedTeamIds:t.selectedTeamIds.add(e),selectedEditors:er(this.state.eligibleUpgrades,t.selectedTeamIds.add(e))}),()=>this.computeAdditionalDesignSeats())},this.onCardReady=e=>{let t={...this.state.payment,card:e};this.setState({payment:t})},this.onAddressChange=e=>{let t={...this.state.payment,address:e};this.setState({payment:t})},this.onShippingAddressChange=e=>{this.setState({shippingAddress:e})},this.onNameOnPaymentMethodChange=e=>{this.setState({nameOnPaymentMethod:e.trim()})},this.onClearToken=()=>{let e={...this.state.payment,token:null};this.setState({payment:e})},this.onVatIdChange=e=>{this.setState({vatId:e})},this.onRegionalVatIdChange=e=>{this.setState({regionalVatId:e})},this.onVatValidationFail=e=>{this.setState({apiPending:!1,paymentError:e})},this.onChangeNewTeamName=e=>{this.setState({newTeamName:e.trim()})},this.onChangeOrgDetails=e=>{let t=e.target.name,a=e.target.value;if(!t){e.preventDefault(),console.error("HTMLInputElement is missing name attribute:",e.target);return}let r=this.state.orgDetails;switch(t){case"actor_name":r.actorName=a.trim();break;case"legal_org_name":r.legalOrgName=a.trim();break;case"org_name":r.orgName=a.trim()}this.setState({orgDetails:r})},this.contactSales=()=>{this.props.dispatch((0,C.to)({type:N.lk,data:{source:N.B7.ORG_SELF_SERVE_UPGRADE_MODAL}}))},this.onFileBrowserClick=()=>{(0,_.kc)().ps_benchmark?(this.props.newTeamProps&&(0,U.Al)(this.props.user.id),c.Ay.redirect("/files/recent")):(this.props.dispatch(b.$T({view:"recentFiles"})),this.props.newTeamProps&&(0,U.Al)(this.props.user.id))},this.updateAdditionalSeats=e=>{let t=this.getUpgradesByLicenseType();this.setState({emptySeatsByLicenseType:L.H5.dict(a=>(e[a]??0)-(t[a]??0))})},this.addEditors=()=>{let e=new G.vr(this.state.currency),t=O.Oq.dict(t=>(0,V._)(this.props.billingPricesResult.data,e.currency,t)),a=this.getUpgradesByLicenseType(),r=es(a,this.state.emptySeatsByLicenseType);this.props.dispatch((0,C.to)({type:el.Bx,data:{seatDataByLicenseType:{[F.vu]:{minSeats:Math.max(a[F.vu],$._h),currentSeats:r[F.vu],seatUnitCostInCents:t.design},[F.tL]:{minSeats:a[F.tL],currentSeats:r[F.tL],seatUnitCostInCents:t.figjam},[F.PE]:{minSeats:a[F.PE]??0,currentSeats:r[F.PE]??0,seatUnitCostInCents:t.dev_mode}},minTotalSeats:$.u3,updateAdditionalSeats:this.updateAdditionalSeats,showAnnualPrice:!0,dispatch:this.props.dispatch,currency:this.state.currency}}))},this.updateAdditionalEmptySeats=e=>{this.setState({emptySeatsByLicenseType:L.H5.dict(t=>e[t])})},this.selectEditors=()=>{let e=this.state.selectedEditors;for(let t in e)e[t]={...e[t]};let t=new G.vr(this.state.currency),a=O.Oq.dict(e=>(0,V._)(this.props.billingPricesResult.data,t.currency,e));this.props.dispatch((0,C.to)({type:el.ml,data:{users:e,updateSelectedEditors:this.updateSelectedEditors,updateAdditionalEmptySeats:this.updateAdditionalEmptySeats,dispatch:this.props.dispatch,currency:this.state.currency,minTotalSeats:$.u3,seatInfo:{design:{minCount:$._h,additionalSeatCount:this.state.emptySeatsByLicenseType[F.vu]},figjam:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[F.tL]},dev_mode:{minCount:0,additionalSeatCount:this.state.emptySeatsByLicenseType[F.PE]??0}},monthlyPriceByLicenseType:a}}))},this.updateSelectedEditors=e=>{this.setState(t=>({...t,selectedEditors:e}))},this.renderBillingItems=()=>{let e=new G.vr(this.state.currency),t=O.Oq.dict(t=>(0,V._)(this.props.billingPricesResult.data,e.currency,t)),a=es(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),s={[F.vu]:{totalSeats:a[F.vu],price:t.design,headerString:(0,T.tx)("org_self_serve.billing_items.total_figma_design_editor_with_dev_mode_included.seat_rename",{totalDesignSeatsCount:a[F.vu]})},[F.tL]:{totalSeats:a[F.tL],price:t.figjam,headerString:(0,T.tx)("org_self_serve.headers.total_fig_jam_editor_seats_count.seat_rename",{totalFigJamEditorSeatsCount:a[F.tL]})},[F.PE]:{totalSeats:a[F.PE]??0,price:t.dev_mode,headerString:(0,T.tx)("org_self_serve.billing_items.total_seat_count.dev_mode",{totalSeatCount:a[F.PE]??0})}};return r.createElement("div",null,L.H5.sort(L.AG).map(t=>{let a=s[t];return null==a?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement("div",{className:em.Yn},r.createElement("div",{className:em.TK},a.headerString),r.createElement("div",{className:em.TK},e.formatMoney(a.price*a.totalSeats*12,{showCents:!1}))),r.createElement("div",{className:em.Sv},(0,T.tx)("org_self_serve.billing_items.total_seat_cost_for_product",{annualMemberCost:e.formatMoney(a.price,{showCents:!1}),seatCount:a.totalSeats})),r.createElement(E.Kz,{direction:"y",value:16}))}))},this.renderPurchaseSummary=()=>{let e=this.getUpgradesByLicenseType(),t=e[F.vu],a=e[F.tL],s=e[F.PE]??0,n=(0,G._Z)(),l=t+a+s,i=l<$.u3,o=!i&&t<$._h&&(0,_.kc)().org_checkout_min_seat_info_copy,m=this.getSubtotal(this.state.currency),c=(0,K.Hw)(this.props.user)?(0,_.kc)().org_checkout_min_seat_info_copy?r.createElement(r.Fragment,null,(0,T.tx)("org_self_serve.purchase_summary.added_empty_seats",{minCount:$.u3}),"\xa0",(0,T.tx)("org_self_serve.purchase_summary.empty_seats_included",{numOfSeats:l,numOfEmptySeats:$.u3-l,seatsText:(0,T.tx)("checkout.seats_text",{numOfSeats:l})})):(0,T.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_seats_added_empty_seats.seat_rename",{minCount:$.u3}):(0,T.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:$.u3}),u=r.createElement(r.Fragment,null,(0,T.tx)("org_self_serve.purchase_summary.added_empty_design_seats",{minCount:$._h}),"\xa0",(0,T.tx)("org_self_serve.purchase_summary.empty_design_seats_included",{numOfEmptySeats:$._h-t})),p=new G.vr(this.state.currency);return r.createElement("div",{className:em.er},r.createElement("div",null,i&&r.createElement("div",{className:`${em.uC} ${em.i9}`},r.createElement(y.B,{className:em.$y,svg:ec.A}),c),o&&r.createElement("div",{className:`${em.uC} ${em.i9}`},r.createElement(y.B,{className:em.$y,svg:ec.A}),u),r.createElement(f.P,{className:em.TB,scrollingDisabled:!1},r.createElement("div",null,r.createElement("div",{className:em.Ov},(0,T.tx)("org_self_serve.purchase_summary.organization_plan")),r.createElement("div",{className:em.Sv},(0,T.tx)("org_self_serve.purchase_summary.domain",{domain:(0,d.zN)(this.props.user.email)})),r.createElement(E.Kz,{direction:"y",value:16})),r.createElement(E.Kz,{direction:"y",value:8}),r.createElement(ei.O,{selectedEditors:this.state.selectedEditors,additionalDesignSeats:this.state.emptySeatsByLicenseType[F.vu],additionalWhiteboardSeats:this.state.emptySeatsByLicenseType[F.tL],additionalDevModeSeats:this.state.emptySeatsByLicenseType[F.PE]??0,onClick:this.selectEditors}),r.createElement(E.Kz,{direction:"y",value:20})),r.createElement("div",null,r.createElement("div",{className:em.aK}),n&&r.createElement(r.Fragment,null,r.createElement(E.Kz,{direction:"y",value:16}),r.createElement("div",{className:em.Yn},r.createElement("div",{className:em.V},(0,T.tx)("org_self_serve.purchase_summary.currency_text")),r.createElement(w.D,{currency:this.state.currency,dropdownShown:this.props.dropdownShown,supportedCurrencies:(0,G.B9)(),changeCurrency:e=>{this.props.dispatch(A.MN({currency:e})),this.setState({currency:e})},shortFormDisplay:!0,paddingOverride:0})),r.createElement(E.Kz,{direction:"y",value:20}),r.createElement("div",{className:em.aK})),this.state.paymentError&&this.effectiveStep()===H.X1.Payment&&r.createElement(r.Fragment,null,r.createElement(h._,{color:h.S.INFORMATION,text:this.state.paymentError})),r.createElement(E.Kz,{direction:"y",value:16}),this.renderBillingItems(),r.createElement("div",{className:em.aK}),r.createElement(E.Kz,{direction:"y",value:24}),r.createElement(R.m,{formattedSubtotal:p.formatMoney(m,{showCents:!1})}),r.createElement(E.Kz,{direction:"y",value:24}),this.renderNextButton(),r.createElement(E.Kz,{direction:"y",value:24}))),r.createElement("div",null,r.createElement("div",{className:em.ZM}),r.createElement(E.Kz,{direction:"y",value:16}),r.createElement("div",{className:em.i9},r.createElement(y.B,{svg:ed.A,className:em.$y}),r.createElement("span",null,(0,T.tx)("org_self_serve.purchase_summary.have_questions",{contactSales:r.createElement("span",{className:em.uD,onClick:this.contactSales},(0,T.tx)("org_self_serve.purchase_summary.contact_our_sales_team"))}))),r.createElement(E.Kz,{direction:"y",value:16})))},this.state={loading:!0,eligibleUpgrades:[],selectedEditors:{},initialEditors:{},selectedTeamIds:new Set,payment:{card:null,last4:null,address:(0,q.EB)((0,G.aE)())},apiPending:!1,stripeCustomerId:null,taxRate:0,orgDetails:{actorName:"",actorEmail:this.props.user.email,legalOrgName:"",orgName:""},paymentError:null,emptySeatsByLicenseType:L.H5.dict(e=>0),currency:this.props.currency,shippingAddress:(0,q.EB)((0,G.aE)()),nameOnPaymentMethod:"",vatId:null,regionalVatId:null,newTeamName:this.props.newTeamProps?.newTeamName||null,inviteEmails:this.props.newTeamProps?.inviteEmails||[]}}componentDidMount(){this.fetchTeamEligibleUpgradesFigjam()}fetchTeamEligibleUpgradesFigjam(){return ee.Eh.getEligibleUpgradesFigjam().catch(e=>{let t=e.data.message;return this.props.dispatch(b.$T({view:"recentFiles"})),this.props.dispatch(S.s.error(t||(0,T.t)("org_self_serve.confirmation_step.sorry_there_was_an_error_processing_your_request_refresh_and_try_again"))),this.setState({loading:!1}),Promise.reject()}).then(({data:e})=>{let t=e.meta.eligible_upgrades,a=new Set(t.map(e=>e.team.id)),r=er(t,a);this.setState({loading:!1,eligibleUpgrades:t,selectedTeamIds:a,selectedEditors:r,initialEditors:r},()=>this.computeAdditionalDesignSeats())})}componentDidUpdate(e,t){(0,d.zN)(e.user.email)!==(0,d.zN)(this.props.user.email)&&c.Ay.redirect("/purchase-organization")}computeAdditionalDesignSeats(){this.setState(e=>({emptySeatsByLicenseType:function(e,t,a){let r=es(e,t);return{...t,[F.vu]:Math.max(t[F.vu],$._h-e[F.vu],$.u3-a-e[F.vu]-r[F.tL]-(r[F.PE]??0))}}(this.getUpgradesByLicenseType(),e.emptySeatsByLicenseType,this.props.initialDesignSeats)}))}getSubtotal(e){let t=O.Oq.dict(t=>(0,V._)(this.props.billingPricesResult.data,e,t)),a=es(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),r=L.H5.dict(e=>(a[e]??0)*t[e]*12),s=0;return L.H5.forEach(e=>{s+=r[e]??0}),s}async onSubmitPaymentAndAddress(){let e=this.state.payment.address,t=this.state.payment.card,a=this.state.vatId,r=this.state.regionalVatId;if(null===t){this.setState({paymentError:(0,T.t)("org_self_serve.payment_step.sorry_please_wait")});return}if(this.setState({apiPending:!0}),a&&!await (0,et.V)(a,e.country,()=>{},this.onVatValidationFail))return;if(this.props.canSeeBillingAddressExp&&!this.state.nameOnPaymentMethod){let e=(0,T.t)("org_self_serve.payment_step.name_on_payment_method_is_required");this.setState({apiPending:!1,paymentError:e});return}if(r&&!await (0,et.V)(r,e.country,()=>{},this.onVatValidationFail,e.region))return;let s=this.props.canSeeBillingAddressExp?{name:this.state.nameOnPaymentMethod,address_line1:e.line1,address_line2:e.line2,address_country:e.country,address_city:e.city,address_state:e.region,address_zip:e.postal_code}:void 0;(0,W.Ey)(t,s).then(t=>{if(!t.error&&t.token)return(0,W.To)(t.token.id,this.getSubtotal(this.state.currency),this.state.currency).then(t=>this.props.canSeeBillingAddressExp?p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,billing_address:e,shipping_address:(0,q.$V)(this.state.shippingAddress)?null:this.state.shippingAddress,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null}):p.Ay.post("/api/orgs/validate_payment",{payment_method:t.payment_method,address:e,selected_currency:this.state.currency,vat_gst_id:this.state.vatId,regional_vat_gst_id:this.state.regionalVatId||null})).catch(e=>(this.setState({apiPending:!1,paymentError:e.data?.message||e.message}),Promise.reject())).then(({data:e})=>{this.setState(a=>({payment:{...a.payment,last4:t.token?.card?.last4||null},stripeCustomerId:e.meta.stripe_customer_id,taxRate:e.meta.tax_percent,apiPending:!1}),()=>this.setStep(H.X1.Review))});{let e=t.error?.message||(0,T.t)("org_self_serve.payment_step.there_was_an_error_processing_your_payment_please_try_again");this.setState({apiPending:!1,paymentError:e})}})}getEditorStatusChanges(){let e={upgrade:{[z.G_.DESIGN]:[],[z.G_.WHITEBOARD]:[],[z.G_.DEV_MODE]:[]},downgrade:{[z.G_.DESIGN]:[],[z.G_.WHITEBOARD]:[],[z.G_.DEV_MODE]:[]}},{selectedEditors:t,initialEditors:a}=this.state;for(let r in t){let s=t[r];if(r in a){let t=a[r];s.designEditor?t.designEditor||e.upgrade[z.G_.DESIGN].push(r):(t.designEditor&&e.downgrade[z.G_.DESIGN].push(r),s.devMode&&e.upgrade[z.G_.DEV_MODE].push(r)),s.figjamEditor!==t.figjamEditor&&(s.figjamEditor?e.upgrade[z.G_.WHITEBOARD].push(r):e.downgrade[z.G_.WHITEBOARD].push(r))}else s.designEditor?e.upgrade[z.G_.DESIGN].push(r):s.devMode&&e.upgrade[z.G_.DEV_MODE].push(r),s.figjamEditor&&e.upgrade[z.G_.WHITEBOARD].push(r)}for(let r in a)if(!(r in t)){let t=a[r];t.designEditor&&e.downgrade[z.G_.DESIGN].push(r),t.figjamEditor&&e.downgrade[z.G_.WHITEBOARD].push(r)}return e}onSubmitPurchaseOrder(){this.props.dispatch(I.b({completed_org_cart_flow:!0}));let e=this.getEditorStatusChanges(),t=es(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),a=L.H5.dict(e=>t[e]??0),r={legal_org_name:this.state.orgDetails.legalOrgName,org_name:this.state.orgDetails.orgName||this.state.orgDetails.legalOrgName,team_ids:Array.from(this.state.selectedTeamIds),requested_seats:a,editor_status_changes:e,stripe_customer_id:this.state.stripeCustomerId,selected_currency:this.state.currency,vat_gst_id:this.state.vatId||null,regional_vat_gst_id:this.state.regionalVatId||null};this.state.newTeamName&&(r={...r,new_team_options:{team_name:this.state.newTeamName,add_to_org:!0}}),r.design_editors=t[F.vu],r.whiteboard_editors=t[F.tL],this.setState({apiPending:!0}),p.Ay.post("/api/orgs",r).catch(e=>(this.props.dispatch(S.s.error((0,T.Jv)(e,e.data?.message||(0,T.t)("org_self_serve.review_step.sorry_there_was_an_error_please_try_again")))),(0,u.$D)(l.FigmaTeam.BILLING,Error(`[Billing] Org checkout API failed: ${e.data?.message}`),{extra:{numDesignEditors:t[F.vu],numWhiteboardEditors:t[F.tL],numDevModeSeats:t[F.PE]??0,eligibleUpgrades:JSON.stringify(this.state.eligibleUpgrades.map(e=>({team:e.team.id,figjamEditors:e.figjamEditors.map(e=>e.id),designEditors:e.designEditors.map(e=>e.id)}))),selectedEditors:JSON.stringify(Object.keys(this.state.selectedEditors).map(e=>({userId:e,teamIds:this.state.selectedEditors[e].teamIds}))),selectedTeamIds:JSON.stringify([...this.state.selectedTeamIds]),userId:this.props.user.id}}),this.setState({apiPending:!1}),Promise.reject())).then(e=>{this.setState({apiPending:!1},()=>this.setStep(H.X1.Confirmation)),this.state.inviteEmails.length&&e.data.meta.new_team&&this.props.dispatch((0,X.rq)({emails:this.state.inviteEmails,resourceType:z.vt.TEAM,resourceIdOrKey:e.data.meta.new_team.id,level:Q.e6.EDITOR})),this.state.newTeamName&&e.data.meta.new_team&&(0,U.Al)(this.props.user.id),(0,m.sx)("Self Serve Org Purchased (GTM)"),(0,M.uE)("Self Serve Org Purchased",{user:this.props.user},{org_name:r.org_name,upsellSource:this.props.upsellSource})})}getUpgradesByLicenseType(){let{eligibleUpgrades:e,selectedTeamIds:t,selectedEditors:a}=this.state,r={},s={},n={};for(let[e,l]of Object.entries(a)){if(!l.teamIds.some(e=>t.has(e))){delete this.state.selectedEditors[e];continue}l.designEditor&&(r[e]=l),l.figjamEditor&&(s[e]=l),l.devMode&&(n[e]=l)}return e.filter(e=>t.has(e.team.id)).forEach(e=>{e.designEditors.forEach(t=>{!(0,d.nD)(t.email)&&a[t.id]?.designEditor&&(r[t.id]||(r[t.id]={user:t,teamIds:[]}),r[t.id].teamIds.includes(e.team.id)||r[t.id].teamIds.push(e.team.id))}),e.figjamEditors.forEach(t=>{!(0,d.nD)(t.email)&&a[t.id]?.figjamEditor&&(s[t.id]||(s[t.id]={user:t,teamIds:[]}),s[t.id].teamIds.includes(e.team.id)||s[t.id].teamIds.push(e.team.id))})}),{[F.vu]:Object.keys(r).length,[F.tL]:Object.keys(s).length,[F.PE]:Object.keys(n).length}}render(){let e;let t=this.effectiveStep();if("loading"===this.props.billingPricesResult.status||this.state.loading&&!this.props.newTeamProps)return r.createElement(v.kt,{testId:"loadingSpinner"});if("errors"===this.props.billingPricesResult.status)return(0,V.Ix)(this.props.billingPricesResult),r.createElement(B.t,null);let a=es(this.getUpgradesByLicenseType(),this.state.emptySeatsByLicenseType),s=new Date().getMonth(),n=new Date().setMonth(s+3),l=new Date().setMonth(s+12),i=this.getSubtotal(this.state.currency),m=i*this.state.taxRate/100,c=i+m,_=this.state.eligibleUpgrades.length>0,u=new Map;this.state.eligibleUpgrades.forEach(e=>u.set(e.team,e.designEditors.length+e.figjamEditors.length));let p=e=>{this.props.dispatch(b.$T({teamId:null,...this.props.newTeamProps?.previousView,view:"teamUpgrade",paymentStep:e,teamFlowType:this.props.newTeamProps?.teamFlowType||J.SC.CREATE_AND_UPGRADE}))};return e=t===H.X1.Review?r.createElement(r.Fragment,null,r.createElement(eo.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:this.state.eligibleUpgrades.length>0,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:p}),r.createElement(en.Vw,{onSubmit:this.onSubmit,orgPayment:this.state.payment,renewalDate:l,subTotalCents:i,taxDueCents:m,taxRate:this.state.taxRate,totalCents:c,totalSeats:a,showAdditionalEditorsModal:this.addEditors,trueUpDate:n,totalTeams:this.state.selectedTeamIds.size+(this.state.newTeamName?1:0),legalOrgName:this.state.orgDetails.legalOrgName,orgName:this.state.orgDetails.orgName,user:this.props.user,loading:this.state.apiPending,renderBillingItems:this.renderBillingItems,ctaProperties:this.ctaProperties(),currency:this.state.currency,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp,billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,navigateToEditPaymentDetails:()=>this.setStep(H.X1.Payment),navigateToEditOrganizationDetails:()=>this.setStep(H.X1.Details)})):t===H.X1.Confirmation?r.createElement(en._u,{totalCents:c,trueUpDate:n,orgMigrated:this.props.orgMigrated,onFileBrowserClick:this.onFileBrowserClick,orgPayment:this.state.payment,currency:this.state.currency}):r.createElement(r.Fragment,null,this.props.isOrgAdmin&&r.createElement(el.wW,{onContactSales:this.contactSales,onFileBrowserClick:this.onFileBrowserClick}),(0,d.qe)(this.props.user.email)&&r.createElement(el.VE,{onFileBrowserClick:this.onFileBrowserClick}),r.createElement(eo.d,{currentStep:this.props.step,setStep:this.setStep,hasEligibleUpgrades:_,onFileBrowserClick:this.onFileBrowserClick,newTeamProps:this.props.newTeamProps,onSelectTeamUpgradeStep:p}),r.createElement("div",{className:em._h},t===H.X1.CreateTeam&&r.createElement("div",{className:em.Bb},r.createElement(x.y,{type:x.I.ORG,teamName:this.state.newTeamName||"",setTeamName:this.onChangeNewTeamName,onNext:this.onSubmit})),t===H.X1.TeamSelect&&(this.state.loading?r.createElement(v.kt,null):r.createElement(en.JG,{teamsToEditors:u,selectedTeamIds:this.state.selectedTeamIds,onToggle:this.onTeamToggle,newTeamName:this.state.newTeamName})),t===H.X1.Details&&(this.state.loading?r.createElement(v.kt,null):r.createElement(en.vj,{orgDetails:this.state.orgDetails,onChangeFormInput:this.onChangeOrgDetails,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp})),t===H.X1.Payment&&r.createElement(f.P,{className:o()(em.M7,em.Et),hideScrollbar:!0},r.createElement("div",{className:em.W},(0,T.tx)("org_self_serve.payment_step.enter_your_payment_details")),r.createElement("form",{className:em.fI},r.createElement(ea.n,{id:"team-upgrade-page-form",cardId:"team-upgrade-page-card",billingAddress:this.state.payment.address,shippingAddress:this.state.shippingAddress,onCardReady:this.onCardReady,onBillingAddressChange:this.onAddressChange,onShippingAddressChange:this.onShippingAddressChange,nameOnPaymentMethod:this.state.nameOnPaymentMethod,setNameOnPaymentMethod:this.onNameOnPaymentMethodChange,onClearToken:this.onClearToken,onVatIdChange:this.onVatIdChange,vatId:this.state.vatId,onRegionalVatIdChange:this.onRegionalVatIdChange,regionalVatId:this.state.regionalVatId,isCommunityCheckout:!1,isCheckoutFlow:!0,canSeeBillingAddressExp:this.props.canSeeBillingAddressExp}))),t!==H.X1.CreateTeam&&this.renderPurchaseSummary())),r.createElement(D.fu,{name:Z.e0.ORG_CART,properties:{step:t,currency:this.state.currency,upsellSource:this.props.upsellSource}},r.createElement("div",{className:em.F0},e))}}function eu(e){return{user:e.user,isOrgAdmin:(0,Y.x9)(e.orgUsersByOrgId,e.user.id).some(e=>e.permission===z._D.ADMIN),currency:e.payment.currency||(0,G.LN)()}}e_.displayName="OrgSelfServePage";let ep=(0,s.Ng)(eu)(e_);function eg(e){let t=(0,P.Mh)(),a=(0,k.N1)(k.Fq.ORG_SELF_SERVE);return r.createElement(ep,{...e,canSeeBillingAddressExp:t,billingPricesResult:a})}function eE(e){return(0,_.kc)().cart_error_boundaries?r.createElement(eh,{...e}):r.createElement(eg,{...e})}function eh(e){return r.createElement(g.tH,{sentryTags:{area:l.FigmaTeam.MONETIZATION_UPGRADES},boundaryKey:"OrgSelfServeFigJamPage",fallback:g.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:j.y4},r.createElement(eg,{...e}))}},648841:(e,t,a)=>{a.d(t,{JG:()=>w,Vw:()=>A,_u:()=>I,vj:()=>C});var r=a(411855),s=a(634832),n=a(629019),l=a.n(n),i=a(133537),o=a(966712);if(443==a.j)var m=a(860601);var d=a(946689),c=a(493323),_=a(355819),u=a(163023),p=a(939863),g=a(67294),E=a(865618),h=a(6988),v=a(820113),f=a(928491),y=a(237280),S=a(516319);if(443==a.j)var T=a(339290);if(443==a.j)var N=a(501191);function x(e){return r.createElement("div",{style:{height:e.height||12}})}function w(e){let[t,a]=(0,r.useState)(!1),s=r.createRef(),n=()=>{s?.current&&a(s.current.getBoundingClientRect().bottom>window.innerHeight+25)};r.useEffect(()=>(n(),window.addEventListener("scroll",n),function(){window.removeEventListener("scroll",n)}));let i=[...e.teamsToEditors.keys()],o=!!e.newTeamName,m=o?i.length+1:i.length,d=i[i.length-1]?.id,c=m<=5?S.tZ:S.xr,_=e.newTeamName?(0,p.tx)("org_self_serve.team_step.team_creation_header"):(0,p.tx)("org_self_serve.team_step.header"),u=e.newTeamName?(0,p.tx)("org_self_serve.team_step.team_creation_teams_shown_description"):(0,p.tx)("org_self_serve.team_step.teams_shown_description");return r.createElement("div",{className:l()(S.M7,S.Et)},r.createElement("div",{className:S.W},_),r.createElement(x,{height:4}),r.createElement("div",{className:S.OL},u),t&&r.createElement("div",{className:S.cH},r.createElement("div",{className:S.aQ},(0,p.tx)("org_self_serve.team_step.more_teams")," \u2193")),r.createElement("div",{className:m<=5?S.LQ:S.KZ},o&&r.createElement(b,{name:e.newTeamName||"",editors:0,team:null,checked:null!=e.newTeamName,tileClassName:c,tabIndex:0,disabled:!0}),i.map((t,a)=>r.createElement(b,{name:t.name,key:t.id,editors:e.teamsToEditors.get(t)||0,team:t,checked:e.selectedTeamIds.has(t.id),onClick:()=>e.onToggle(t.id),tileClassName:c,tabIndex:o?a+1:a,lastTeamRef:t.id===d?s:null}))))}function b(e){return null===e.team&&(0,s.assert)(0===e.editors),r.createElement("div",{onClick:e.onClick,key:e.team?.id||e.name,className:e.tileClassName,role:"checkbox","aria-checked":e.checked,tabIndex:e.tabIndex,"aria-disabled":e.disabled},r.createElement("div",{className:S.i9,ref:e.lastTeamRef},r.createElement(f.CH,{entity:e.team||{name:e.name},size:g.Pf.LARGE}),r.createElement("div",{className:S.BP},r.createElement("div",{className:S.Ps},e.name),r.createElement("div",{className:S.S$},(0,p.tx)("org_self_serve.team_step.editor.seat_rename",{editorCount:e.editors})))),r.createElement("label",null,r.createElement(E.S,{checked:e.checked,disabled:e.disabled})))}function C(e){return r.createElement("div",{className:l()(S.M7,S.Et)},r.createElement("div",{className:S.W},(0,p.tx)("org_self_serve.details_step.tell_us_about_your_organization")),r.createElement("div",{className:S.Nv},!e.canSeeBillingAddressExp&&r.createElement(d.Lf,{htmlName:"actor_name",label:(0,p.t)("org_self_serve.details_step.your_full_name"),value:e.orgDetails.actorName,onChange:e.onChangeFormInput}),!e.canSeeBillingAddressExp&&r.createElement(d.Lf,{htmlName:"actor_email",label:(0,p.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:m.lQ}),r.createElement(d.Lf,{htmlName:"legal_org_name",label:(0,p.t)("org_self_serve.details_step.legal_company_name"),value:e.orgDetails.legalOrgName,onChange:e.onChangeFormInput}),r.createElement(d.Lf,{htmlName:"org_name",label:(0,p.t)("org_self_serve.details_step.company_display_name"),placeholder:e.canSeeBillingAddressExp?(0,p.t)("org_self_serve.details_step.company_display_name__different_from_company_name_sub_text"):(0,p.t)("org_self_serve.details_step.company_display_name_sub_text"),value:e.orgDetails.orgName,onChange:e.onChangeFormInput}),e.canSeeBillingAddressExp&&r.createElement(d.Lf,{htmlName:"actor_email",label:(0,p.t)("org_self_serve.details_step.email_address"),value:e.orgDetails.actorEmail||"",disabled:!0,onChange:m.lQ})))}function A(e){let[t,a]=(0,r.useState)(!1),[s,n]=(0,r.useState)(!1),m=new v.vr(e.currency);return r.createElement(_.P,{className:l()(S.M7,S.Et),hideScrollbar:!0},r.createElement("div",{className:S.W},(0,p.tx)("org_self_serve.review_step.lets_make_sure_everythings_right")),r.createElement("div",{className:S.nz},r.createElement("div",{className:S.ll,"data-testid":"reviewSummary"},(()=>{let t=(0,i.zN)(e.user.email);return(0,o.kc)().pro_team_business_names?(0,h.x)({displayName:e.orgName||e.legalOrgName,legalName:e.legalOrgName,variant:"org",domain:t,totalTeams:e.totalTeams,canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,userEmail:e.user.email,navigateToEditPaymentDetails:e.navigateToEditPaymentDetails,navigateToEditOrganizationDetails:e.navigateToEditOrganizationDetails}):r.createElement(r.Fragment,null,r.createElement("div",{className:S.lQ},(0,p.tx)("org_self_serve.review_step.organization_details")),r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.company_name")),r.createElement("div",null,e.legalOrgName)),r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.company_display_name")),r.createElement("div",null,e.orgName||e.legalOrgName)),r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.domain")),r.createElement("div",null,t)),e.totalTeams>0&&r.createElement("div",{className:S.ex},r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.teams")),r.createElement("div",null,e.totalTeams)))})()),r.createElement("div",{className:S.SU}),r.createElement("div",null,s&&r.createElement(y.LJ,{onClose:()=>n(!1)}),r.createElement("div",{className:S.Or},r.createElement("div",{className:S.lQ},(0,p.tx)("org_self_serve.review_step.next_quarterly_true_up_on_date",{trueUpDate:new Date(e.trueUpDate)})),r.createElement(x,{height:16}),r.createElement("div",{className:S.TK},(0,p.tx)("org_self_serve.review_step.what_is_a_true_up")),r.createElement("ul",null,r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_2.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_3.seat_rename")),r.createElement("li",null,(0,p.tx)("org_self_serve.review_step.true_up_description_4.seat_rename"))),r.createElement(d.Ph,{onClick:()=>n(!0),className:S.uD,trusted:!0},(0,p.tx)("org_self_serve.review_step.learn_more_about_true_ups")),r.createElement(x,{height:20}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:24}),r.createElement("div",{className:S.lQ},(0,p.tx)("org_self_serve.review_step.annual_renewal_on_date",{renewalDate:new Date(e.renewalDate)})),r.createElement(x,{height:16}),r.createElement("div",null,(0,p.tx)("org_self_serve.review_step.annual_renewal_description.seat_rename")),r.createElement(x,{height:20}),e.renderBillingItems(),r.createElement("button",{className:`${S.uD} ${S.i9}`,onClick:e.showAdditionalEditorsModal},r.createElement(u.B,{className:S.Hl,svg:N.A}),(0,p.tx)("org_self_serve.review_step.add_additional_editors.seat_rename")),r.createElement(x,{height:20}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:16}),r.createElement("div",{className:S.$M},r.createElement("div",null,r.createElement("div",{className:S.TK},(0,p.tx)("org_self_serve.review_step.subtotal"))),r.createElement("div",{className:S.TK},r.createElement("div",{className:S.TK,"data-testid":"subtotal-summary-price-section"},m.formatMoney(e.subTotalCents,{showCents:!1})))),r.createElement("div",{className:S.$M},r.createElement("div",null,r.createElement("div",{className:S.TK},(0,p.tx)("org_self_serve.review_step.tax")),r.createElement("div",{className:S.ZE},(0,p.tx)("org_self_serve.review_step.tax_rate",{taxRate:e.taxRate}))),r.createElement("div",{className:S.TK,"data-testid":"tax-summary-price-text"},m.formatMoney(e.taxDueCents,{showCents:!1}))),r.createElement("div",{className:S.$M},r.createElement("div",null,r.createElement("div",{className:S.bv},(0,p.tx)("org_self_serve.review_step.total_due_today")),e.orgPayment.last4&&r.createElement("div",{className:S.ZE},(0,p.tx)("org_self_serve.review_step.card_ending_in_last4",{last4:e.orgPayment.last4}))),r.createElement("div",{className:S.lQ,"data-testid":"confirm-total-summary-price-text"},m.formatMoney(e.totalCents,{showCents:!1}))),r.createElement(x,{height:8}),r.createElement("div",{className:S.aK})),r.createElement(x,{height:24}),r.createElement("div",{className:S.gn},r.createElement("div",{className:S.O},r.createElement("input",{type:"checkbox",checked:t,className:S.o1,onChange:()=>{a(!t)},"data-testid":"msa-checkbox"}),r.createElement("span",null,(0,p.tx)("org_self_serve.review_step.i_agree_to_msa_and_renewal_links",{msaLink:r.createElement("a",{rel:"noopener noreferrer",className:S.uD,href:(0,p.dS)("/ssa"),target:"_blank"},(0,p.tx)("org_self_serve.review_step.software_services_agreement")),renewalLink:r.createElement("a",{rel:"noopener noreferrer",className:S.uD,href:(0,p.dS)("/renewal-and-cancellation"),target:"_blank"},(0,p.tx)("org_self_serve.review_step.renewal_and_cancellation_terms"))}))),r.createElement(d.vd,{className:S.sk,onClick:e.onSubmit,disabled:!t||e.loading,trackingProperties:e.ctaProperties,dataTestId:"confirm-purchase-button"},(0,p.tx)("org_self_serve.review_step.complete_purchase"))))))}function I(e){let t=new v.vr(e.currency);return r.createElement("div",{className:S.jg},r.createElement("div",{className:l()(S.M7,S.Et)},r.createElement("div",{className:S.cc},r.createElement(u.B,{svg:T.A,className:S.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),r.createElement("div",{className:S.W},(0,p.tx)("org_self_serve.confirmation_step.you_re_all_set"))),r.createElement("div",{className:S.Jo},r.createElement("div",{className:S.Qv},(0,p.tx)("org_self_serve.confirmation_step.order_confirmation_message")),r.createElement(x,{height:24}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:24}),r.createElement("div",{className:S.N5},r.createElement("div",{className:S.I1},(0,p.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),r.createElement("span",{className:S.iv},t.formatMoney(e.totalCents,{showCents:!1}))),r.createElement(x,{height:24}),r.createElement("div",{className:S.aK}),r.createElement(x,{height:32}),r.createElement("div",{className:S.Ed},!e.orgMigrated&&r.createElement(r.Fragment,null,r.createElement(c.kt,null),r.createElement("div",{className:S.nm},(0,p.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization"))),r.createElement(d.$$,{disabled:!e.orgMigrated,className:S.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button"},(0,p.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")))))))}},237280:(e,t,a)=>{a.d(t,{Bx:()=>$,wW:()=>z,VE:()=>j,ml:()=>Q,LJ:()=>G});var r=a(411855),s=a(188507),n=a(966712),l=a(485727),i=a(196748),o=a(768137),m=a(799569),d=a(946689),c=a(355819),_=a(163023),u=a(901536),p=a(939863),g=a(501114),E=a(175290),h=a(865618),v=a(809840),f=a(237107),y=a(662275),S=a(801161),T=a(672517),N=a(988022),x=a(582410),w=a(720647),b=a(820113),C=a(498606),A=a(237870),I=a(928491),P=a(80332),D=a(585878),k=a(488578);let M=(0,a(422237).ex)("org_upgrade_user_info_extended",function({teamIds:e,teamNames:t}){return r.createElement("div",null,e.map((e,a)=>{let s=(0,P.$L)(e,P.us);return r.createElement("div",{key:e,className:"org_self_serve_modal_tooltip_content--tooltipRow--l59-b"},r.createElement("div",{style:g.sx.add({backgroundColor:s,minWidth:"10px",height:"10px",margin:"8px",borderRadius:"2px"}).$}),r.createElement("div",null,t[a]))}))},e=>{let t=e.getAttribute("data-tooltip-team-names"),a=e.getAttribute("data-tooltip-team-ids");return{teamNames:t.split(","),teamIds:a.split(",")}}),O="org_self_serve_modals--modalContainer--T0ehh",R="org_self_serve_modals--modalWrapperSmall--MoMir org_self_serve_modals--modalWrapper--wPVCU",B="org_self_serve_modals--modalHeader--xK0Vj",L="org_self_serve_modals--modalText---cdj9";var F=a(265871),V=a(950142);function U(e){return r.createElement("div",{style:{height:e.height||12}})}function j(e){return r.createElement(D.XV,{containerClassName:O,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},r.createElement("div",{className:R},r.createElement("div",{className:B},(0,p.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")),r.createElement("div",{className:L},(0,p.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")),r.createElement(U,{height:12}),r.createElement("a",{onClick:e.onFileBrowserClick},(0,p.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser"))))}function z(e){return r.createElement(D.XV,{containerClassName:O,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},r.createElement("div",{className:R},r.createElement("div",{className:B},(0,p.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")),r.createElement("div",{className:L},(0,p.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:r.createElement("a",{onClick:e.onContactSales},(0,p.tx)("org_self_serve.modals.existing_org_admin.contact_sales"))})),r.createElement(U,{height:4}),r.createElement(U,{height:12}),r.createElement("a",{onClick:e.onFileBrowserClick},(0,p.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser"))))}function G(e){return r.createElement(D.XV,{containerClassName:O,headerSize:"hidden",onClose:e.onClose,title:"",minWidth:580,maxWidth:580},r.createElement("div",{className:"org_self_serve_modals--modalWrapper--wPVCU"},r.createElement(_.B,{className:"org_self_serve_modals--modalClose--vFM62",svg:V.A,onClick:e.onClose}),r.createElement("div",{className:B},(0,p.tx)("org_self_serve.modals.true_up_edu.figma_grows_with_your_team")),r.createElement("div",{className:L},(0,p.tx)("org_self_serve.modals.true_up_edu.members_can_add_new_editors.seat_rename")),r.createElement(U,{height:8}),r.createElement("div",{className:"org_self_serve_modals--modalSubHeader--e93TH"},(0,p.tx)("org_self_serve.modals.true_up_edu.what_to_expect_at_true_up")),r.createElement("div",{className:L},(0,p.tx)("org_self_serve.modals.true_up_edu.true_up_explanation.seat_rename",{seeFullDetails:r.createElement("a",{href:"https://help.figma.com/hc/articles/360040328293",target:"_blank"},(0,p.tx)("org_self_serve.modals.true_up_edu.see_full_details"))}))))}let $=(0,A.Ju)(function(e){let t=e.isProTeam?x.H5.exclude([w.PE]):x.H5,[a,s]=(0,r.useState)(t.dict(t=>e.seatDataByLicenseType[t]?.currentSeats||0)),[o,m]=(0,r.useState)(null),d=e=>{let t=a[e];void 0!==t&&t<99&&s({...a,[e]:t+1})},c=t=>{let r=e.seatDataByLicenseType[t],n=a[t];null!=r&&null!=n&&n>r.minSeats&&s({...a,[t]:n-1})},u=(e,t)=>{if(""===e.target.value){t(0);return}let a=parseInt(e.target.value);isNaN(a)||t(a)},g=new b.vr(e.currency),E=a[w.tL],h={[w.vu]:{headerString:(0,p.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:a[w.vu],shouldShowDevModeIncludedText:!0},[w.tL]:{headerString:(0,p.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:E,shouldShowDevModeIncludedText:!1},[w.PE]:{headerString:(0,p.t)("all_carts.dev_mode_only_seats"),totalSeatCount:a[w.PE]??0,shouldShowDevModeIncludedText:!1}};return r.createElement(D.Eo,{onSubmit:()=>{let r=!1;if(t.forEach(t=>{let s=a[t],n=e.seatDataByLicenseType[t]?.minSeats||0;void 0!==s&&!1===r&&(s<n||s>99)&&(m(t),r=!0)}),r)return;let s=t.reduce((e,t)=>e+(a[t]||0),0);e.minTotalSeats&&s<e.minTotalSeats?m("total"):(e.dispatch(y.Ce()),e.updateAdditionalSeats(a))},confirmText:(0,p.t)("all_carts.save"),cancelText:(0,p.t)("all_carts.cancel"),title:(0,p.t)("all_carts.add_additional_editors.seat_rename")},r.createElement("div",{className:"org_self_serve_modals--bannerContainer--pW9ZX"},o&&r.createElement("div",{className:"org_self_serve_modals--errorBanner--QbvRM"},r.createElement(_.B,{className:"org_self_serve_modals--errorSvg--Lf9lD",svg:F.A}),r.createElement("div",{className:"org_self_serve_modals--errorBannerText--EV-xZ org_self_serve_modals--headerModalText--u9znR"},o===w.vu&&(0,p.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[w.vu].minSeats}),o===w.tL&&(0,p.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[w.tL].minSeats}),o===w.PE&&(0,p.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[w.PE]?.minSeats||0}),"total"===o&&!!e.minTotalSeats&&((0,n.kc)().org_checkout_min_seat_info_copy?(0,p.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[w.vu].minSeats,seatsText:(0,p.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,p.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[w.vu].minSeats})}):(0,p.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))))),t.sort(x.AG).map(t=>{let n=h[t],o=e.seatDataByLicenseType[t],m=a[t];return void 0===n||void 0===o||void 0===m?r.createElement(r.Fragment,null):r.createElement("div",{key:t},r.createElement(U,{height:16}),r.createElement("div",{className:"org_self_serve_modals--headerModalBoldText--Fk6Q7 org_self_serve_modals--headerModalText--u9znR"},n.headerString),n.shouldShowDevModeIncludedText&&r.createElement(r.Fragment,null,r.createElement(U,{height:4}),r.createElement(l.G,null)),r.createElement(U,{height:12}),r.createElement(i.o,{"data-testid":t+"-editor_counter",editorType:t,incrementSeats:()=>d(t),decrementSeats:()=>c(t),numEditors:m,minSeatsCount:o.minSeats,headerText:g.formatMoney(n.totalSeatCount*o.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,f.mx)(e.showAnnualPrice,n.totalSeatCount,!0,o.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>u(e,e=>{s({...a,[t]:e})})}))}),r.createElement(U,{height:18}),r.createElement("div",{className:"org_self_serve_modals--divider--FjEW2"}))},"AdditionalEditorsModal");var K=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))(K||{});function Y({userData:e,checkboxHandler:t}){let[a,n]=(0,r.useState)(0),l=(0,s.wA)(),i=({rect:e,designChecked:r,...s})=>{if(t(s),s.newVal&&a<3){n(e=>e+1);let t=r?(0,p.t)("checkout.switch_seat_from_design_to_devmode"):(0,p.t)("checkout.enabled_devmode");l(S.eB({target:{kind:C.Ui.TEXT,text:t},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:C.Zj.RIGHT,hideAfterDelay:1e3}))}};return r.createElement(r.Fragment,null,e.map((a,s)=>r.createElement("div",{"data-testid":"user-data-row",key:a.user.id},r.createElement(X,{rowType:"data"},r.createElement(I.az,{entity:a.user,includeUserEmailAddress:!0,size:24}),r.createElement(q,{userInfo:a}),r.createElement(h.S,{checked:a.designEditor,onChange:e=>{t({userId:a.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),r.createElement(d.tB,{checked:a.devMode,className:"org_self_serve_modals--devModeCheckbox--nDoay",onChange:e=>{i({designChecked:a.designEditor,userId:a.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),r.createElement(d.tB,{checked:a.figjamEditor,className:"org_self_serve_modals--figjamCheckbox--Cv6Bs",onChange:e=>{t({userId:a.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})),s!==e.length-1&&r.createElement(W,null))))}function X({rowType:e,children:t}){let a="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return r.createElement(E.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0},t.map((e,t)=>r.createElement(E.Y,{key:t,width:a[t],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16}},e)))}function W(){return r.createElement("div",{className:u.cx.wFull.colorBgTertiary.h1.$})}function H({teamId:e}){return r.createElement("div",{className:u.cx.w8.h8.bRadius2.minW8.$,style:g.sx.add({backgroundColor:(0,P.$L)(e,P.us)}).$})}function q({userInfo:e}){return e.teams.length>1?r.createElement("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":C.Ib.SPECIAL,"data-tooltip":M,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0},r.createElement(v.E,{color:"default"},(0,p.tx)("all_carts.editor_table.multiple_teams"))):r.createElement(E.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start"},r.createElement(H,{teamId:e.teamIds[0]}),r.createElement("div",{className:u.cx.noWrap.ellipsis.overflowHidden.$},r.createElement(v.E,{color:"default"},e.teams[0]?.name)))}let Q=(0,A.Ju)(function({users:e,updateSelectedEditors:t,updateAdditionalEmptySeats:a,currency:s,minTotalSeats:n,dispatch:l,seatInfo:_,monthlyPriceByLicenseType:u}){let[g,h]=(0,r.useState)(e),[f,S]=(0,r.useState)({design:_.design.additionalSeatCount,figjam:_.figjam.additionalSeatCount,dev_mode:_.dev_mode.additionalSeatCount}),x=(0,r.useMemo)(()=>{let e=0,t=0,a=0;for(let r of Object.values(g))r.designEditor&&e++,r.devMode&&a++,r.figjamEditor&&t++;return(e+=f.design,a+=f.dev_mode,t+=f.figjam,n&&e+t+a<n)?3:e<_.design.minCount||e>99?1:t<_.figjam.minCount||t>99?2:0},[f,g,n,_]),C=e=>{f[e]>=99||S(t=>({...t,[e]:t[e]+1}))},A=e=>{f[e]<=0||S(t=>({...t,[e]:t[e]-1}))},I=(e,t)=>{let a=""===e.target.value?0:parseInt(e.target.value);isNaN(a)||S(e=>({...e,[t]:a}))},P=new b.vr(s),D=()=>{l(y.Ce())};return r.createElement(T.fu,{name:"Select Editors Modal"},r.createElement(k.Nb,{size:864,maxHeight:672,hide:()=>l(y.Ce()),className:"org_self_serve_modals--selectEditorsModal--Hxi5q"},r.createElement("div",{className:"org_self_serve_modals--selectEditorModalHeader--wsqXY org_self_serve_modals--headerModalText--u9znR"},(0,p.tx)("checkout.add_or_remove_editors"),r.createElement(m.s_,{customStyle:{position:"initial"},dispatch:l,onClose:D})),r.createElement(W,null),r.createElement(X,{rowType:"header"},r.createElement(v.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.editor_table.Name")),r.createElement(v.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.editor_table.Teams")),r.createElement(E.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(v.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.figma_design")),r.createElement("div",null,r.createElement(v.E,{color:"handoff",fontWeight:"medium"},(0,p.tx)("general.dev_mode")),"\xa0",r.createElement(v.E,{color:"default",fontWeight:"medium"},(0,p.tx)("checkout.dev_mode_included_text_formatted.included")))),r.createElement(v.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.dev_mode")),r.createElement(v.E,{color:"default",fontWeight:"medium"},(0,p.tx)("general.figjam"))),r.createElement(W,null),r.createElement(c.P,{maxHeight:426},r.createElement(Y,{userData:Object.values(g),checkboxHandler:({userId:e,type:t,newVal:a})=>{let r={...g[e],[t]:a};"devMode"===t&&a&&(r.designEditor=!1),"designEditor"===t&&a&&(r.devMode=!1),h(t=>({...t,[e]:r})),(0,N.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:t,checked:a})}})),r.createElement(W,null),r.createElement(X,{rowType:"footer"},r.createElement(E.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(v.E,{color:"default",fontWeight:"medium"},(0,p.tx)("all_carts.add_additional_editors.seat_rename")),r.createElement(v.E,{fontWeight:"regular",color:"secondary"},(0,p.tx)("all_carts.add_additional_editors_description.seat_rename"))),r.createElement(i.o,{editorType:w.vu,incrementSeats:()=>C(w.G_.DESIGN),decrementSeats:()=>A(w.G_.DESIGN),numEditors:f.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,w.G_.DESIGN)}),r.createElement(i.o,{editorType:w.PE,incrementSeats:()=>C(w.G_.DEV_MODE),decrementSeats:()=>A(w.G_.DEV_MODE),numEditors:f.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,w.G_.DEV_MODE)}),r.createElement(i.o,{editorType:w.tL,incrementSeats:()=>C(w.G_.FIGJAM),decrementSeats:()=>A(w.G_.FIGJAM),numEditors:f.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>I(e,w.G_.FIGJAM)})),r.createElement("div",{className:"org_self_serve_modals--selectEditorModalActions--SUzT9 org_self_serve_modals--selectEditorModalFooter--1hQ0p"},0!==x?(()=>{switch(x){case 0:default:return;case 1:return r.createElement(v.E,{color:"danger"},(0,p.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:_.design.minCount}));case 2:return r.createElement(v.E,{color:"danger"},(0,p.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:_.figjam.minCount}));case 3:return r.createElement(v.E,{color:"danger"},(0,p.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:n}))}})():r.createElement(v.E,{fontWeight:"regular",color:"secondary"},(0,p.tx)("all_carts.new_total",{total:P.formatMoney(function(e,t,a){let r=t.design,s=t.figjam,n=t.dev_mode;for(let t in e)e[t].designEditor?r++:e[t].devMode&&n++,e[t].figjamEditor&&s++;return r*a[w.G_.DESIGN]*12+s*a[w.G_.FIGJAM]*12+n*a[w.G_.DEV_MODE]*12}(g,f,u),{showCents:!0})})),r.createElement("div",{className:"org_self_serve_modals--buttonGroup--sI5ub"},r.createElement(o.nR,{onClick:D},(0,p.t)("general.cancel")),r.createElement(d.$$,{onClick:()=>{0===x&&(a(f),t(g),l(y.Ce()))},disabled:0!==x},(0,p.t)("checkout.update_seats"))))))},"SelectEditorsModal")},27905:(e,t,a)=>{a.d(t,{O:()=>T});var r=a(411855),s=a(62342),n=a(163023),l=a(901536),i=a(939863),o=a(175290),m=a(809840),d=a(988022),c=a(720647),_=a(67294),u=a(928491),p=a(896528);function g({users:e,size:t=_.Pf.MEDIUM,maxShow:a=2}){let s=e.slice(0,a),n=Math.max(e.length-a,0);return r.createElement(o.Y,{verticalAlignItems:"center",spacing:"-8px",horizontalAlignItems:"start",width:"hug-contents"},s.map((e,a)=>r.createElement(u.Ro,{className:l.cx.borderBox.relative.b1.colorBorderBg.$,key:`${e.id}${a}`,entity:e,size:t})),n>0&&r.createElement(p.f,{className:l.cx.fontSemiBold.colorText.borderBox.relative.b1.colorBorderBg.$,text:`+${n}`,size:t}))}var E=a(516319),h=a(401761),v=a(501191);let f={[c.G_.DESIGN]:r.createElement(m.E,{fontSize:13},(0,i.tx)("checkout.design_with_dev_mode_included")),[c.G_.DEV_MODE]:r.createElement(m.E,{fontSize:13},(0,i.tx)("general.dev_mode")),[c.G_.FIGJAM]:r.createElement(m.E,{fontSize:13},(0,i.tx)("general.figjam"))},y={[c.G_.DESIGN]:s.y1.DESIGN_AND_DEV_MODE,[c.G_.DEV_MODE]:s.y1.DEV_MODE,[c.G_.FIGJAM]:s.y1.WHITEBOARD};function S({type:e,users:t,additionalSeats:a,onClick:d}){let[c,_]=(0,r.useState)(!1);return r.createElement("div",{className:`${l.cx.b1.colorBorder.bRadius6.wFull.borderBox.$} ${c?l.cx.colorBgHover.$:""}`,role:"button",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),onClick:d,tabIndex:0,"data-testid":`seat-summary-card-${e}`},r.createElement(o.Y,{padding:{top:10,right:16,bottom:10,left:16},direction:"horizontal",verticalAlignItems:"center",horizontalAlignItems:"space-between"},r.createElement(o.Y,{horizontalAlignItems:"start",verticalAlignItems:"center"},r.createElement(s.oS,{type:y[e],size:s.LE.LARGE}),r.createElement(o.Y,{direction:"vertical",horizontalAlignItems:"start",padding:{left:4},spacing:0},f[e],r.createElement("div",null,r.createElement(m.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,i.tx)("checkout.seats",{numOfSeats:t.length+a})),a>0&&r.createElement("span",null,"\xa0",r.createElement(m.E,null,(0,i.tx)("checkout.paranthesis",{content:r.createElement(m.E,{color:"secondary",fontSize:11,fontWeight:"medium"},(0,i.tx)("checkout.empty_seats",{numOfEmptySeats:a}))}))),c&&r.createElement("span",null,r.createElement(m.E,{color:"secondary"},"\xa0\u2022\xa0"),r.createElement(m.E,{fontSize:11,color:"brand",fontWeight:"medium"},(0,i.tx)("general.edit")))))),r.createElement(g,{users:t}),a>0&&0===t.length&&r.createElement(n.B,{svg:h.A,useOriginalSrcFills_DEPRECATED:!0})))}function T({additionalDesignSeats:e,additionalDevModeSeats:t,additionalWhiteboardSeats:a,selectedEditors:s,onClick:_}){let u={[c.G_.DESIGN]:{users:[],additionalSeats:e},[c.G_.DEV_MODE]:{users:[],additionalSeats:t},[c.G_.FIGJAM]:{users:[],additionalSeats:a}};for(let e of Object.values(s))e.designEditor?u[c.G_.DESIGN].users.push(e.user):e.devMode&&u[c.G_.DEV_MODE].users.push(e.user),e.figjamEditor&&u[c.G_.FIGJAM].users.push(e.user);return r.createElement(r.Fragment,null,r.createElement(o.Y,{direction:"vertical",spacing:"12px",height:"hug-contents"},Object.entries(u).map(([e,{users:t,additionalSeats:a}])=>r.createElement(S,{key:e,type:e,users:t,additionalSeats:a,onClick:()=>{_(),(0,d.Cu)({name:"org_checkout_seat_summary_card"})}}))),r.createElement("div",{className:l.cx.mt24.$},r.createElement("button",{"data-testid":"seat-summary-add-seats-cta",className:`${E.uD} ${E.i9}`,onClick:()=>{_(),(0,d.Cu)({name:"org_checkout_add_more_seats"})}},r.createElement(n.B,{className:E.Hl,svg:v.A}),r.createElement(m.E,null,(0,i.tx)("checkout.add_additional_seats")))))}},720818:(e,t,a)=>{a.d(t,{d:()=>p});var r=a(411855),s=a(966712),n=a(446520),l=a(939863),i=a(709217),o=a(672517),m=a(802026),d=a(622139),c=a(637590),_=a(516319);let u=(0,o.tf)(function(e){return r.createElement("div",{className:_.Nd,onClick:e.onClick},(0,l.tx)("org_self_serve.headers.cancel"))});function p(e){if(e.currentStep===m.X1.Confirmation)return null;let t=[],a=null;if(e.newTeamProps){let r={step:m.X1.ChoosePlan,name:(0,l.t)("org_self_serve.headers.choose_plan")},s={step:m.X1.CreateTeam,name:(0,l.t)("org_self_serve.headers.create_team")};switch(e.newTeamProps?.teamFlowType){case c.SC.CREATE:t.push({step:m.X1.PseudoCreateTeam,name:(0,l.t)("org_self_serve.headers.create_team")}),t.push({step:m.X1.AddCollaborators,name:(0,l.t)("org_self_serve.headers.add_team_members")}),t.push(r);break;case c.SC.CREATE_AND_UPGRADE:t.push(r),t.push(s),a=m.X1.CreateTeam;break;case c.SC.UPGRADE_EXISTING_TEAM:t.push(r)}}(e.hasEligibleUpgrades||e.newTeamProps)&&(t.push({step:m.X1.TeamSelect,name:(0,l.t)("org_self_serve.headers.teams_to_upgrade")}),(0,s.kc)().campfire_cart&&t.push({step:m.X1.SeatSelect,name:i.IG}),a=a??m.X1.TeamSelect),t.push({step:m.X1.Details,name:(0,l.t)("org_self_serve.headers.organization_details")}),t.push({step:m.X1.Payment,name:(0,l.t)("org_self_serve.headers.payment")}),t.push({step:m.X1.Review,name:(0,l.t)("org_self_serve.headers.review")}),a=a??m.X1.Details,t[t.findIndex(e=>e.step===a)].step=m.X1.Initial;let o=0;for(let a=0;a<t.length;a++)if(t[a].step===e.currentStep){o=a;break}return r.createElement("div",{className:_.li},r.createElement(u,{onClick:e.onFileBrowserClick}),r.createElement("div",{className:_.Uu,"data-testid":"stepBreadcrumbs"},t.map((t,a)=>r.createElement(n.On,{key:a+1,selected:e.currentStep===t.step,number:a+1,text:t.name,onClick:()=>{let r=function(e){switch(e){case m.X1.ChoosePlan:return d.tn.PLAN_COMPARISON;case m.X1.AddCollaborators:return d.tn.ADD_COLLABORATORS;case m.X1.PseudoCreateTeam:return d.tn.CREATE_TEAM;default:return null}}(t.step);r&&e.onSelectTeamUpgradeStep?e.onSelectTeamUpgradeStep(r):window.history.go(a-o)},canClick:a<o,lightText:!0}))))}},552404:(e,t,a)=>{a.r(t),a.d(t,{PromoReviewPage:()=>E});var r=a(411855),s=a(188507),n=a(988261),l=a(881690),i=a(135876),o=a(939863),m=a(403491),d=a(738269),c=a(995852),_=a(758259),u=a(672517),p=a(820113),g=a(257512);function E(e){let{selectedView:t,promo:a}=e,E=(0,s.wA)(),h=(0,g.Ud)({teamId:t.teamId}),v=()=>{(0,n._H)(),E(c.Ay({promo:null})),E(d.$T(e.selectedView.previousView||{view:"team",teamId:t.teamId}))},f=()=>{E(_.S_({teamId:t.teamId,teamName:t.teamName,promoCode:a?.code||"",onSuccess:v,onError:v}))};return a?r.createElement(u.fu,{name:"Redeem Promo Code > Confirm",properties:{teamId:t.teamId}},r.createElement("div",{className:"promo_modals--promoReviewInner---J-fs"},r.createElement("div",{className:"promo_modals--cancelRow--nBn1h"},r.createElement("button",{type:"button",className:"promo_modals--cancelButton--Rbgfe text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:v},(0,o.tx)("promo.promo_review.cancel"))),r.createElement("div",{className:"promo_modals--promoReviewTitle--e7s5s text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.redeem_your_days_of_free_professional_plan",{days:a.promo_value})),r.createElement("div",{className:"promo_modals--promoReviewDescription--aLeG8 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,o.tx)("promo.promo_review.any_additional_editors_invited_to_selected_view_team_name_will_also_be_free_of_charge_for_the_next_days.seat_rename",{teamName:t.teamName,days:a.promo_value})),r.createElement("div",null,r.createElement(i.x,{isLoading:h},()=>r.createElement(l.o,null,r.createElement(m.d,{selectedView:t,onClickConfirm:f,currency:(0,p.LN)(),canSeeBillingAddressExp:!1})))))):(v(),null)}},943083:(e,t,a)=>{a.d(t,{b:()=>o});var r=a(411855),s=a(946689),n=a(939863),l=a(501114),i=a(486184);function o({disableInvites:e,collaborators:t,setCollaborators:a,willSendInvites:o,skipInviteStep:m}){let d=(e,r)=>{if(r>=t.length)return;let s=[...t];s[r]=e,a(s)};return r.createElement(r.Fragment,null,r.createElement("div",{className:i.Fb},(0,n.tx)("pro_cart.add_collaborators.add_collaborators_to_your_team")),r.createElement(s.Kz,{multiple:.5}),r.createElement("div",{className:i.b0},(0,n.tx)("pro_cart.add_collaborators.well_add_them_to_your_team")),r.createElement(s.Kz,{multiple:4}),r.createElement("div",{style:l.sx.flex.flexColumn.add({maxWidth:"400px"}).mlAuto.mrAuto.gap12.$},t.map((e,t)=>r.createElement(s.il,{key:`collaborator-email-input-${t}`,value:e,onChange:e=>d(e.target.value,t),placeholder:(0,n.t)("pro_cart.add_collaborators.email")})),r.createElement(s.Us,{onClick:()=>{let e=[...t];e.push(""),a(e)},trusted:!0,style:l.sx.alignLeft.font14.fontMedium.$},(0,n.tx)("pro_cart.add_collaborators.add_another"))),r.createElement("div",{style:l.sx.flex.flexColumn.itemsCenter.mlAuto.mrAuto.mt24.gap24.fontMedium.font14.$},r.createElement(s.vd,{disabled:!!e,style:l.sx.font14.add({height:"44px",width:"110px"}).$,onClick:o},(0,n.tx)("pro_cart.add_collaborators.sent_invites")),r.createElement(s.Ph,{trusted:!0,onClick:m,style:l.sx.colorTextSecondary.alignCenter.$},(0,n.tx)("pro_cart.add_collaborators.skip_for_now"))))}},488491:(e,t,a)=>{a.d(t,{T:()=>o});var r=a(411855),s=a(939863),n=a(625223),l=a(206193),i=a(486184);function o({chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,currency:o,updateCurrency:m,upgradeExistingTeam:d,parentRef:c}){return r.createElement("div",{ref:c},r.createElement("div",{className:i.Fb},(0,s.tx)("pro_cart.choose_plan.choose_a_plan_for_your_new_team")),r.createElement("div",{className:i.dX},r.createElement(n.O,{currency:o,chooseStarterPlan:e,chooseProPlan:t,chooseOrgPlan:a,updateCurrency:m,upsellSource:l.b.CREATE_NEW_PAID_TEAM,withUpgradeExistingTeamOption:d,parentRef:c})))}},403491:(e,t,a)=>{a.d(t,{d:()=>v});var r=a(411855),s=a(188507),n=a(737947),l=a(966712),i=a(946689),o=a(493323),m=a(939863),d=a(865618),c=a(349410),_=a(6988),u=a(176824),p=a(820113),g=a(622139),E=a(237107),h=a(486184);function v(e){let[t,a]=r.useState(!1),v=new p.vr(e.currency),[S,T]=r.useState(!1),N=(0,s.d4)(e=>e.payment),x=(0,s.d4)(e=>e.payment,(e,t)=>S||e===t),w=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId].name:e.teamName)??"",b=(0,c.Ik)(),C=N.displayName||w,A=N.legalName||w,I=N.billingPeriod===g.tY.STUDENT,P=!!(0,u.p)(e.selectedView,N),D=P||I,k=N.submitPending||!P&&!t,{estimatedDesignCost:M,estimatedWhiteboardCost:O}=(0,u.Q)(),R=N.numWhiteboardEditors,B=M(N.numDesignEditors,N.billingPeriod,e.currency),L=O(R,N.billingPeriod,e.currency),F=D?0:N.taxes?.total||B+L,V=new URLSearchParams(n.Ay.location.search),U=V.get("onCompleteRedirectFileKey"),j=V.get("onCompleteRedirectNodeId"),{trackingDescriptor:z,buttonText:G,finePrint:$}=(0,E.V8)({isPromo:P,isEducationTeam:I,claimsEndAtDate:N.promo?.claims_end_at}),K=async t=>{t.preventDefault(),await T(!0),e.onClickConfirm()},Y=(0,l.kc)().pro_team_business_names;return r.createElement("div",{className:Y?h.HX:h.db},Y&&r.createElement("div",{className:h.PT},r.createElement(_.x,{displayName:C??"",legalName:A??"",canSeeBillingAddressExp:e.canSeeBillingAddressExp,billingAddress:e.billingAddress,shippingAddress:e.shippingAddress,variant:"team"})),r.createElement("div",{className:Y?h.Bo:void 0},r.createElement("div",{className:h.TV,"data-testid":"review-step-upgrade-title"},(0,m.tx)(I?"edu.checkout_team_name":b?N.billingPeriod===g.tY.ANNUAL?"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_yearly":"pro_cart.review.exp_sticker_shock.upgrade_team_name_to_a_professional_team_monthly":"pro_cart.review.upgrade_team_name_to_a_professional_team",{teamName:w})),r.createElement(E.$c,{payment:x,currency:e.currency,isPromo:P,isEducationTeam:I,hasCartStickerShock:b}),r.createElement("div",{className:h.pV}),r.createElement(i.Kz,{multiple:2}),x.taxes&&!!e.billingAddress&&r.createElement(r.Fragment,null,r.createElement(E.Wy,{mainText:(0,m.tx)("pro_cart.info.subtotal"),priceText:v.formatMoney(P?0:x.taxes.sub_total||0,{showCents:!0}),"data-testid":"subtotal-summary"}),r.createElement(i.Kz,{multiple:1.5}),r.createElement(E.Wy,{mainText:(0,m.tx)("pro_cart.review.tax"),priceText:v.formatMoney(x.taxes?.tax_total||0,{showCents:!0}),subText:(0,m.tx)("pro_cart.review.tax_percent",{taxPercent:x.taxes.lines[0]?.tax_percent||0}),"data-testid":"tax-summary"}),r.createElement(i.Kz,{multiple:1.5})),r.createElement(E.Wy,{"data-testid":"confirm-total-summary",mainText:I?(0,m.tx)("pro_cart.review.total"):(0,m.tx)("pro_cart.review.total_due_today"),priceText:v.formatMoney(F,{showCents:!0,showFullFormat:(0,p._Z)()}),subText:P?(0,m.tx)("pro_cart.review.you_will_not_be_charged_during_the_free_period",{days:x.promo.promo_value}):void 0}),r.createElement(i.Kz,{multiple:2}),r.createElement("div",null,$,!P&&r.createElement("div",{className:h.Gn},r.createElement(d.S,{checked:t,onChange:e=>{a(e.currentTarget.checked)}}),r.createElement("p",null," ",(0,m.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:r.createElement(E.BO,null),privacyLink:r.createElement(f,null),cancellationLink:r.createElement(y,null)})))),r.createElement(i.Kz,{multiple:2.5}),r.createElement(i.Kz,{multiple:2.5}),r.createElement(i.vd,{className:h.fK,onClick:K,trackingProperties:{teamId:e.selectedView.teamId,inPublishDraftExp:!!(j&&U),trackingDescriptor:z},disabled:k,dataTestId:"confirm-purchase-button"},N.submitPending?r.createElement(o.kt,{className:h.S}):G)))}function f(){return r.createElement(i.Us,{href:"/privacy",target:"_blank",trusted:!0},(0,m.tx)("pro_cart.review.privacy_policy"))}function y(){return r.createElement(i.Us,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",target:"_blank",trusted:!0},(0,m.tx)("pro_cart.review.cancellation_policy"))}},707570:(e,t,a)=>{a.d(t,{I:()=>c,y:()=>_});var r=a(411855),s=a(946689),n=a(452441),l=a(163023),i=a(939863),o=a(101505),m=a(486184);if(443==a.j)var d=a(489262);var c=(e=>(e.STARTER="starter",e.PRO="pro",e.ORG="org",e))(c||{});function _({type:e,teamName:t,setTeamName:a,onNext:c,upgradeExistingTeam:_,promo:u}){let p={starter:{title:(0,i.tx)("all_carts.create_team.create_a_new_team"),subtitle:(0,i.tx)("all_carts.create_team.after_creating_a_team"),placeholder:(0,i.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:(0,i.tx)("all_carts.create_team.create_team"),trackingDescriptor:o.c.SEND_INVITES},pro:{title:(0,i.tx)("pro_cart.create_team.create_a_professional_team"),subtitle:(0,i.tx)("pro_cart.create_team.itll_have_unlimited_files_and_collaborative_features"),placeholder:(0,i.t)("pro_cart.create_team.enter_a_name_for_your_working_group"),next:u?(0,i.tx)("pro_cart.sidebar.next_review"):(0,i.tx)("pro_cart.create_team.next_set_editors.seat_rename"),trackingDescriptor:u?o.c.REVIEW:o.c.SET_EDITORS},org:{title:(0,i.tx)("org_self_serve.create_team_step.create_an_org_team"),subtitle:(0,i.tx)("org_self_serve.create_team_step.itll_have_unlimited_files_and_advanced_security"),placeholder:(0,i.t)("org_self_serve.create_team_step.enter_a_name_for_your_team"),next:(0,i.tx)("org_self_serve.create_team_step.next_select_team"),trackingDescriptor:o.c.SELECT_TEAM}}[e];return r.createElement(r.Fragment,null,r.createElement("div",{className:m.Fb},p.title),r.createElement(s.Kz,{multiple:.5}),r.createElement("div",{className:m.b0},p.subtitle),r.createElement("div",{className:m.F0},r.createElement(l.B,{svg:d.A,className:m.Pr}),r.createElement(n.L,{className:m.Zy,onChange:e=>a(e.target.value),value:t,placeholder:p.placeholder})),r.createElement(s.vd,{className:m.eA,onClick:c,trackingProperties:{trackingDescriptor:p.trackingDescriptor},disabled:!t.trim()},p.next),!!_&&r.createElement(s.Us,{className:m.x,onClick:_,trusted:!0,trackingProperties:{trackingDescriptor:o.c.UPGRADE_EXISTING_TEAM}},(0,i.tx)("pro_cart.create_team.upgrade_an_existing_team_instead")))}},140841:(e,t,a)=>{a.d(t,{y:()=>_});var r=a(411855),s=a(188507),n=a(921619),l=a(946689),i=a(939863),o=a(501114),m=a(843309),d=a(397477),c=a(486184);function _(e){let{error:t,errorCode:a}=(0,s.d4)(e=>e.payment),_=!!t&&null===a,u=!!e.error;return r.createElement(r.Fragment,null,r.createElement("div",{className:c.Fb},(0,i.tx)("pro_cart.payment.enter_payment_details_title")),r.createElement(l.Kz,{multiple:3}),r.createElement("div",{style:o.sx.add({width:"416px",margin:"auto"}).$},_&&r.createElement("div",null,r.createElement(n.I,{marginTop:0,message:t}),u&&r.createElement(l.Kz,{multiple:1.5})),_&&!u&&r.createElement(l.Kz,{multiple:2}),r.createElement("div",{className:c.P_},r.createElement("div",{style:o.sx.if(e.error?.code===m.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,o.sx.font14.add({marginTop:"92px"})).$},r.createElement(d.F,{createPaymentElement:e.createPaymentElement,unmountPaymentElement:e.unmountPaymentElement,billingAddress:e.billingAddress,updateBillingAddress:e.updateBillingAddress,legalCompanyName:e.legalCompanyName,updateLegalCompanyName:e.updateLegalCompanyName,nameOnPaymentMethod:e.nameOnPaymentMethod,updateNameOnPaymentMethod:e.updateNameOnPaymentMethod,shippingAddress:e.shippingAddress,updateShippingAddress:e.updateShippingAddress,error:e.error,vatGstId:e.vatGstId,onVatGstIdChange:e.onVatGstIdChange,regionalVatGstId:e.regionalVatGstId,onRegionalVatGstIdChange:e.onRegionalVatGstIdChange,paymentMethodType:e.paymentMethodType,isCommunityCheckout:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp,isCheckout:!0})))))}},394802:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageBillingRemodel:()=>et});var r=a(411855),s=a(188507),n=a(675678),l=a(133537),i=a(737947),o=a(966712);if(443==a.j)var m=a(988261);var d=a(776621),c=a(650322),_=a(192437),u=a(946689),p=a(455057),g=a(135876),E=a(881388),h=a(939863),v=a(898211),f=a(320108),y=a(738269),S=a(507877),T=a(662275),N=a(995852),x=a(758259),w=a(931828),b=a(349410),C=a(672517),A=a(843309),I=a(176824),P=a(195971),D=a(964258),k=a(488983),M=a(594901),O=a(860178),R=a(801387),B=a(99506),L=a(820113),F=a(243987),V=a(257512),U=a(428467),j=a(707465),z=a(206193),G=a(622139),$=a(637590),K=a(392340),Y=a(943083),X=a(488491),W=a(403491),H=a(707570),q=a(140841),Q=a(55992),J=a(634038),Z=a(486184);function ee(e){let t;let a=(0,O.iZ)(),_=a?.id,k=(0,o.DC)(),ee=(0,s.d4)(e=>e.payment),et=(0,s.d4)(e=>e.dropdownShown),ea=(0,s.d4)(e=>e.teams),er=e.selectedView.paymentStep,es=r.useRef(null),[en,el]=(0,r.useState)(k?.team_name??""),[ei,eo]=(0,r.useState)(P.kt),em=(0,F.PS)((0,M.FC)()),ed=!!(0,o.kc)().redirect_starter_team_loophole&&!(0,o.kc)().close_starter_team_loophole&&(null===e.selectedView.teamId||e.selectedView.teamFlowType!==$.SC.UPGRADE_EXISTING_TEAM),[ec,e_]=(0,r.useState)(k?.currency||ee.currency||(0,L.LN)()),eu=e=>{e_(e),e$(N.MN({currency:e}))},ep=ed?G.tY.ANNUAL:ee.billingPeriod,{numDesignEditors:eg,numWhiteboardEditors:eE,editorStatusChanges:eh}=ee,{ignoreCurrentPlan:ev}=e.selectedView,ef=e.selectedView.teamId;(0,r.useEffect)(()=>{ed&&(i.Ay.redirect("/"),(0,d.$D)(n.FigmaTeam.MONETIZATION_UPGRADES,Error("Starter loophole pathway entered, redirecting back to default"),{extra:{...e.selectedView}}))},[e.selectedView,ed]);let ey=(0,s.d4)(t=>(0,j.Np)(t,{...e.selectedView,paymentStep:G.tn.CONFIRM_PAY})),eS=(0,s.d4)(t=>(0,j.Np)(t,{...e.selectedView,paymentStep:G.tn.PAYMENT_AND_ADDRESS})),eT=(0,b.Mh)(),{estimatedDesignCost:eN,estimatedWhiteboardCost:ex}=(0,I.Q)(),ew=eN(eg,ep,ec)+ex(eE,ep,ec),{createPaymentElement:eb,unmountPaymentElement:eC,savePayment:eA,billingAddress:eI,updateBillingAddress:eP,shippingAddress:eD,updateShippingAddress:ek,customerLegalName:eM,setCustomerLegalName:eO,nameOnPaymentMethod:eR,setNameOnPaymentMethod:eB,vatGstId:eL,setVatGstId:eF,regionalVatGstId:eV,setRegionalVatGstId:eU,paymentMethodType:ej,error:ez}=(0,A.Op)({setupIntentParams:{redirect_url:ey,error_redirect_url:eS,subtotal_estimate:ew,currency:ec},customerInfo:{teamId:ef},paymentFlowSource:A.wn.PRO_UPGRADE,currency:ec,billingPeriod:ep,defaultCountry:(0,L.ub)(),initialBillingAddress:k?.billing_address,initialNameOnPaymentMethod:k?.name_on_payment_method,initialShippingAddress:k?.shipping_address,initialCustomerLegalName:k?.customer_legal_name,initialVatGstId:k?.vat_gst_id,initialRegionalVatGstId:k?.regional_vat_gst_id,teamName:k?.team_name||en,canSeeBillingAddressExp:eT,isCheckout:!0}),eG=ez?.code===A.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,e$=(0,s.wA)(),eK=(0,V.Ud)({teamId:ef,canSeeBillingAddressExp:eT}),eY=()=>{e$(y.$T({...e.selectedView,paymentStep:G.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:ev}))};(0,P.pI)({loadingPaidEditors:eK,teamId:ef,teamName:ef?void 0:en,setTeamName:ef?void 0:el,collaborators:ef||e.selectedView.teamFlowType!==$.SC.CREATE?void 0:ei,setCollaborators:ef||e.selectedView.teamFlowType!==$.SC.CREATE?void 0:eo});let eX=(0,s.d4)(e=>e.currentUserOrgId),eW=ev?null:eX,eH=(0,s.d4)(e=>eW?e.orgById[eW]:null),eq=(0,K.Q)({currentOrgId:eW,currentTeamId:null}),eQ=eq.data?.currentUser,eJ=eQ?.baseOrgUser?.workspaceUsers,eZ=eJ?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:e0}=(0,R.l6)(eH,eZ),e1=(0,s.d4)(e=>(0,U.isOrgUserExternallyRestrictedFromState)(e));(0,r.useEffect)(()=>{er===G.tn.PAYMENT_AND_ADDRESS&&eG&&eY()});let e2=(0,s.d4)(e=>!!e.user&&(0,c.cn)(e.user));(0,r.useEffect)(()=>{e2&&e.selectedView.isEduTeam?e$(N.Lo({billingPeriod:G.tY.STUDENT})):e.selectedView.isEduTeam&&e$(N.Lo({billingPeriod:G.tY.UNSPECIFIED}))},[e$,e.selectedView.isEduTeam,e2]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===$.SC.CREATE_AND_UPGRADE&&(e1||e0===R.z4.TEAM_CREATION_CONTROL)&&(i.Ay.redirect("/"),e$(E.s.error((0,h.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,e1,e0,e$]);let e9=ee.currencyToSwitch;(0,r.useEffect)(()=>{e9&&e_(e9)},[e_,e9]);let e8=ep===G.tY.STUDENT,e6=ei.filter(e=>e&&e.trim()).map(e=>e.trim()),e5=e6.filter(e=>!(0,l.xf)(e)),e3=!!a&&e6.filter(e=>e===a.email).length>0,e4=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),s=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let n=(0,Q.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,ep,ee.promo,e.selectedView.planType||$.Sc.UNDETERMINED);er===G.tn.CREATE_TEAM&&(el(en.trim()),e$(y.$T({...e.selectedView,teamId:null,paymentStep:n,ignoreCurrentPlan:ev}))),er===G.tn.ADD_COLLABORATORS&&(e5.length?e$(E.s.error((0,h.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:e5[0]}))):e3?e$(E.s.error((0,h.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):e$(y.$T({...e.selectedView,paymentStep:n,ignoreCurrentPlan:ev}))),er===G.tn.CHOOSE_PLAN?e8?e$(y.$T({...e.selectedView,paymentStep:n,billingPeriod:G.tY.STUDENT,ignoreCurrentPlan:ev})):(e$(N.Je({editorStatusChanges:eh})),e$(y.$T({...e.selectedView,paymentStep:n,billingPeriod:ee.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:s}}:{},ignoreCurrentPlan:ev}))):er===G.tn.PAYMENT_AND_ADDRESS&&(e$(N.I2({submitPending:!0})),await eA(),e$(N.I2({submitPending:!1})))},e7=e.selectedView.teamFlowType===$.SC.CREATE?()=>{e$((0,D.KQ)({teamName:en,orgAccess:B.bU.PUBLIC,inviteEmails:e6,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,P.Al)(a?.id)},ignoreCurrentPlan:ev}))}:void 0;(e.selectedView.teamFlowType===$.SC.CREATE_AND_UPGRADE||e.selectedView.teamFlowType===$.SC.UPGRADE_EXISTING_TEAM)&&(1===em.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=$.SC.UPGRADE_EXISTING_TEAM;e$(y.$T({...e.selectedView,teamFlowType:a,teamId:em[0].id,paymentStep:(0,Q.kR)(e.selectedView.paymentStep,a,t||null,ee.promo,$.Sc.TEAM,G.tn.CHOOSE_PLAN),planType:$.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:ev}))}:em.length>1&&(t=e=>{e&&e$(N.Lo({billingPeriod:e})),e$((0,T.to)({type:v.dR,data:{plan:v.In.PRO,upsellSource:z.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let te=()=>{let t=()=>{(0,o.sj)(),(0,V.Mt)(e$),(0,$.h5)(e.selectedView.teamFlowType)&&null===ef&&(0,P.Al)(_)};if(e.selectedView.teamId&&e8)e$(N.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&ee.promo){let a=e.selectedView.teamId,r=(0,o.kc)().ps_benchmark;e$(x.S_({teamId:a,teamName:ea[a].name,promoCode:ee.promo?.code||"",onSuccess:()=>{t(),(0,m._H)(),e$(N.Ay({promo:null})),r&&_?e.selectedView.previousView?y.$T(e.selectedView.previousView):S._l({workspace:{userId:_,orgId:null,teamId:a},view:{view:"allProjects"}}):e$(y.$T(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,m._H)(),e$(N.Ay({promo:null})),e$(y.$T({...e.selectedView,paymentStep:G.tn.PLAN_COMPARISON,ignoreCurrentPlan:ev}))}}))}else e$(w.b({completed_pro_cart_flow:!0})),e$(N.I2({submitPending:!0})),e$((0,x.gk)({teamId:e.selectedView.teamId,selectedCurrency:ec,teamName:en,teamFlowType:e.selectedView.teamFlowType,invites:e6,hasSelectedStudentTeam:e8,onSuccess:t,promotionCodeId:null}))},tt=new URLSearchParams(i.Ay.location.search),ta=tt.get("onCompleteRedirectFileKey"),tr=tt.get("onCompleteRedirectNodeId"),ts=a&&P.lX({teamId:ef,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===$.SC.CREATE_AND_UPGRADE&&(e1||e0===R.z4.TEAM_CREATION_CONTROL)?r.createElement(r.Fragment,null):r.createElement(C.fu,{name:"Upgrade Team",properties:{teamId:e.selectedView.teamId,teamFlowType:e.selectedView.teamFlowType,planType:e.selectedView.planType,step:er,currency:ec,inPublishDraftExp:!!(ta&&tr)}},r.createElement("div",{className:Z.im,"data-testid":"team-upgrade-v2"},r.createElement(Q.vU,{selectedView:e.selectedView}),r.createElement("div",{className:Z.Jr},r.createElement("div",{className:Z.uz,ref:es},r.createElement(u.Kz,{multiple:4}),er===G.tn.PLAN_COMPARISON&&r.createElement(X.T,{chooseStarterPlan:e7,chooseProPlan:t=>{e$(N.Lo({billingPeriod:t}));let a=(0,$.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:$.SC.CREATE_AND_UPGRADE;e$(y.$T({...e.selectedView,teamFlowType:a,paymentStep:(0,Q.kR)(e.selectedView.paymentStep,a,t,ee.promo,$.Sc.TEAM),billingPeriod:t,planType:$.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:ev}))},chooseOrgPlan:()=>{e$(N.Bq({currency:ec,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:en,inviteEmails:e6,previousView:e.selectedView},upsellSource:z.b.UPGRADE_NEW_TEAM_V2}))},currency:ec,updateCurrency:e=>eu(e),upgradeExistingTeam:t,parentRef:es}),er===G.tn.CREATE_TEAM&&r.createElement(H.y,{type:e.selectedView.teamFlowType===$.SC.CREATE?H.I.STARTER:H.I.PRO,teamName:en,setTeamName:el,onNext:e4,upgradeExistingTeam:t?()=>t?.(ep):void 0,promo:ee.promo}),er===G.tn.ADD_COLLABORATORS&&r.createElement(Y.b,{disableInvites:!e6.length,collaborators:ei,setCollaborators:eo,willSendInvites:e4,skipInviteStep:()=>{if(eo(P.kt),_){let e=(0,P.lX)({teamId:null,userId:_});e&&(0,P.dT)(_,{...e,newCollaborators:P.kt})}e$(y.$T({...e.selectedView,paymentStep:G.tn.PLAN_COMPARISON,ignoreCurrentPlan:ev}))}}),er===G.tn.CHOOSE_PLAN&&!eK&&e.selectedView.teamId&&r.createElement(f.Uq,{teamId:e.selectedView.teamId,currency:ec,initCampfireSeats:ee.campfireSeats,onUpdateCampfireSeats:e=>e$(N.qU({campfireSeats:e}))}),er===G.tn.PAYMENT_AND_ADDRESS&&r.createElement(r.Fragment,null,r.createElement(q.y,{billingAddress:eI,updateBillingAddress:eP,shippingAddress:eD,updateShippingAddress:ek,legalCompanyName:eM,updateLegalCompanyName:eO,nameOnPaymentMethod:eR,updateNameOnPaymentMethod:eB,createPaymentElement:eb,unmountPaymentElement:eC,error:ez,vatGstId:eL,onVatGstIdChange:eF,regionalVatGstId:eV,onRegionalVatGstIdChange:eU,paymentMethodType:ej,isCommunityCheckout:!1,canSeeBillingAddressExp:eT,isCheckout:!0})),er===G.tn.CONFIRM_PAY&&r.createElement(r.Fragment,null,r.createElement("div",{className:Z.Fb},(0,h.tx)("pro_cart.review.lets_make_sure_everything_looks_right")),r.createElement(u.Kz,{multiple:3}),ts&&r.createElement("div",{className:Z.vK},r.createElement(p._,{color:p.S.INFORMATION,text:(0,h.t)("pro_cart.review.extra_validation")})),ts&&r.createElement(u.Kz,{multiple:2}),r.createElement(g.x,{isLoading:eK},()=>r.createElement(W.d,{selectedView:e.selectedView,teamName:en,onClickConfirm:te,billingAddress:eI,shippingAddress:eD,canSeeBillingAddressExp:eT,currency:ec}))),r.createElement(u.Kz,{multiple:9})),r.createElement(J.S,{selectedView:e.selectedView,onNext:e4,isLoading:eK,isButtonDisabled:eG,currency:ec,updateCurrency:e=>eu(e),dropdownShown:et}))))}function et(e){return(0,o.kc)().cart_error_boundaries?r.createElement(ea,{...e}):r.createElement(ee,{...e})}function ea(e){return r.createElement(_.tH,{sentryTags:{area:n.FigmaTeam.MONETIZATION_UPGRADES},boundaryKey:"TeamUpgradeBillingRemodel",fallback:_.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:k.y4},r.createElement(ee,{...e}))}},237107:(e,t,a)=>{a.d(t,{$c:()=>A,BO:()=>I,ME:()=>N,U1:()=>T,V8:()=>h,Wy:()=>w,X6:()=>x,d6:()=>f,mx:()=>v});var r=a(411855),s=a(188507),n=a(629019),l=a.n(n),i=a(281381),o=a(485727),m=a(946689),d=a(939863),c=a(101505),_=a(176824),u=a(99506),p=a(820113),g=a(622139),E=a(486184);function h({isPromo:e,isEducationTeam:t,claimsEndAtDate:a}){var s;return e?{trackingDescriptor:c.c.START_PRO_PLAN_FOR_FREE,buttonText:(0,d.tx)("pro_cart.review.start_professional_plan_for_free"),finePrint:r.createElement(r.Fragment,null,(0,d.tx)("pro_cart.review.offer_redeem_agree",{termsOfServiceLink:r.createElement(I,null)}),a&&r.createElement(r.Fragment,null," ",(0,d.tx)("pro_cart.review.redeem_offer_by",{date:(s=new Date(a),new Intl.DateTimeFormat("en-US",{month:"long",day:"numeric",year:"numeric"}).format(s))})))}:t?{trackingDescriptor:c.c.COMPLETE_UPGRADE,buttonText:(0,d.tx)("pro_cart.review.complete_upgrade"),finePrint:(0,d.tx)("pro_cart.review.all_editors_on_an_education_team_must_be_verified.seat_rename")}:{trackingDescriptor:c.c.COMPLETE_PURCHASE,buttonText:(0,d.tx)("pro_cart.review.complete_purchase"),finePrint:(0,d.tx)("pro_cart.review.your_subscription_will_automatically_renew_without_link.seat_rename")}}function v(e,t,a,r,s){let n=new p.vr(s).formatMoney(r,{showCents:!a}),l=(0,d.t)("all_carts.num_editors.seat_rename",{numEditors:t}),i=(0,d.t)("all_carts.plural_months",{months:e?12:1});return(0,d.t)("all_carts.cost_equation",{money:n,editors:l,billingTime:i})}function f({currentBillingPeriod:e,numEditors:t,noCents:a,shouldStrikethroughMonthlyUnitCostIfAnnual:s,currency:n}){let{getDesignUnitCost:l}=(0,_.Q)();return e===g.tY.STUDENT?null:r.createElement(y,{isAnnual:e===g.tY.ANNUAL,numEditors:t,noCents:a,unitCost:l(e,n),currency:n,monthlyUnitCostForStrikethrough:s?l(g.tY.MONTHLY,n):void 0})}function y({isAnnual:e,numEditors:t,noCents:a,unitCost:s,monthlyUnitCostForStrikethrough:n,currency:l}){let i=new p.vr(l),o=i.formatMoney(s,{showCents:!a}),m=(0,d.t)("all_carts.num_editors.seat_rename",{numEditors:t}),c=(0,d.t)("all_carts.plural_months",{months:e?12:1});return"number"==typeof n&&e?(0,d.tx)("all_carts.cost_equation_strikethrough_unit_price",{strikethroughUnitPrice:r.createElement("span",{className:E.of},i.formatMoney(n,{showCents:!a})),money:o,editors:m,billingTime:c}):(0,d.tx)("all_carts.cost_equation",{money:o,editors:m,billingTime:c})}function S({currentBillingPeriod:e,numEditors:t,noCents:a,shouldStrikethroughMonthlyUnitCostIfAnnual:s,currency:n}){let{getWhiteboardUnitCost:l}=(0,_.Q)();return r.createElement(y,{isAnnual:e===g.tY.ANNUAL,numEditors:t,unitCost:l(e,n),noCents:a,currency:n,monthlyUnitCostForStrikethrough:s?l(g.tY.MONTHLY,n):void 0})}function T(e,t){return Math.ceil((1-12*e/(12*t))*100)}function N({noCents:e=!0,shouldStrikethroughMonthlyUnitCostIfAnnual:t,currency:a,numEditors:n}){let l=(0,s.d4)(e=>e.payment.billingPeriod),i=(0,s.d4)(e=>e.payment.numWhiteboardEditors);return l===g.tY.STUDENT?null:r.createElement(S,{currentBillingPeriod:l,numEditors:n||i,noCents:e,currency:a,shouldStrikethroughMonthlyUnitCostIfAnnual:t})}function x({editorType:e,numEditors:t,currency:a}){let r;let{estimatedDesignCost:s,estimatedWhiteboardCost:n}=(0,_.Q)();r="design"===e?s(t,g.tY.MONTHLY,a):n(t,g.tY.MONTHLY,a);let l=new p.vr(a);return(0,d.tx)("edu.cost_per_month",{cost:l.formatMoney(r)})}function w({"data-testid":e,discountPercentage:t,mainText:a,priceText:s,strikethroughPriceText:n,strikethroughPriceClassName:c,subText:_,showDevModeIncludedText:u}){let p=t=>void 0===e?void 0:`${e}-${t}`;return r.createElement("div",{"data-testid":e},r.createElement("div",{className:E.vg,"data-testid":p("cost-row")},r.createElement("span",{"data-testid":p("main-text")},a),r.createElement("span",{"data-testid":p("price-section")},n&&r.createElement(r.Fragment,null,r.createElement("span",{className:l()(c,E.hy,E.sH),"data-testid":p("strikethrough-price-text")},n),"\xa0"),r.createElement("span",{className:E.sH,"data-testid":p("price-text")},s))),u&&r.createElement(r.Fragment,null,r.createElement(m.Kz,{multiple:.2}),r.createElement(o.G,null),r.createElement(m.Kz,{multiple:.1})),r.createElement("div",{className:E.q9,"data-testid":p("sub-row")},r.createElement("span",{"data-testid":p("sub-text")},_),t&&r.createElement("span",{"data-testid":p("discount-percentage")},r.createElement(i.Ex,{className:E.qS,color:i.zE.SUCCESS,size:i.vj.LARGE,subtle:!0,text:(0,d.tx)("pro_cart.sidebar.annual_savings_percentage",{percentage:t})}))))}function b({payment:e,currency:t,isPromo:a,isEducationTeam:s,...n}){let l,i,o,m,c;let{estimatedDesignCost:u,estimatedWhiteboardCost:E}=(0,_.Q)(),h=new p.vr(t),{editorType:v}=n;return"design"===v?(i=e.numDesignEditors,o=C(g.Ye,e.taxes?.lines)??u(i,e.billingPeriod,t),l=(0,d.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:i}),c=s?r.createElement(x,{editorType:v,currency:t,numEditors:e.numDesignEditors}):null,s||n.hasCartStickerShock||(m=r.createElement(f,{currentBillingPeriod:e.billingPeriod,numEditors:e.numDesignEditors,noCents:!1,currency:t}))):(i=n.numPaidFigjamEditors,o=C(g.MC,e.taxes?.lines)??E(i,e.billingPeriod,t),m=!s&&!n.hasCartStickerShock&&r.createElement(N,{noCents:!1,currency:t,numEditors:i}),l=(0,d.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:i}),c=s?r.createElement(x,{editorType:v,currency:t,numEditors:e.numWhiteboardEditors}):null),a&&(m=(0,d.tx)("pro_cart.review.free_for_days",{days:e.promo?.promo_value}),c=h.formatMoney(o,{showCents:!0})),r.createElement(w,{"data-testid":`confirm-${v}-summary`,mainText:l,strikethroughPriceText:c,priceText:h.formatMoney(a||s?0:o,{showCents:!0}),subText:m,showDevModeIncludedText:"design"===v})}function C(e,t){return t?.filter(t=>e.includes(t.product)).reduce((e,t)=>e+t.sub_total,0)}function A(e){return r.createElement(r.Fragment,null,r.createElement(b,{...e,editorType:u._Y.DESIGN}),r.createElement(m.Kz,{multiple:2}),r.createElement(b,{...e,editorType:u._Y.WHITEBOARD,numPaidFigjamEditors:e.payment.numWhiteboardEditors}),r.createElement(m.Kz,{multiple:2}))}function I(){return r.createElement(m.Us,{href:"/tos",target:"_blank",trusted:!0},(0,d.tx)("pro_cart.review.tos"))}},988780:(e,t,a)=>{a.r(t),a.d(t,{TeamUpgradePageV2:()=>eE});var r=a(411855),s=a(188507),n=a(675678),l=a(133537),i=a(737947),o=a(966712),m=a(988261),d=a(776621),c=a(650322),_=a(192437),u=a(946689),p=a(455057),g=a(135876),E=a(881388),h=a(939863),v=a(898211),f=a(738269),y=a(507877),S=a(662275),T=a(995852),N=a(758259),x=a(931828),w=a(349410),b=a(672517),C=a(843309),A=a(176824),I=a(195971),P=a(964258),D=a(488983),k=a(594901),M=a(860178),O=a(801387),R=a(99506),B=a(820113),L=a(243987),F=a(257512),V=a(428467),U=a(707465),j=a(206193),z=a(622139),G=a(637590),$=a(392340),K=a(943083),Y=a(634832),X=a(297666),W=a(485727),H=a(163023),q=a(501114),Q=a(392592),J=a(67294),Z=a(237280),ee=a(720647),et=a(36816),ea=a(498606),er=a(928491),es=a(486184),en=a(501191);let el="564px",ei=(0,X.s)((e,t)=>t(Q.F.enqueue({message:e})));function eo(e){let t=(0,s.d4)(t=>{let a=e.selectedView.teamId?t.teamUserByTeamId[e.selectedView.teamId]||{}:null;return(0,L.BR)(a,t.user)}),a=(0,s.d4)(e=>e.payment),n=(0,s.d4)(t=>e.selectedView.teamId?t.teams[e.selectedView.teamId]:null),l=a.editorStatusChanges,i=(0,s.wA)(),o=a.billingPeriod===z.tY.STUDENT,{increment:m,decrement:d}=(0,F.$7)(),[c,_]=(0,r.useState)(!0),{getDesignUnitCost:E,getWhiteboardUnitCost:v}=(0,A.Q)(),f=new B.vr(e.currency),y=(0,r.useCallback)((e,t,a)=>{let r=[...l[t][e]];r.splice(a,1),i(T.Je({editorStatusChanges:{...l,[t]:{...l[t],[e]:r}}}))},[i,l]),N=(e,t,a)=>{switch(e){case R._Y.WHITEBOARD:switch(t){case"upgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_figjam_editor.seat_rename",{email:a});case"downgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_figjam_viewer",{email:a});default:(0,Y.assertNever)(t)}case R._Y.DESIGN:case R._Y.SLIDES:case R._Y.COOPER:case R._Y.SITES:switch(t){case"upgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_design_editor.seat_rename",{email:a});case"downgrade":return(0,h.t)("pro_cart.adjust_editors.will_become_design_viewer",{email:a});default:(0,Y.assertNever)(t)}default:(0,Y.assertNever)(e)}},x=(0,r.useCallback)((e,t)=>()=>{let a;if(_(!1),-1!==(a=l.upgrade[e].indexOf(t.id)))y(e,"upgrade",a),ei(N(e,"downgrade",t.email),i),d(e,t.email);else if(-1!==(a=l.downgrade[e].indexOf(t.id)))y(e,"downgrade",a),ei(N(e,"upgrade",t.email),i),m(e,t.email);else{let a=t["whiteboard"===e?"whiteboard_paid_status":"design_paid_status"]===et.Zf.FULL?"downgrade":"upgrade",r=[...l[a][e]];r.push(t.id),i(T.Je({editorStatusChanges:{...l,[a]:{...l[a],[e]:r}}})),ei(N(e,a,t.email),i),("upgrade"===a?m:d)(e,t.email)}},[i,l,d,m,y,_]),w=(0,L.Ky)(t,l,R._Y.DESIGN),b=(0,L.Ky)(t,l,R._Y.WHITEBOARD),C=a.numDesignEditors,I=Math.max(C,w),P=Math.max(b,a.numWhiteboardEditors);I!==C&&i(T.js({numDesignEditors:I})),P!==a.numWhiteboardEditors&&i(T.Az({numWhiteboardEditors:P}));let D=(0,L.O1)(C,w),k=(0,L.O1)(a.numWhiteboardEditors,b),M=()=>{i(S.to({type:Z.Bx,data:{seatDataByLicenseType:{[ee.vu]:{minSeats:w,currentSeats:I,seatUnitCostInCents:E(a.billingPeriod,e.currency)},[ee.tL]:{minSeats:b,currentSeats:P,seatUnitCostInCents:v(a.billingPeriod,e.currency)}},showAnnualPrice:a.billingPeriod===z.tY.ANNUAL,updateAdditionalSeats:e=>{i(T.js({numDesignEditors:e[ee.vu]})),i(T.Az({numWhiteboardEditors:e[ee.tL]}))},dispatch:i,currency:e.currency,isProTeam:!0}}))},O=r.useCallback((e,t)=>e["whiteboard"===t?"whiteboard_paid_status":"design_paid_status"]===et.Zf.FULL&&!l.downgrade[t].includes(e.id)||l.upgrade[t].includes(e.id),[l.downgrade,l.upgrade]),V=t.reduce((e,t)=>(e[t.id]={design:O(t,R._Y.DESIGN),whiteboard:O(t,R._Y.WHITEBOARD),slides:O(t,R._Y.SLIDES),sites:O(t,R._Y.SITES)},e),{}),U=!1,j=0;for(let e of t)if(V[e.id].whiteboard&&j++,V[e.id].design&&j++,U=1===j,j>1)break;let G=t[0];return(0,r.useEffect)(()=>{0===j&&!e.isLoading&&G?.id&&(i(T.Je({editorStatusChanges:{...l,upgrade:{design:[G.id,...l?.upgrade?.design??[]],whiteboard:[G.id,...l?.upgrade?.whiteboard??[]],slides:[G.id,...l?.upgrade?.slides??[]],sites:[G.id,...l?.upgrade?.sites??[]],cooper:[G.id,...l?.upgrade?.cooper??[]]}}})),m(R._Y.DESIGN,G.email),m(R._Y.WHITEBOARD,G.email))},[i,l,j,e.isLoading,G?.id,G?.email,m,P,O,G,c,d]),r.createElement(r.Fragment,null,r.createElement("div",{className:es.Fb},(0,h.tx)("pro_cart.adjust_editors.choose_your_figma_design_and_figjam_editors.seat_rename_dev_mode")),r.createElement(u.Kz,{multiple:.5}),r.createElement("div",{className:es.b0,style:q.sx.add({width:el,margin:"auto"}).$},(0,h.tx)("pro_cart.adjust_editors.subtitle")),r.createElement(u.Kz,{multiple:3}),e.error&&r.createElement("div",{style:q.sx.add({width:el,margin:"auto"}).$},r.createElement(p._,{color:p.S.ERROR,text:e.error})),e.error&&r.createElement(u.Kz,{multiple:2}),r.createElement("div",{className:es.sD},r.createElement("div",{className:es.re},r.createElement(u.Kz,{multiple:2.5}),r.createElement("div",{className:es.Ks},r.createElement("div",{className:`${es.HY} ${es.ab} ${es.p7}`},r.createElement("div",{className:es.Ps},n?r.createElement(er.rE,{key:n.id,entity:n,size:24}):r.createElement(er.rE,{key:e.teamName,entity:{name:e.teamName},size:24}))),r.createElement("div",{className:`${es.HY} ${es.E0}`,"data-testid":"design-column-header"},r.createElement("div",null,(0,h.tx)("pro_cart.adjust_editors.figma_design_column_title")),r.createElement(u.Kz,{multiple:.75}),r.createElement("div",{className:es.EU},(0,h.tx)("pro_cart.design_billing_cost_per_month.seat_rename",{monthlyCostInDollars:f.formatMoney(E(a.billingPeriod,e.currency))})),r.createElement(r.Fragment,null,r.createElement(u.Kz,{multiple:.75}),r.createElement(W.G,null))),r.createElement("div",{className:`${es.HY} ${es.E0}`,"data-testid":"figjam-column-header"},r.createElement("div",null,(0,h.tx)("general.figjam")," "),r.createElement(u.Kz,{multiple:.75}),r.createElement("div",{className:es.EU},(0,h.tx)("pro_cart.whiteboard_billing_cost_per_month.seat_rename",{monthlyCostInDollars:f.formatMoney(v(a.billingPeriod,e.currency))})))),r.createElement(u.Kz,{multiple:2.5})),r.createElement("div",{className:es.re},e.isLoading&&r.createElement(u.Kz,{multiple:1.5}),r.createElement(g.x,{isLoading:e.isLoading},()=>r.createElement(r.Fragment,null,t.map((e,a)=>{let s=a===t.length-1;return r.createElement("div",{key:e.id},r.createElement(u.Kz,{multiple:1.5}),r.createElement("div",{className:es.Ks},r.createElement("div",{className:es.ab},r.createElement(J.H8,{user:e}),r.createElement("div",{className:es.QB},r.createElement("div",{className:es.ni},e.handle),r.createElement("div",{className:es.W},e.email))),r.createElement("div",{className:es.E0},r.createElement("span",{"data-tooltip-type":ea.Ib.TEXT,"data-tooltip":V[e.id].design&&U?(0,h.t)("pro_cart.adjust_editors.at_least_one_editor.seat_rename"):(0,h.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(u.tB,{id:`toggle-design-editor-${e.id}`,checked:V[e.id].design,disabled:o||U&&V[e.id].design,onChange:x(R._Y.DESIGN,e),className:es.kv}))),r.createElement("div",{className:es.E0},r.createElement("span",{"data-tooltip-type":ea.Ib.TEXT,"data-tooltip":V[e.id].whiteboard&&U?(0,h.t)("pro_cart.adjust_editors.to_uncheck_first_check_another"):(0,h.t)("pro_cart.adjust_editors.checkbox_toggle_explanation.seat_rename")},r.createElement(u.tB,{id:`toggle-whiteboard-editor-${e.id}`,checked:V[e.id].whiteboard,disabled:o||U&&V[e.id].whiteboard,onChange:x(R._Y.WHITEBOARD,e),className:es.kv})))),r.createElement(u.Kz,{multiple:1.5}),!(o&&s)&&r.createElement("div",{className:es.pV}))}),!o&&r.createElement(r.Fragment,null,r.createElement(u.Kz,{multiple:2.5}),r.createElement("div",{className:es.Su},r.createElement("div",{className:es.ab},r.createElement("div",{className:es.uD,onClick:M},r.createElement(H.B,{className:es.Hl,svg:en.A}),r.createElement("span",null,(0,h.tx)("pro_cart.adjust_editors.add_additional_editors.seat_rename")))),r.createElement("div",{className:`${es.HY} ${es.E0}`},r.createElement("div",null,(0,h.tx)("all_carts.num_editors.seat_rename",{numEditors:I})),r.createElement("div",{className:es.EU},D>0&&(0,h.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:D}))),r.createElement("div",{className:`${es.HY} ${es.E0}`},(0,h.tx)("all_carts.num_editors.seat_rename",{numEditors:P}),r.createElement("div",{className:es.EU},k>0&&(0,h.tx)("pro_cart.adjust_editors.empty_seats",{numEmptySeats:k})))),r.createElement(u.Kz,{multiple:2.5})))),e.isLoading&&r.createElement(u.Kz,{multiple:1.5}))))}var em=a(488491),ed=a(403491),ec=a(707570),e_=a(140841),eu=a(55992),ep=a(634038);function eg(e){let t;let a=(0,M.iZ)(),_=a?.id,D=(0,o.DC)(),Y=(0,s.d4)(e=>e.payment),X=(0,s.d4)(e=>e.dropdownShown),W=(0,s.d4)(e=>e.teams),H=e.selectedView.paymentStep,q=r.useRef(null),[Q,J]=(0,r.useState)(D?.team_name??""),[Z,ee]=(0,r.useState)(I.kt),et=(0,L.PS)((0,k.FC)()),ea=!!(0,o.kc)().redirect_starter_team_loophole&&!(0,o.kc)().close_starter_team_loophole&&(null===e.selectedView.teamId||e.selectedView.teamFlowType!==G.SC.UPGRADE_EXISTING_TEAM),[er,en]=(0,r.useState)(D?.currency||Y.currency||(0,B.LN)()),el=e=>{en(e),e$(T.MN({currency:e}))},ei=ea?z.tY.ANNUAL:Y.billingPeriod,{numDesignEditors:eg,numWhiteboardEditors:eE,editorStatusChanges:eh}=Y,{ignoreCurrentPlan:ev}=e.selectedView,ef=e.selectedView.teamId;(0,r.useEffect)(()=>{ea&&(i.Ay.redirect("/"),(0,d.$D)(n.FigmaTeam.MONETIZATION_UPGRADES,Error("Starter loophole pathway entered, redirecting back to default"),{extra:{...e.selectedView}}))},[e.selectedView,ea]);let ey=(0,s.d4)(t=>(0,U.Np)(t,{...e.selectedView,paymentStep:z.tn.CONFIRM_PAY})),eS=(0,s.d4)(t=>(0,U.Np)(t,{...e.selectedView,paymentStep:z.tn.PAYMENT_AND_ADDRESS})),eT=(0,w.Mh)(),{estimatedDesignCost:eN,estimatedWhiteboardCost:ex}=(0,A.Q)(),ew=eN(eg,ei,er)+ex(eE,ei,er),{createPaymentElement:eb,unmountPaymentElement:eC,savePayment:eA,billingAddress:eI,updateBillingAddress:eP,shippingAddress:eD,updateShippingAddress:ek,customerLegalName:eM,setCustomerLegalName:eO,nameOnPaymentMethod:eR,setNameOnPaymentMethod:eB,vatGstId:eL,setVatGstId:eF,regionalVatGstId:eV,setRegionalVatGstId:eU,paymentMethodType:ej,error:ez}=(0,C.Op)({setupIntentParams:{redirect_url:ey,error_redirect_url:eS,subtotal_estimate:ew,currency:er},customerInfo:{teamId:ef},paymentFlowSource:C.wn.PRO_UPGRADE,currency:er,billingPeriod:ei,defaultCountry:(0,B.ub)(),initialBillingAddress:D?.billing_address,initialNameOnPaymentMethod:D?.name_on_payment_method,initialShippingAddress:D?.shipping_address,initialCustomerLegalName:D?.customer_legal_name,initialVatGstId:D?.vat_gst_id,initialRegionalVatGstId:D?.regional_vat_gst_id,teamName:D?.team_name||Q,canSeeBillingAddressExp:eT,isCheckout:!0}),eG=ez?.code===C.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,e$=(0,s.wA)(),eK=(0,F.Ud)({teamId:ef,canSeeBillingAddressExp:eT}),eY=()=>{e$(f.$T({...e.selectedView,paymentStep:z.tn.CHOOSE_PLAN,previousView:e.selectedView.previousView,ignoreCurrentPlan:ev}))};(0,I.pI)({loadingPaidEditors:eK,teamId:ef,teamName:ef?void 0:Q,setTeamName:ef?void 0:J,collaborators:ef||e.selectedView.teamFlowType!==G.SC.CREATE?void 0:Z,setCollaborators:ef||e.selectedView.teamFlowType!==G.SC.CREATE?void 0:ee});let eX=(0,s.d4)(e=>e.currentUserOrgId),eW=ev?null:eX,eH=(0,s.d4)(e=>eW?e.orgById[eW]:null),eq=(0,$.Q)({currentOrgId:eW,currentTeamId:null}),eQ=eq.data?.currentUser,eJ=eQ?.baseOrgUser?.workspaceUsers,eZ=eJ?.find(e=>e?.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:e0}=(0,O.l6)(eH,eZ),e1=(0,s.d4)(e=>(0,V.isOrgUserExternallyRestrictedFromState)(e));(0,r.useEffect)(()=>{H===z.tn.PAYMENT_AND_ADDRESS&&eG&&eY()});let e2=(0,s.d4)(e=>!!e.user&&(0,c.cn)(e.user));(0,r.useEffect)(()=>{e2&&e.selectedView.isEduTeam?e$(T.Lo({billingPeriod:z.tY.STUDENT})):e.selectedView.isEduTeam&&e$(T.Lo({billingPeriod:z.tY.UNSPECIFIED}))},[e$,e.selectedView.isEduTeam,e2]),(0,r.useEffect)(()=>{e.selectedView.teamFlowType===G.SC.CREATE_AND_UPGRADE&&(e1||e0===O.z4.TEAM_CREATION_CONTROL)&&(i.Ay.redirect("/"),e$(E.s.error((0,h.t)("team_creation.missing_team_creation_controls"))))},[e.selectedView.teamFlowType,e1,e0,e$]);let e9=Y.currencyToSwitch;(0,r.useEffect)(()=>{e9&&en(e9)},[en,e9]);let e8=ei===z.tY.STUDENT,e6=Z.filter(e=>e&&e.trim()).map(e=>e.trim()),e5=e6.filter(e=>!(0,l.xf)(e)),e3=!!a&&e6.filter(e=>e===a.email).length>0,e4=async t=>{t.preventDefault();let a=new URL(window.location.href).searchParams,r=a.get("onCompleteRedirectFileKey"),s=a.get("onCompleteRedirectNodeId");t.currentTarget&&t.currentTarget.blur();let n=(0,eu.kR)(e.selectedView.paymentStep,e.selectedView.teamFlowType,ei,Y.promo,e.selectedView.planType||G.Sc.UNDETERMINED);H===z.tn.CREATE_TEAM&&(J(Q.trim()),e$(f.$T({...e.selectedView,teamId:null,paymentStep:n,ignoreCurrentPlan:ev}))),H===z.tn.ADD_COLLABORATORS&&(e5.length?e$(E.s.error((0,h.t)("pro_cart.add_collaborators.error.email_is_invalid",{string:e5[0]}))):e3?e$(E.s.error((0,h.t)("team_view.team_permissions_modal.youre_not_able_to_send_an_invite_to_yourself"))):e$(f.$T({...e.selectedView,paymentStep:n,ignoreCurrentPlan:ev}))),H===z.tn.CHOOSE_PLAN?e8?e$(f.$T({...e.selectedView,paymentStep:n,billingPeriod:z.tY.STUDENT,ignoreCurrentPlan:ev})):(e$(T.Je({editorStatusChanges:eh})),e$(f.$T({...e.selectedView,paymentStep:n,billingPeriod:Y.billingPeriod,...r?{searchParams:{onCompleteRedirectFileKey:r,onCompleteRedirectNodeId:s}}:{},ignoreCurrentPlan:ev}))):H===z.tn.PAYMENT_AND_ADDRESS&&(e$(T.I2({submitPending:!0})),await eA(),e$(T.I2({submitPending:!1})))},e7=e.selectedView.teamFlowType===G.SC.CREATE?()=>{e$((0,P.KQ)({teamName:Q,orgAccess:R.bU.PUBLIC,inviteEmails:e6,teamFlowType:e.selectedView.teamFlowType,onSuccess:()=>{(0,I.Al)(a?.id)},ignoreCurrentPlan:ev}))}:void 0;(e.selectedView.teamFlowType===G.SC.CREATE_AND_UPGRADE||e.selectedView.teamFlowType===G.SC.UPGRADE_EXISTING_TEAM)&&(1===et.length?t=t=>{t=t||e.selectedView.billingPeriod;let a=G.SC.UPGRADE_EXISTING_TEAM;e$(f.$T({...e.selectedView,teamFlowType:a,teamId:et[0].id,paymentStep:(0,eu.kR)(e.selectedView.paymentStep,a,t||null,Y.promo,G.Sc.TEAM,z.tn.CHOOSE_PLAN),planType:G.Sc.UNDETERMINED,billingPeriod:t,ignoreCurrentPlan:ev}))}:et.length>1&&(t=e=>{e&&e$(T.Lo({billingPeriod:e})),e$((0,S.to)({type:v.dR,data:{plan:v.In.PRO,upsellSource:j.b.UPGRADE_EXISTING_FROM_TEAM_CREATION}}))}));let te=()=>{let t=()=>{(0,o.sj)(),(0,F.Mt)(e$),(0,G.h5)(e.selectedView.teamFlowType)&&null===ef&&(0,I.Al)(_)};if(e.selectedView.teamId&&e8)e$(T.Nj({teamId:e.selectedView.teamId}));else if(e.selectedView.teamId&&Y.promo){let a=e.selectedView.teamId,r=(0,o.kc)().ps_benchmark;e$(N.S_({teamId:a,teamName:W[a].name,promoCode:Y.promo?.code||"",onSuccess:()=>{t(),(0,m._H)(),e$(T.Ay({promo:null})),r&&_?e.selectedView.previousView?f.$T(e.selectedView.previousView):y._l({workspace:{userId:_,orgId:null,teamId:a},view:{view:"allProjects"}}):e$(f.$T(e.selectedView.previousView||{view:"team",teamId:a}))},onError:()=>{(0,m._H)(),e$(T.Ay({promo:null})),e$(f.$T({...e.selectedView,paymentStep:z.tn.PLAN_COMPARISON,ignoreCurrentPlan:ev}))}}))}else e$(x.b({completed_pro_cart_flow:!0})),e$(T.I2({submitPending:!0})),e$((0,N.gk)({teamId:e.selectedView.teamId,selectedCurrency:er,teamName:Q,teamFlowType:e.selectedView.teamFlowType,invites:e6,hasSelectedStudentTeam:e8,onSuccess:t,promotionCodeId:null}))},tt=new URLSearchParams(i.Ay.location.search),ta=tt.get("onCompleteRedirectFileKey"),tr=tt.get("onCompleteRedirectNodeId"),ts=a&&I.lX({teamId:ef,userId:a.id})?.is3DS;return e.selectedView.teamFlowType===G.SC.CREATE_AND_UPGRADE&&(e1||e0===O.z4.TEAM_CREATION_CONTROL)?r.createElement(r.Fragment,null):r.createElement(b.fu,{name:"Upgrade Team",properties:{teamId:e.selectedView.teamId,teamFlowType:e.selectedView.teamFlowType,planType:e.selectedView.planType,step:H,currency:er,inPublishDraftExp:!!(ta&&tr)}},r.createElement("div",{className:es.im,"data-testid":"team-upgrade-v2"},r.createElement(eu.vU,{selectedView:e.selectedView}),r.createElement("div",{className:es.Jr},r.createElement("div",{className:es.uz,ref:q},r.createElement(u.Kz,{multiple:4}),H===z.tn.PLAN_COMPARISON&&r.createElement(em.T,{chooseStarterPlan:e7,chooseProPlan:t=>{e$(T.Lo({billingPeriod:t}));let a=(0,G.h5)(e.selectedView.teamFlowType)?e.selectedView.teamFlowType:G.SC.CREATE_AND_UPGRADE;e$(f.$T({...e.selectedView,teamFlowType:a,paymentStep:(0,eu.kR)(e.selectedView.paymentStep,a,t,Y.promo,G.Sc.TEAM),billingPeriod:t,planType:G.Sc.TEAM,openInNewTab:!1,ignoreCurrentPlan:ev}))},chooseOrgPlan:()=>{e$(T.Bq({currency:er,newTeamProps:{teamFlowType:e.selectedView.teamFlowType,newTeamName:Q,inviteEmails:e6,previousView:e.selectedView},upsellSource:j.b.UPGRADE_NEW_TEAM_V2}))},currency:er,updateCurrency:e=>el(e),upgradeExistingTeam:t,parentRef:q}),H===z.tn.CREATE_TEAM&&r.createElement(ec.y,{type:e.selectedView.teamFlowType===G.SC.CREATE?ec.I.STARTER:ec.I.PRO,teamName:Q,setTeamName:J,onNext:e4,upgradeExistingTeam:t?()=>t?.(ei):void 0,promo:Y.promo}),H===z.tn.ADD_COLLABORATORS&&r.createElement(K.b,{disableInvites:!e6.length,collaborators:Z,setCollaborators:ee,willSendInvites:e4,skipInviteStep:()=>{if(ee(I.kt),_){let e=(0,I.lX)({teamId:null,userId:_});e&&(0,I.dT)(_,{...e,newCollaborators:I.kt})}e$(f.$T({...e.selectedView,paymentStep:z.tn.PLAN_COMPARISON,ignoreCurrentPlan:ev}))}}),H===z.tn.CHOOSE_PLAN&&r.createElement(eo,{selectedView:e.selectedView,isLoading:eK,currency:er,error:eG?ez?.message:null,teamName:Q}),H===z.tn.PAYMENT_AND_ADDRESS&&r.createElement(r.Fragment,null,r.createElement(e_.y,{billingAddress:eI,updateBillingAddress:eP,shippingAddress:eD,updateShippingAddress:ek,legalCompanyName:eM,updateLegalCompanyName:eO,nameOnPaymentMethod:eR,updateNameOnPaymentMethod:eB,createPaymentElement:eb,unmountPaymentElement:eC,error:ez,vatGstId:eL,onVatGstIdChange:eF,regionalVatGstId:eV,onRegionalVatGstIdChange:eU,paymentMethodType:ej,isCommunityCheckout:!1,canSeeBillingAddressExp:eT,isCheckout:!0})),H===z.tn.CONFIRM_PAY&&r.createElement(r.Fragment,null,r.createElement("div",{className:es.Fb},(0,h.tx)("pro_cart.review.lets_make_sure_everything_looks_right")),r.createElement(u.Kz,{multiple:3}),ts&&r.createElement("div",{className:es.vK},r.createElement(p._,{color:p.S.INFORMATION,text:(0,h.t)("pro_cart.review.extra_validation")})),ts&&r.createElement(u.Kz,{multiple:2}),r.createElement(g.x,{isLoading:eK},()=>r.createElement(ed.d,{selectedView:e.selectedView,teamName:Q,onClickConfirm:te,billingAddress:eI,shippingAddress:eD,canSeeBillingAddressExp:eT,currency:er}))),r.createElement(u.Kz,{multiple:9})),r.createElement(ep.S,{selectedView:e.selectedView,onNext:e4,isLoading:eK,isButtonDisabled:eG,currency:er,updateCurrency:e=>el(e),dropdownShown:X}))))}function eE(e){return(0,o.kc)().cart_error_boundaries?r.createElement(eh,{...e}):r.createElement(eg,{...e})}function eh(e){return r.createElement(_.tH,{sentryTags:{area:n.FigmaTeam.MONETIZATION_UPGRADES},boundaryKey:"TeamUpgradeV2",fallback:_.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:D.y4},r.createElement(eg,{...e}))}},55992:(e,t,a)=>{a.d(t,{kR:()=>T,vU:()=>N});var r=a(411855),s=a(188507),n=a(634832),l=a(966712),i=a(446520),o=a(939863),m=a(738269),d=a(507877),c=a(101505),_=a(672517),u=a(195971),p=a(860178),g=a(257512),E=a(622139),h=a(637590),v=a(486184);function f(e){return r.createElement(_.$z,{type:"button",className:v.Nd,trackingProperties:{trackingDescriptor:c.c.CANCEL},onClick:e.onClick},(0,o.tx)("pro_cart.breadcrumbs.cancel"))}var y=(e=>(e[e.PLAN_COMPARISON=0]="PLAN_COMPARISON",e[e.CREATE_TEAM=1]="CREATE_TEAM",e[e.ADD_COLLABORATORS=2]="ADD_COLLABORATORS",e[e.ADJUST_EDITORS=3]="ADJUST_EDITORS",e[e.SET_EDITORS=4]="SET_EDITORS",e[e.PAYMENT_AND_ADDRESS=5]="PAYMENT_AND_ADDRESS",e[e.CONFIRM_PAY=6]="CONFIRM_PAY",e))(y||{});function S(e,t,a,r){let s=t===E.tY.STUDENT,l=[];switch(e){case h.SC.CREATE_AND_UPGRADE:l.push(0),l.push(1),s?l.push(4):a||(l.push(4),l.push(5)),l.push(6);break;case h.SC.UPGRADE_EXISTING_TEAM:r===h.Sc.TEAM?(l.push(3),s||l.push(5)):s?(l.push(0),l.push(3)):a?l.push(0):(l.push(0),l.push(4),l.push(5)),l.push(6);break;case h.SC.CREATE:l.push(1),l.push(2),l.push(0),r===h.Sc.TEAM&&(s?l.push(4):a||(l.push(4),l.push(5)),l.push(6));break;default:(0,n.assertNever)(e)}return l.map(e=>(function(e){switch(e){case 0:return{step:E.tn.PLAN_COMPARISON,text:(0,o.t)("pro_cart.breadcrumbs.choose_plan")};case 1:return{step:E.tn.CREATE_TEAM,text:(0,o.t)("pro_cart.breadcrumbs.create_team")};case 2:return{step:E.tn.ADD_COLLABORATORS,text:(0,o.t)("pro_cart.breadcrumbs.add_team_members")};case 3:return{step:E.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.adjust_editors.seat_rename")};case 4:return{step:E.tn.CHOOSE_PLAN,text:(0,o.t)("pro_cart.breadcrumbs.set_editors.seat_rename")};case 5:return{step:E.tn.PAYMENT_AND_ADDRESS,text:(0,o.t)("pro_cart.breadcrumbs.payment_information")};case 6:return{step:E.tn.CONFIRM_PAY,text:(0,o.t)("pro_cart.breadcrumbs.review")}}})(e))}function T(e,t,a,r,s,n){let l=S(t,a,r,s).map(e=>e.step),i=l.indexOf(e);return n=n||l[0],-1===i?n:l[i+1]}function N(e){let{selectedView:t}=e,{teamId:a,paymentStep:n,teamFlowType:o}=t,c=(0,s.wA)(),_=(0,s.d4)(e=>e.payment.billingPeriod),y=p.iZ()?.id,T=S(o,_,(0,s.d4)(e=>e.payment.promo),e.selectedView.planType||h.Sc.UNDETERMINED),N=T.findIndex(e=>e.step===n);return r.createElement("div",{className:v.N6},r.createElement(f,{onClick:()=>{((0,l.sj)(),(0,g.Mt)(c),(0,h.h5)(o)&&null===a&&(0,u.Al)(y),(0,l.kc)().ps_benchmark&&y)?a&&(!t.previousView||"fullscreen"!==t.previousView.view)?c(d._l({workspace:{userId:y,teamId:a,orgId:null},view:{view:"recentFiles"}})):c(m.$T(t.previousView||{view:"recentFiles"})):c(m.$T(t.previousView||(a?{view:"team",teamId:a}:{view:"recentFiles"}))),t.callbackOnClose?.()}}),T.map((e,a)=>r.createElement(i.On,{key:e.text,selected:n===e.step,number:a+1,text:e.text,canClick:a<N,lightText:!0,onClick:()=>{c(m.$T({...t,paymentStep:e.step,billingPeriod:_===E.tY.UNSPECIFIED?void 0:_,planType:(0,h.ck)(o,e.step)?h.Sc.UNDETERMINED:t.planType,teamFlowType:(0,h.jX)(o)&&e.step===E.tn.PLAN_COMPARISON?h.SC.CREATE_AND_UPGRADE:t.teamFlowType}))}})))}},634038:(e,t,a)=>{a.d(t,{S:()=>k});var r=a(411855),s=a(188507),n=a(675678),l=a(629019),i=a.n(l),o=a(776621),m=a(650322),d=a(281381),c=a(946689),_=a(893281),u=a(493323),p=a(135876),g=a(901536),E=a(939863),h=a(662275),v=a(995852),f=a(349410),y=a(101505),S=a(988022),T=a(66957),N=a(176824),x=a(99506),w=a(820113),b=a(622139),C=a(347495),A=a(5313),I=a(729129),P=a(237107),D=a(486184);let k=(0,s.Ng)(e=>({payment:e.payment,user:e.user}))(function(e){let t,a;let l=(0,s.wA)(),i=(0,f.Ik)(),d=e.payment.numDesignEditors,h=e.payment.billingPeriod===b.tY.STUDENT,{estimatedDesignCost:S,estimatedWhiteboardCost:C,getDesignUnitCost:A,getWhiteboardUnitCost:I}=(0,N.Q)(),k=new w.vr(e.currency);if(e.selectedView.paymentStep!==b.tn.CHOOSE_PLAN&&e.selectedView.paymentStep!==b.tn.PAYMENT_AND_ADDRESS)return null;let F=e=>{e===b.tY[b.tY.ANNUAL]?l(v.Lo({billingPeriod:b.tY.ANNUAL})):e===b.tY[b.tY.MONTHLY]&&l(v.Lo({billingPeriod:b.tY.MONTHLY})),l(v.js({numDesignEditors:d}))},V=(0,m.cn)(e.user),U=(0,E.t)("pro_cart.sidebar.next_payment_information"),j=y.c.PAYMENT_INFORMATION;(h||e.selectedView.paymentStep===b.tn.PAYMENT_AND_ADDRESS)&&(U=(0,E.t)("pro_cart.sidebar.next_review"),j=y.c.REVIEW);let z=(0,w._Z)(),G=S(d,e.payment.billingPeriod,e.currency),$=12*S(d,b.tY.MONTHLY,e.currency),K=A(e.payment.billingPeriod,e.currency),Y=A(b.tY.MONTHLY,e.currency),X=C(e.payment.numWhiteboardEditors,e.payment.billingPeriod,e.currency),W=12*C(e.payment.numWhiteboardEditors,b.tY.MONTHLY,e.currency),H=I(e.payment.billingPeriod,e.currency),q=I(b.tY.MONTHLY,e.currency),Q=i?r.createElement(R,{price:K,localizeCurrency:k}):k.formatMoney(G),J=i?r.createElement(R,{price:H,localizeCurrency:k}):k.formatMoney(X),Z=$+W-S(d,b.tY.ANNUAL,e.currency)-C(e.payment.numWhiteboardEditors,b.tY.ANNUAL,e.currency);e.payment.billingPeriod===b.tY.ANNUAL?(G>0&&(t=k.formatMoney($)),X>0&&(a=k.formatMoney(W)),i&&(t=k.formatMoney(Y),a=k.formatMoney(q))):e.payment.billingPeriod===b.tY.STUDENT&&(t=i?k.formatMoney(Y):r.createElement(P.X6,{editorType:x._Y.DESIGN,numEditors:e.payment.numDesignEditors,currency:e.currency}),a=i?k.formatMoney(q):r.createElement(P.X6,{editorType:x._Y.WHITEBOARD,numEditors:e.payment.numWhiteboardEditors,currency:e.currency}));let ee=G+X,et=k.getPrices(),ea=(0,P.U1)(et.annualFigjam,et.monthlyFigjam),er=(0,P.U1)(et.annualFigma,et.monthlyFigma);return ee<0&&(0,o.$D)(n.FigmaTeam.BILLING,Error("[Billing] Estimated total is a negative amount."),{extra:{numDesignEditors:d,numWhiteboardEditors:e.payment.numWhiteboardEditors,upgrades:JSON.stringify(e.payment.editorStatusChanges),userId:e.user.id,subtotal:ee,currency:e.currency}}),r.createElement("div",{className:D.Ie},i?r.createElement(r.Fragment,null,r.createElement(M,{teamId:e.selectedView.teamId}),z&&r.createElement(r.Fragment,null,r.createElement(c.Kz,{multiple:3}),r.createElement(O,{currency:e.currency,supportedCurrencies:(0,w.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency,hasCartStickerShock:i})),r.createElement(c.Kz,{multiple:2}),r.createElement("div",{className:D.pV}),r.createElement(c.Kz,{multiple:2})):r.createElement(r.Fragment,null,r.createElement("div",{className:D.LC},(0,E.tx)("pro_cart.sidebar.professional_plan")),z&&r.createElement(r.Fragment,null,r.createElement(c.Kz,{multiple:3}),r.createElement(O,{currency:e.currency,supportedCurrencies:(0,w.B9)(),dropdownShown:e.dropdownShown,changeCurrency:e.updateCurrency}),r.createElement(c.Kz,{multiple:2}),r.createElement("div",{className:D.pV}),r.createElement(c.Kz,{multiple:2}))),V&&e.selectedView.paymentStep===b.tn.CHOOSE_PLAN&&r.createElement(r.Fragment,null,r.createElement("div",{className:D.ZD},(0,E.tx)("pro_cart.sidebar.is_this_an_education_team")),r.createElement(c.Kz,{multiple:1.5}),r.createElement(_.z,{className:D.aq,onChange:e=>{"true"===e?l(v.Lo({billingPeriod:b.tY.STUDENT})):h&&(l(v.Lo({billingPeriod:b.tY.ANNUAL})),l(v.js({numDesignEditors:d})))},value:h.toString()},r.createElement(_.Z,{value:"false",className:D.Ac},(0,E.tx)("pro_cart.sidebar.no")),r.createElement(_.Z,{value:"true",className:D.Ac},(0,E.tx)("pro_cart.sidebar.yes"))),r.createElement(c.Kz,{multiple:1.5}),r.createElement("div",{className:D.pV}),r.createElement(c.Kz,{multiple:2})),!i&&r.createElement(r.Fragment,null,r.createElement(L,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:F,currency:e.currency}),r.createElement(c.Kz,{multiple:2})),r.createElement(p.x,{isLoading:e.isLoading,className:D.F},()=>r.createElement(r.Fragment,null,r.createElement(P.Wy,{"data-testid":"sidebar-design-summary",mainText:i?r.createElement("span",{className:g.cx.fontMedium.$},(0,E.tx)("pro_cart.sidebar.exp_sticker_shock.design")):(0,E.tx)("pro_cart.info.figma_design_editors.seat_rename",{numEditors:d}),strikethroughPriceText:t,strikethroughPriceClassName:i?g.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:Q,subText:i?void 0:r.createElement(P.d6,{currentBillingPeriod:e.payment.billingPeriod,numEditors:d,currency:e.currency,noCents:!0,shouldStrikethroughMonthlyUnitCostIfAnnual:!0}),discountPercentage:i?void 0:G>0&&e.payment.billingPeriod===b.tY.ANNUAL?er:void 0,showDevModeIncludedText:!0}),r.createElement(c.Kz,{multiple:2}),r.createElement(P.Wy,{"data-testid":"sidebar-whiteboard-summary",mainText:i?r.createElement("div",{className:g.cx.fontMedium.$},(0,E.tx)("pro_cart.sidebar.exp_sticker_shock.figjam")):(0,E.tx)("pro_cart.info.figjam_editors.seat_rename",{numEditors:e.payment.numWhiteboardEditors}),strikethroughPriceText:a,strikethroughPriceClassName:i?g.cx.font18.fpl__textHeadingLargeLetterSpacing.$:void 0,priceText:J,subText:i?void 0:r.createElement(P.ME,{shouldStrikethroughMonthlyUnitCostIfAnnual:!0,currency:e.currency}),discountPercentage:i?void 0:X>0&&e.payment.billingPeriod===b.tY.ANNUAL?ea:void 0}),r.createElement(c.Kz,{multiple:2}),i&&!h&&r.createElement(r.Fragment,null,r.createElement(B,{billingPeriod:e.payment.billingPeriod,onBillingCycleChange:F,localizeCurrency:k,savingsWithAnnualPlan:Z}),r.createElement(c.Kz,{multiple:2})))),r.createElement("div",{className:D.pV}),r.createElement(c.Kz,{multiple:3}),i?r.createElement(T.i,{numberOfDesignEditors:d,designSubtotal:k.formatMoney(G),numberOfFigjamEditors:e.payment.numWhiteboardEditors,figjamSubtotal:k.formatMoney(X),formattedSubtotal:k.formatMoney(ee,{showFullFormat:(0,w._Z)()}),billingPeriod:e.payment.billingPeriod}):r.createElement(T.m,{formattedSubtotal:k.formatMoney(ee,{showFullFormat:(0,w._Z)()})}),r.createElement(c.Kz,{multiple:3}),h&&r.createElement(r.Fragment,null,r.createElement("div",{className:D.iY},(0,E.tx)("edu.education_teams_get_all_the_professional_plan_features_for_free")),r.createElement(c.Kz,{multiple:2})),r.createElement(c.vd,{className:D.fK,disabled:e.isLoading||e.isButtonDisabled||e.payment.submitPending,onClick:e.onNext,trackingProperties:{trackingDescriptor:j},dataTestId:"upgrade-next-button"},e.payment.submitPending?r.createElement(u.kt,{className:D.S}):U))});function M({teamId:e}){let t=(0,s.wA)();return r.createElement(r.Fragment,null,r.createElement("div",{className:g.cx.font20.fontMedium.$},(0,E.tx)("pro_cart.sidebar.professional_plan")),r.createElement(c.Kz,{multiple:1}),r.createElement("p",{className:g.cx.font13.fontNormal.lh24.maxW250.$},(0,E.tx)("pro_cart.sidebar.exp_sticker_shock.unlimited_files_and_projects",{learnMoreLink:r.createElement(c.Us,{className:g.cx.colorTextBrand.cursorPointer.$,onClick:()=>{t(h.to({type:A.q,data:{teamId:e??void 0,trackingProperties:{productArea:"upgrade_sidebar"},hasSecondaryBtn:!1}}))},trusted:!0},(0,E.tx)("pro_cart.sidebar.exp_sticker_shock.so_much_more"))})))}function O({currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:s,hasCartStickerShock:n}){let l=g.cx.flex.justifyBetween.itemsCenter.font13.$,i=n?g.cx.fontMedium.$:g.cx.fontSemiBold.$;return r.createElement("div",{className:n?l:D.h7},r.createElement("span",{className:i},(0,E.tx)("pro_cart.sidebar.currency")),r.createElement(I.D,{currency:e,dropdownShown:t,supportedCurrencies:a,changeCurrency:s,shortFormDisplay:!0}))}function R({price:e,localizeCurrency:t}){let a=g.cx.font18.fpl__textHeadingLargeLetterSpacing.fontMedium.$;return r.createElement("span",null,(0,E.tx)("pro_cart.sidebar.exp_sticker_shock.cost_per_editor_per_month",{cost:r.createElement("span",{className:a},t.formatMoney(e))}))}function B({billingPeriod:e,onBillingCycleChange:t,localizeCurrency:a,savingsWithAnnualPlan:s}){let n=g.cx.flex.alignCenter.$,l=g.cx.colorTextSuccess.font13.$,i=g.cx.colorText.font13.pl8.$;return r.createElement("div",{className:n},r.createElement(C.l,{dataTestId:"billing-period-toggle",on:e===b.tY.ANNUAL,onChange:()=>{t(e===b.tY.ANNUAL?b.tY[b.tY.MONTHLY]:b.tY[b.tY.ANNUAL]),(0,S.Cu)({name:"Upgrade sidebar billing period toggle"})}}),r.createElement("span",{className:i},(0,E.tx)("pro_cart.sidebar.exp_sticker_shock.by_paying_annually",{saveAmountText:r.createElement("span",{className:l},(0,E.tx)("pro_cart.sidebar.exp_sticker_shock.save_amount_per_year",{saveAmount:a.formatMoney(s)}))})))}function L({billingPeriod:e,onBillingCycleChange:t,currency:a}){if(e===b.tY.STUDENT)return null;{let s=new w.vr(a).getPrices(),n=(0,P.U1)(s.annualFigjam,s.monthlyFigjam);return r.createElement(r.Fragment,null,r.createElement("div",{className:D.ZD},(0,E.tx)("pro_cart.sidebar.billing_cycle")),r.createElement(c.Kz,{multiple:2}),r.createElement(_.z,{className:D.aq,onChange:t,value:b.tY[e]},r.createElement(_.Z,{value:b.tY[b.tY.ANNUAL],className:D.Ac},r.createElement("div",{className:i()(D.Wu,D.Yw)},r.createElement("span",null,(0,E.tx)("pro_cart.sidebar.annual")),r.createElement(d.Ex,{className:D.qS,color:d.zE.SUCCESS,size:d.vj.LARGE,subtle:!0,text:(0,E.tx)("pro_cart.sidebar.save_up_to_discount",{discountAmount:n})}))),r.createElement(_.Z,{value:b.tY[b.tY.MONTHLY],className:D.Ac},r.createElement("div",{className:g.cx.flex.justifyEnd.$},(0,E.tx)("pro_cart.sidebar.monthly")))),r.createElement(c.Kz,{multiple:2}),r.createElement("div",{className:D.pV}))}}},320108:(e,t,a)=>{a.d(t,{Js:()=>r,Uq:()=>l,Xc:()=>i,mC:()=>s,yG:()=>n});let r=function(){return[]},s=function(){return[]},n=function(){return null},l=function(){return null},i=function(){return null}},6988:(e,t,a)=>{a.d(t,{x:()=>_});var r=a(411855),s=a(188507),n=a(946689),l=a(901536),i=a(939863),o=a(738269),m=a(662275),d=a(789586),c=a(622139);function _(e){return"org"===e.variant?r.createElement(u,{...e}):r.createElement(p,{...e})}function u(e){let t=e.canSeeBillingAddressExp&&e.billingAddress,a=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return r.createElement("div",null,r.createElement(g,{subtitle:(0,i.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.details":"org_self_serve.review_step.organization_details")}),r.createElement(E,{header:(0,i.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.company_legal_name":"org_self_serve.review_step.company_name"),value:e.legalName}),r.createElement(E,{header:(0,i.tx)(e.canSeeBillingAddressExp?"org_self_serve.review_step.display_name":"org_self_serve.review_step.company_display_name"),value:e.displayName}),!e.canSeeBillingAddressExp&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.domain"),value:e.domain}),!e.canSeeBillingAddressExp&&e.totalTeams>0&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.teams"),value:e.totalTeams.toString()}),e.canSeeBillingAddressExp&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.billing_email"),value:e.userEmail}),e.canSeeBillingAddressExp&&r.createElement(n.Ph,{onClick:e.navigateToEditOrganizationDetails,trackingEventName:"Edit organization details - checkout flow",trusted:!0},(0,i.tx)("org_self_serve.review_step.edit_organization")),t&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.billing_address"),value:h(e.billingAddress)}),a&&r.createElement(E,{header:(0,i.tx)("org_self_serve.review_step.shipping_address"),value:h(e.shippingAddress)}),e.canSeeBillingAddressExp&&r.createElement(n.Ph,{onClick:e.navigateToEditPaymentDetails,trackingEventName:"Edit payment details - checkout flow",trusted:!0},(0,i.tx)("org_self_serve.review_step.edit_payment")))}function p(e){let t=(0,s.wA)(),a=(0,s.d4)(e=>e.selectedView),l=e.canSeeBillingAddressExp&&e.billingAddress,_=e.canSeeBillingAddressExp&&e.shippingAddress&&!(0,c.$V)(e.shippingAddress);return r.createElement("div",null,r.createElement(g,{subtitle:(0,i.tx)("pro_cart.review.details")}),r.createElement(E,{header:(0,i.tx)("pro_cart.review.team_name"),value:e.displayName}),r.createElement(E,{header:(0,i.tx)("pro_cart.review.company_name"),value:e.legalName}),l&&r.createElement(E,{header:(0,i.tx)("pro_cart.review.billing_address"),value:h(e.billingAddress)}),_&&r.createElement(E,{header:(0,i.tx)("pro_cart.review.shipping_address"),value:h(e.shippingAddress)}),r.createElement(n.Ph,{onClick:e.canSeeBillingAddressExp?()=>{t(o.$T({...a,paymentStep:c.tn.PAYMENT_AND_ADDRESS}))}:()=>{t((0,m.to)({type:d.L,data:{modalTitle:(0,i.t)("pro_cart.review.edit_details_modal_header"),displayName:e.displayName,legalName:e.legalName,updateNameImmediately:!1,canSeeBillingAddressExp:e.canSeeBillingAddressExp}}))},trackingEventName:"Edit team details - checkout flow",trusted:!0},(0,i.tx)(e.canSeeBillingAddressExp?"pro_cart.review.edit_details":"pro_cart.review.edit_all_details")))}function g({subtitle:e}){return r.createElement("div",{className:l.cx.font15.fontMedium.lh24.colorText.$},e)}function E({header:e,value:t}){return r.createElement("div",{className:l.cx.flex.flexColumn.mt16.$},r.createElement("p",{className:l.cx.font11.lh16.spacingWide.colorText.$},e),r.createElement("p",{className:l.cx.font13.lh24.fontMedium.colorText.breakWord.mb16.$},t))}function h(e){return[e?.line1,e?.line2,e?.city,e?.region,e?.country,e?.postal_code].filter(function(e){return e}).join(", ")}},66957:(e,t,a)=>{a.d(t,{i:()=>d,m:()=>m});var r=a(411855),s=a(946689),n=a(939863),l=a(175290),i=a(809840),o=a(622139);function m(e){return r.createElement(r.Fragment,null,r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,n.tx)("pro_cart.info.subtotal")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:e.formattedSubtotal}))),r.createElement(i.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,n.tx)("checkout.tax_disclaimer"))," ",r.createElement(i.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,n.tx)("checkout.review_in_tax_disclaimer")))}function d({numberOfDesignEditors:e,designSubtotal:t,numberOfFigjamEditors:a,figjamSubtotal:m,formattedSubtotal:d,billingPeriod:c}){return r.createElement(r.Fragment,null,r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-design-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-design-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,n.tx)("pro_cart.sidebar.exp_sticker_shock.design_editors",{numEditors:e})),r.createElement("span",{"data-testid":"sidebar-design-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-design-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:t}))),r.createElement(s.Kz,{multiple:2}),r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-whiteboard-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-main-text",fontWeight:"regular",fontSize:13},(0,n.tx)("pro_cart.sidebar.exp_sticker_shock.figjam_editors",{numEditors:a})),r.createElement("span",{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-whiteboard-subtotal-summary-price-section-price-text",fontWeight:"regular",fontSize:13,children:m}))),r.createElement(s.Kz,{multiple:2}),r.createElement(l.Y,{direction:"horizontal",horizontalAlignItems:"space-between","data-testid":"sidebar-subtotal-cost-row",height:"hug-contents"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-main-text",fontWeight:"medium",fontSize:13},(0,n.tx)(c===o.tY.ANNUAL?"pro_cart.sidebar.exp_sticker_shock.subtotal_per_year":"pro_cart.sidebar.exp_sticker_shock.subtotal_per_month")),r.createElement("span",{"data-testid":"sidebar-subtotal-summary-price-section"},r.createElement(i.E,{"data-testid":"sidebar-subtotal-summary-price-section-price-text",fontWeight:"medium",fontSize:13,children:d}))),r.createElement(i.E,{fontWeight:"regular",color:"tertiary",fontSize:11},(0,n.tx)("checkout.tax_disclaimer"))," ",r.createElement(i.E,{fontWeight:"medium",color:"tertiary",fontSize:11},(0,n.tx)("checkout.review_in_tax_disclaimer")))}},50661:(e,t,a)=>{a.d(t,{t:()=>m});var r=a(411855),s=a(768137),n=a(322611),l=a(901536),i=a(939863),o=a(702595);function m(){return r.createElement(n.u,{useOriginalSrcFills:!0,imageClassName:"request_error_interstitial--warningIcon--9ayvs",imageSrc:o.A,headerText:(0,i.t)("request_error_interstitial.there_was_an_error")},r.createElement(s.vd,{className:l.cx.mt24.$,type:"submit",onClick:()=>{window.location.href=window.location.href}},(0,i.tx)("request_error_interstitial.refresh_and_try_again")))}},789586:(e,t,a)=>{a.d(t,{L:()=>f});var r=a(411855),s=a(188507),n=a(629019),l=a.n(n),i=a(946689),o=a(901536),m=a(881388),d=a(552985),c=a(939863),_=a(662275),u=a(995852),p=a(845213),g=a(237870),E=a(585878),h=a(626208);let v=r.memo(function(e){let t=(0,s.wA)(),{displayName:a,legalName:n}=e,[g,v]=r.useState(a||""),[f,y]=r.useState(n||""),{isLoading:S,withLoading:T}=(0,d.R)(),N=()=>{t(_.Ce())},x=async a=>{a.preventDefault(),await T(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await p.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:g}):await p.$.updateTeamName({teamId:e.team.id,updatedDisplayName:g,updatedLegalName:f})}catch(r){let a=e.canSeeBillingAddressExp?(0,c.t)("update_company_details_modal.update_display_name.error"):(0,c.t)("update_company_details_modal.update_team_name.error");throw t(m.s.error((0,c.Jv)(r)||a)),r}else t(u.yy({legalName:f,displayName:g}));N()})};return r.createElement(E.XV,{onClose:N,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0},r.createElement("form",{onSubmit:x,className:o.cx.p16.$},r.createElement("div",{className:o.cx.mt4.$},r.createElement("label",{htmlFor:"teamName",className:o.cx.colorTextSecondary.$},r.createElement("strong",{className:o.cx.block.colorText.$},(0,c.tx)("pro_cart.review.edit_details.team_name_label")),(0,c.tx)("pro_cart.review.edit_details.team_name_description")),r.createElement(i.ks,{value:g,id:"teamName",onChange:e=>{v(e.target.value)},dataTestId:"company-team-name",className:o.cx.block.mt8.wFull.$})),!e.canSeeBillingAddressExp&&r.createElement("div",{className:o.cx.mt20.$},r.createElement("label",{htmlFor:"legalName",className:o.cx.colorTextSecondary.$},r.createElement("strong",{className:o.cx.block.colorText.$},(0,c.tx)("pro_cart.review.edit_details.company_name_label")),(0,c.tx)("pro_cart.review.edit_details.company_name_description")),r.createElement(i.ks,{value:f,id:"legalName",onChange:e=>{y(e.target.value)},dataTestId:"company-name",className:o.cx.block.mt8.wFull.$})),r.createElement("div",{className:l()(h.v0,h.hF)},r.createElement(i.tM,{onClick:N,disabled:S},(0,c.tx)("pro_cart.review.edit_details.cancel")),r.createElement(i.vd,{className:h.pL,disabled:S,type:"submit"},(0,c.tx)("pro_cart.review.edit_details.save")))))}),f=(0,g.Ju)(v,"UpdateCompanyDetailsModal")},257512:(e,t,a)=>{a.d(t,{$7:()=>N,Mt:()=>b,Ud:()=>x});var r=a(411855),s=a(188507),n=a(776250),l=a(133537),i=a(358145),o=a(966712),m=a(27087),d=a(881388),c=a(939863),_=a(738269),u=a(182976),p=a(995852),g=a(229403),E=a(99506),h=a(622139),v=a(479296),f=a(195971),y=a(860178),S=a(336599),T=a(243987);function N(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.payment);function a(a){e(p.Az({numWhiteboardEditors:t.numWhiteboardEditors+a}))}function r(a){e(p.js({numDesignEditors:t.numDesignEditors+a}))}return{increment:function(e,t){(0,l.nD)(t)||("whiteboard"===e?a(1):r(1))},decrement:function(e,t){(0,l.nD)(t)||("whiteboard"===e?a(-1):r(-1))}}}let x=(0,v.D)(({teamId:e,canSeeBillingAddressExp:t})=>{let a=(0,s.wA)(),u=(0,s.d4)(e=>e.loadingState),v=(0,s.d4)(t=>e?t.teamUserByTeamId[e]:null),N=(0,s.d4)(e=>e.selectedView),x=(0,y.iZ)(),[C,A]=(0,r.useState)(!0),I=(0,i.ZC)(e),P=g.Xw.loadingKeyForPayload({teamId:e}),D=(0,S.GH)(u,P),k=(0,o.DC)();(0,r.useEffect)(()=>{a(g.Xw({teamId:e}))},[a,e]);let M=function(){let e=(0,s.wA)();return(0,r.useCallback)(t=>{(0,n.sx)("Loaded Saved Cart State",{teamId:t.teamId,lastSavedAt:t.updatedAt}),e(p.eK(t))},[e])}();return(0,r.useEffect)(()=>{async function r(t){try{let r=await m.Ay.post("/api/subscriptions/teams/calculate_estimate",{...t,team_id:e});a(p.i({taxes:r.data.meta.estimate}))}catch(e){a(d.s.error((0,c.t)("payments.errors.estimate_calculation_error"))),a(_.$T({...N,paymentStep:h.tn.PAYMENT_AND_ADDRESS}))}A(!1)}if(void 0===I||I===e||C||(b(a),A(!0)),(!e||D)&&C){let n=(0,T.BR)(v,x),i=Object.entries(n).map(([e,t])=>{if((0,l.nD)(t.email||""))return e}).filter(e=>!!e);a(p.M2({figmaEmailTeamUsers:i}));let o=(0,f.lX)({teamId:e,userId:x?.id});if(o){o.editorStatusChanges=(0,f.nt)(o.editorStatusChanges,n);let l=(0,T.Ky)(n,o.editorStatusChanges,E._Y.DESIGN),m=(0,T.Ky)(n,o.editorStatusChanges,E._Y.WHITEBOARD),d=l+o.numEmptyDesignSeats,c=m+o.numEmptyWhiteboardSeats;if(M({numDesignEditors:d,numWhiteboardEditors:c,editorStatusChanges:o.editorStatusChanges,teamId:e,updatedAt:o.updatedAt,campfireSeats:o.campfireSeats}),k){var s;let e=(s=k.billing_period,h.tY[h.tY[s]]),n=t?{billing_address:k.billing_address,shipping_address:k.shipping_address||k.billing_address}:null;a(p.Lo({billingPeriod:e})),a(p.$h({vatGstId:k.vat_gst_id})),a(p.yy({legalName:k.customer_legal_name||k.company_name,displayName:k.display_name})),a(p.Ef({regionalVatGstId:k.regional_vat_gst_id})),r({address:k.address,editor_status_changes:o.editorStatusChanges,figma_email_team_users:i,selected_currency:k.currency,annual_quantity:(0,T.fD)(e,d),monthly_quantity:(0,T.Rq)(e,d),annual_whiteboard_quantity:(0,T.fD)(e,c),monthly_whiteboard_quantity:(0,T.Rq)(e,c),vat_gst_id:k.vat_gst_id,regional_vat_gst_id:k.regional_vat_gst_id,...n})}else A(!1)}else A(!1)}},[a,D,v,I,e,x,C,k,N,M,t]),(0,r.useEffect)(()=>()=>{e&&w(a,e)},[a,e]),C}),w=(0,v.D)((e,t)=>{let a=g.Xw.loadingKeyForPayload({teamId:t});e(u.yH({key:a}))});function b(e){e(p.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]}}})),e(p.js({numDesignEditors:0})),e(p.Az({numWhiteboardEditors:0}))}},196748:(e,t,a)=>{a.d(t,{o:()=>_,K:()=>u});var r=a(411855),s=a(163023),n=a(901536),l=a(501114),i=a(672517),o=a(720647),m=a(943432),d=a(965600);let c=e=>e.maxSeatsCount?Math.min(e.maxSeatsCount,99):99;function _(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:n.cx.flex.itemsCenter.$},r.createElement("div",{className:"editor_counter--editorSeatCounter--Tp0cJ"},r.createElement(i.$z,{disabled:e.numEditors<=e.minSeatsCount,innerText:`remove additional ${e.editorType===o.tL?o.Mg:e.editorType} editor`,className:"editor_counter--minusButton--FeON3",onClick:e.decrementSeats,dataTestId:`remove-additional-${e.editorType}`},r.createElement(s.B,{svg:m.A})),r.createElement("input",{value:e.numEditors,maxLength:2,onChange:e.updateAdditionalSeatsText,className:"editor_counter--additionalSeatsInput--YnWjz",onFocus:e=>e.target.select()}),r.createElement(i.$z,{disabled:e.numEditors>=c(e),innerText:`add additional ${e.editorType===o.tL?o.Mg:e.editorType} editor`,className:"editor_counter--plusButton--B1WY6",onClick:e.incrementSeats,dataTestId:`add-additional-${e.editorType}`},r.createElement(s.B,{svg:d.A}))),r.createElement("div",null,r.createElement("div",{className:"editor_counter--headerText--pKvwm"},e.headerText),e.headerSubText&&r.createElement("div",{className:"editor_counter--headerSubText--qB5dc editor_counter--headerText--pKvwm"},e.headerSubText),e.clarificationText&&r.createElement("span",{style:l.sx.colorText.colorBgSecondary.h16.pl4.pr4.mt8.bRadius1.inlineBlock.add({fontSize:"9px"}).$},e.clarificationText))))}function u(e,t){return a=>{if(""===a.target.value){e(0);return}let r=parseInt(a.target.value);isNaN(r)||(r>99?e(99):t&&r>t?e(t):e(r))}}},921619:(e,t,a)=>{a.d(t,{I:()=>s});var r=a(411855);class s extends r.Component{render(){return r.createElement("div",{className:"persisted_error--container--ls5K4",style:{marginTop:this.props.marginTop??32}},r.createElement("div",{className:"persisted_error--sideBar--C-abH"}),r.createElement("div",{className:"persisted_error--message--EiciR"},this.props.message))}}},881690:(e,t,a)=>{a.d(t,{o:()=>n});var r=a(411855);if(443==a.j)var s=a(57860);function n(e){return r.createElement(r.Suspense,{fallback:r.createElement(s.k,null)},e.children)}},552985:(e,t,a)=>{a.d(t,{R:()=>s});var r=a(411855);function s(){let[e,t]=r.useState(!1);return{isLoading:e,withLoading:async e=>{try{t(!0),await e()}finally{t(!1)}}}}}}]);

//# debugId=977d263e-466d-5766-9a8a-53e6e609502c

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/f17c79e2485b999fd1e81fd6ffc6708727d66644/billing-a7ac8a1a1b22c1fd.min.js.map